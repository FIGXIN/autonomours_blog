- [学习笔记21--高精地图技术概述_FUXI_Willard的博客-CSDN博客_高精地图技术](https://blog.csdn.net/qq_39032096/article/details/121477769?ops_request_misc=&request_id=&biz_id=102&utm_term=判断一个位置在不在高精地图上&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-121477769.142^v38^pc_rank_34&spm=1018.2226.3001.4187)

## 4.高精地图技术概述

### 4.1 高精地图综述

1. 人们日常使用的用于车载导航、查询地理位置信息的地图属于传统电子地图，主要服务对象是驾驶员，如：百度地图、谷歌地图、高德地图等；
2. 传统电子地图是对路网的一种抽象，所有的传统地图都将路网抽象成有向图的形式；图的顶点代表路口，边代表路口与路口的连接，路名、地标及道路骨架信息可以被抽象成存储于这些有向图的顶点或边中的属性；
3. 抽象的地图表征形式很好适应人类驾驶员的需求，因为人类生来具有很强的视觉识别及逻辑分析分析能力；
4. 高精电子地图主要应用对象是无人驾驶汽车，机器驾驶员缺乏人类与生俱来的视觉识别和逻辑分析能力；
5. 高精地图面向无人驾驶环境采集生成地图数据，根据无人驾驶需求建立道路环境模型，在精确定位、基于车道模型的碰撞避让、障碍物检测与避让、转向与引导方面发挥重要作用；
6. 高精地图包含了大量与行车相关的辅助信息，这些辅助信息包括：道路数据，如：道路车道线的位置，类型，宽度，坡度，曲率等车道信息；行车道路周围相关的固定对象信息，如：交通标志，交通信号灯等信息，车道限高，下水道口，固定障碍物等其他道路细节，以及高架物体，防护栏，树木，道路边缘类型等信息；
7. 高精地图还包含了丰富的语义信息，如：交通信号灯的位置及类型，道路标线的类型，可以通行的路面范围等；通过对高精地图模型的提取，可将车辆周边的道路、交通、基础设施等对象及对象之间的相对关系提取出来；

![1](https://img-blog.csdnimg.cn/fe0ae2ddedf94b8899dfe30db9219b93.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARlVYSV9XaWxsYXJk,size_20,color_FFFFFF,t_70,g_se,x_16)

### 4.2 高精地图在自动驾驶中的应用

1. **地图精确计算匹配。**
   由于存在各种定位误差，电子地图坐标上的移动车辆与周围地物不能完全保持正确的位置关系；利用高精地图精确计算匹配则可以将车辆位置精准地定位在车道上，从而提高车辆定位的精度；

2. **实时路径规划导航。**
   对于提前规划好的最优路径，因为交通信息的实时更新，最优路径可能随时发生变化；此时高精地图在云计算的辅助下，能有效地为自动驾驶汽车提供最新的路况，帮助自动驾驶汽车重新制定最优路径；

3. 辅助环境感知。

   高精地图可对传感器无法探测的部分进行补充，进行实时状况的监测及外部信息的反馈；传感器作为自动驾驶的眼睛，也有局限，如：容易受恶劣天气的影响，此时使用高精地图来获取当前位置的精准交通状况；

   高精地图辅助环境感知的原理：

   1. 通过对高精地图模型的提取，可以将车辆位置周边的道路、交通、基础设施等对象及对象之间的关系提取出来，这样可以提高车辆对周围环境的鉴别能力；
   2. 一般的地图会过滤掉车辆、行人等活动障碍物，如果无人驾驶车在行驶过程中发现当前高精地图中没有的物体，这些物体大概率是车辆、行人和障碍物；

4. **驾驶决策辅助。**
   高精地图除了具备传统电子地图的路网地图数据外，还将大量的道路行车信息存储为结构化数据，这些信息分为：道路数据，如：车道线的位置、类型、宽度、坡度、曲率等车道信息；车道周边的固定对象信息，如：交通标志、交通信号灯等信息，车道限高、下水道口、障碍物及其他道路细节，如：高架物体、防护栏、树木、道路边缘类型、路边地标等基础设施信息；

5. **智能控制辅助。**
   高精地图作为所有行车信息的载体，提供了对所在环境进行精准预判、提前选择合适的行驶策略等功能；通过这种减少传感器计算压力和性能计算瓶颈的方式，使传感器控制系统更多关注突发情况，达到自动驾驶过程中智能控制辅助的作用。

### 4.3 高精地图的制作

#### 4.3.1 高精地图生产流程

**高精地图数据生产包括：外业采集、云端自动化处理、数据编辑与质量控制、数据编译与引擎等步骤；**

1. **外业采集，通过搭载GNSS、IMU、LiDAR、摄像头等传感器的专业采集车队，外业实地采集车道线、路沿护栏、交通标牌等信息；**
2. **通过点云融合、点云识别和图像识别等AI技术，在云端实现自动化处理；**
3. **利用高精地图编辑工具、生产管理系统，进行地图编辑，基于ISO 19157/19158，IATF 16949等质量标准，构建全流程数据质量保障体系；**

**高精地图需要获取的地物主要包括：车道线、道路交通设施(人行横道、转向标志、交通设施等)、车道拓扑网络数据及其他地物等；**

**根据数据采集方式不同，高精地图生产方式分类：**

1. **基于移动测绘车采集的数据，前期需要进行点云数据的分区、去噪、拼接等预处理，进而进行矢量化、几何调整、增加属性和拓扑结构建立等加工处理；**
2. **无人机航测高精地图生产，基于校正、拼接等预处理得到的高精度正射影像图，采用自动与人工相结合的方式进行数据矢量化加工处理；**
3. **1：500地形图测绘基于外业采集的数据进行内业地图编绘，通过格式转换，地物分类等进行加工处理；**

#### 4.3.2 高精地图采集平台

**高精地图的采集需要专用的采集车携带激光雷达、摄像机、GNSS、IMU等设备进行；激光雷达用来采集点云数据，摄像头采集道路实景图像，GNSS和IMU用来定位；**

1. **惯性测量单元(IMU)。**
   **一般使用6轴运动处理组件，包含3轴加速度传感器和3轴陀螺仪；**
   **加速度传感器是力传感器，用来检查上下左右前后哪几个面各受多少力(包括重力)，然后计算每个自由度上的加速度；**
   **陀螺仪是角速度检测仪，用来检测每个自由度上的角加速度；**
2. **轮测距器(Wheel Odometer)。**
   **通过轮测距器推算无人车的位置；汽车的前轮通常安装了轮测距器，分别记录左轮和右轮的总转数，通过分析每个时间段里左右轮的转数，可以推算出车辆向前走了多远，向左或向右转了多少角度等；**
3. **GNSS。**
   **确定4颗或更多卫星的位置，计算出它与每颗卫星之间的距离，利用这些信息通过三维空间的三边测量法进行定位；GNSS接收机存储有星历，作用是告诉接收机每颗卫星在各个时刻的位置；**
4. **激光雷达(LiDAR)。**
   **采集点云信息，进行周围环境的感知和建模；**

#### 4.3.3 高精地图的质量要求

**高精地图的数据质量主要分为：数据完整性、数据可用性、位置准确度、专题准确度、时间准确度、逻辑一致性；**
![2](https://img-blog.csdnimg.cn/5db26e51ce484232af8ea0ccbd587b8d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARlVYSV9XaWxsYXJk,size_20,color_FFFFFF,t_70,g_se,x_16)
**高精地图质量标准分为：属性标准和几何标准；**

1. **属性标准：包括属性要素、FPR标准、FNR标准；**
2. **几何标准：包括绝对精度和相对精度；**

***属性标准：***

| 属性要素     | FPR标准 | FNR标准 |
| ------------ | ------- | ------- |
| 车道线几何   | 0.50%   | 0.5%    |
| 路沿         | 0.50%   | 0.5%    |
| 护栏         | 0.50%   | 0.5%    |
| 车道类型     | 0.30%   | 0.30%   |
| 车道通行状态 | 0.10%   | 0.10%   |
| 车道收费情况 | 0.10%   | 0.10%   |
| 车道线类型   | 0.20%   | 0.20%   |
| 车道线颜色   | 0.20%   | 0.20%   |
| 车道线粗细   | 0.10%   | 0.10%   |
| 限速         | 1%      | 1%      |
| Junction     | 0.50%   | 0.5%    |

***几何标准：***

| 绝对精度        | 相对精度          |
| --------------- | ----------------- |
| ±1m，2σ \sigmaσ | ±20cm，3σ \sigmaσ |

***FNR(遗漏率)和FPR(冗余率)：***
**评估原则：以实地情况为准，作业情况符合实地则为正确，反之则为错误：**

1. **实地存在，成果中不存在则为遗漏；**
2. **实地不存在，成果中存在则为冗余；**
3. **成果与实地均存在，但与实地不匹配情况的错误，同时计为冗余和遗漏；**
4. **当实地情况与作业要求不一致时，以实地为准；**
5. **当实地情况在作业范围外而未删除时，计入冗余处理；**

**评估公式：**

1. F N R ( 遗 漏 率 ) = 遗 漏 量 / 真 值 FNR(遗漏率)=遗漏量/真值FNR(遗漏率)=遗漏量/真值；
2. F P R ( 冗 余 率 ) = 冗 余 量 / 真 值 FPR(冗余率)=冗余量/真值FPR(冗余率)=冗余量/真值；