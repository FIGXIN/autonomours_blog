- [AVP自主代客泊车系统浅析 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/395805020)

# 1 AVP系统简介

AVP(Automated Valet Parking）)指自主代客泊车系统，分为召唤和泊车两个场景。用户可通过车主APP实现一键泊车与召唤，启动一键泊车功能后，无人驾驶的车辆全程自主寻径，可完成自动寻找车位和泊车入库；启动一键召唤功能后，用户可提前召唤车辆自动驶出，前往指定位置等待。

![img](https://pic4.zhimg.com/80/v2-24cfa85aa8c560b6fa8766231b65f69b_720w.jpg)

目前，国内外主流AVP解决方案商有博世、法雷奥、华为、百度apollo、德赛西威、纵目科技、深动科技、四维图新参股公司禾多科技、福瑞泰克、上汽集团旗下基金投资的天瞳威视主机厂搭载AVP方面，国外的宝马、大众，沃尔沃；国内的一汽、上汽、吉利、长城、北汽、广汽、长安等自主品牌；还有威马、小鹏、恒驰等新造车势力也都在加紧AVP的量产研发，预计从今年下半年开始就会有产品陆续量产投放。

![img](https://pic4.zhimg.com/80/v2-b291a464f6ed43c18b5565c8d8f7d2a3_720w.jpg)

# 2 AVP产业应用前景

AVP被称为是解决用户“最后一公里自由”的L4级自动驾驶技术，笔者认为是目前最有希望实现商业落地且被用户熟知接受和普遍使用的自动驾驶技术应用场景。理由有如下3点：

**1、解决C端用户停车找车痛点。**

找位难、停车难、取车难是现代城市生活的一大痛点，相信所有车主用户，不管老司机还是路痴都会有这样的经历：在大型商场闷热的地下停车场找不到自己车停何处，浪费大量时间到处找车，此时希望车辆自动行驶到身边来多好。自主代客泊车AVP正是解决这样的痛点，毫无疑问的刚需功能。

**2、提高B端企业运营效率。**

目前出行公司普遍存在车辆调度消耗大量成本及运维资源；停车场停车位资源使用不合理，存在安全隐患；车司机取还车复杂，用户体验差等难点。

**3、法律风险和技术风险相对较低。**

笔者认为这一点至关重要，任何技术的普及都离不开法规的约束，监管层尤其关注安全性。停车场虽然属于高复杂度的开放道路，但是由于车速较低、车中无人、交通参与者较少，使得系统可以进行急刹车等操作，安全风险及技术难度相对较小。同时，由于使用场景限定在停车场区域，面临的法律障碍较小，且不存在“保乘客还是保行人”的伦理难题。戴姆勒与奔驰联合开发的自主代客泊车从2018年开始在斯图加特的梅赛德斯-奔驰博物馆正式运营，成为AVP在世界上的首个落地应用，在推导了近1000种功能场景后，认定AVP技术的安全性要求要高于人泊车30%。由于使用AVP自动停车技术后，停车场安全性和技术风险相对较低，不但可以提高城市运行效率，而且可以降低安全事故发生概率，因此政府监管层是愿意重点扶持，并且在制定法律规范方面也优先出台。

《自主代客泊车系统总体技术要求》出台，首次对场端标准有了明确要求，该标准涵盖了车端智能、场端智能以及车场融合协同三种技术路径，形成了系统定义、安全应用场景、系统总体技术要求、系统总体测试要求四部分主要内容。

![img](https://pic1.zhimg.com/80/v2-906667bcceb36a0f47f80dac2e9ade68_720w.jpg)

# 3 AVP系统功能方案

从用户使用角度，自主代客泊车AVP系统的核心功能即为一键泊车与一键召唤，两项功能的具体用户需求如下：

## 3.1 一键泊车

在不考虑自主代客泊车AVP系统方案前提下，下图1为一键泊车功能的通用运行流程。

![img](https://pic4.zhimg.com/80/v2-c5d1da8c5e5e3252bc8461e57029df67_720w.jpg)

**步骤1：下载地图**用户驾车来到停车场附近，AVP系统应主动提示用户附近可支持自主代客泊车功能的停车场信息及地图下载选项，用户通过HMI界面操作下载地图。

**步骤2：更新地图**用户驾车来到停车场附近，AVP系统应比对本地保存的地图版本及云端最新的地图版本，如系统判断需要更新地图，应主动向用户推送更新选项，用户确认后进行更新。

**步骤3：代客泊入**

a)用户驾车在停车场附近选择代客泊入功能，AVP系统判断满足条件后开启此功能；

b)用户打开手机APP与车辆连接，并下车来到车外；

c)AVP系统控制车辆完成代客泊入，过程中用户通过手机APP得到必要的系统运行信息；

d)AVP系统控制车辆进行代客泊入过程中，应记录车辆周边视频数据。

## 3.2 一键召唤

下图2为一键召唤功能的通用运行流程。

![img](https://pic4.zhimg.com/80/v2-0ee5ed3863c6d3c33e67f8d731009c9f_720w.jpg)



**步骤4：代客泊出**

a)用户打开手机APP，与车辆建立通讯，并通过认证；

b)用户选择代客泊出功能；

c)代客泊车功能开启后，AVP系统接管车辆控制，引导车辆驶至固定的接驾位置；

d)AVP系统通过手机APP通知用户取车。一键泊车及一键召唤功能的实现载体为自主代客泊车AVP系统，根据两项功能的运行流程，可以进一步提出为对AVP系统的功能需求：

**人机交互**人机交互主要包括车内人机交互和车外人机交互两个范畴，应提供支持用户对AVP系统进行必要操作的交互界面，并可向用户显示必要的系统运行信息。

**车辆定位**车辆定位包括车库外定位及车库内两位两个范畴，车库外定位主要依靠GNSS-INS实现，而车库内的定位有不同的技术路线：例如激光雷达SLAM（Simultaneous Localization and Mapping即时定位与地图构建）、基于视觉的VSLAM、超宽带定位UWB等。

**停车场高精地图**可支持图商制作的停车场高精地图，或依靠车端传感器自己建图。车辆周边实时环境感知及记录代客泊车过程中，车端传感器可及时感知周围的车辆、物体、行人、标识、车位等信息，并可记录储存周边视频信息。

**云平台**云平台支持与手机APP及停车场的交互，根据系统架构方案差异，可承担不同层级的任务，例如地图管理、全局路径规划、运营收费等。

**全局路径规划**根据停车场实时情况，为车辆分配合适的可用车位，并规划可到到目标车位的最优行驶路径。

**局部路径规划**车端传感器识别到目标车位后，应根据感知信息修正AVP车辆的定位信息，并计算出车辆泊入目标车位的最优泊车路径。

**车辆运动控制**接管车辆横纵向运动控制，引导车辆根据全局路径规划、局部路径规划进行代客泊车。

**安全备份**在AVP系统出现失效，无法承担完整动态驾驶任务时，AVP系统应有能力根据相应安全策略定义，完成失效操作。

## 3.3 系统架构

下图3为自主代客泊车AVP系统的通用系统架构，包括的子系统为：场端设施、云平台、高精地图、手机APP、车辆和OEM后台。

![img](https://pic3.zhimg.com/80/v2-b216ffed7a76b6ec63901be511aa718a_720w.jpg)

根据AVP通用系统架构上的不同功能分配方案，就可以得到不同的AVP系统技术路线，从大的方面来说：由车辆承担更多系统功能的即为偏车端智能的技术路线，由停车场承担更多系统功能的即为偏场端智能的技术路线，介于二者之间的就是车和场相互协同的技术路线。

# 4 AVP系统技术方案

自主代客泊车AVP系统的一键泊车功能分为初始定位、室内巡航及泊车入库三个阶段。

参与者厂商众多，主要技术方案包括**单车智能、场端智能和车场协同**三种。

**其中单车智能是目前被众多主机厂采纳最多的方案，但笔者认为未来主流落地方案是车场协同方案，即采用智能化车端+智能化场端的方式。**

车端智能化主要依赖于融合式全自动泊车的传感器配置，外加前视摄像头、V2X设备等实现特定区域内的点到点自动驾驶、自动车位扫描、自动泊入泊出等功能。

车辆自身具备车辆、行人等动态障碍物检测和识别功能，可实现自动紧急制动、避障等决策规划。

场端智能化主要依托摄像头检测技术，实现停车场车位占用情况检测，并上传至停车场服务器，并实现为自主泊车车辆提前分配车位信息。

笔者认为未来主流采用一定会是“**车端智能+场端智能+高精度地图厂商+运营商**“整体解决方案，采取“**建设+运营**”的BOT商业模式，有点类似于充电桩，然后通过政府政策引入社会资本，促进AVP自主停车应用场景可持续化发展。

![img](https://pic2.zhimg.com/80/v2-a07aa8722f11cbb3883caecb5e6ff0cd_720w.jpg)

AVP自动代客泊车系统使用到主要技术包括以下几类：

**1、障碍物检测识别技术及多传感器融合技术。**包括超声波传感器、毫米波雷达、激光雷达、环视摄像头等；

**2、高精度车位检测及车位融合技术。**基于超声波传感器可实现空间车位的探测、360环视摄像头可实现线车位的检测。同时结合超声波传感器及环视摄像头的障碍物信息检测，对车位进行多层次的融合，实现泊车位的高精度检测，大大提升了泊车场景的覆盖范围；

**3、泊车轨迹动态规划技术。**轨迹动态规划技术泊车过程中有诸多不可控因素，如转向系统执行速度与精度问题、参考障碍物位置变动问题等，导致在泊车过程中出现泊车轨迹偏离路径规划轨迹现象。

**4、室内高精度定位技术。**通过采用视觉SLAM+标签辅助定位方式，解决地下停车场无GPS的问题，同时通过多源信息融合，提升定位精度。

**5、远程是视频实时传输技术。**通过低延时的音视频传输技术，在车辆自动泊车时，将车内外的音视频数据实时采集传至运营商管理后台服务器和用户APP端。一方面用户可以实时查看车辆周围环境状态，遇到紧急情况人工接管控制车辆，另一方面当出现事故时，用于交通监管部门定则判定时，提供现场图像数据。

**6、全局与局部两点路径规划技术。**基于AI算法实现任意两点间的全局路径规划，支持路径规划重置、选路以及速度规划功能，同时结合实时环境感知状态，进行局部路径规划，实现紧急制动、 跟车巡航以及换道避让、 换道超车等自主决策。此部分技术要求与自动驾驶技术一样，属于基础智能驾驶能力。