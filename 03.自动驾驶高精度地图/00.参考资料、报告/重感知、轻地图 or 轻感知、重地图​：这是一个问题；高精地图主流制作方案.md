- [重感知、轻地图 or 轻感知、重地图：这是一个问题；高精地图主流制作方案 (qq.com)](https://mp.weixin.qq.com/s/pZdrOaX6vo3OoTB78NWimA)

# **1. 高精地图主流的江湖地位**

2021年4月，上海车展开幕前，一台搭载华为ADS（Autonomous Driving Solution）系统的极狐阿尔法S，在无人接管的状态下游走于上海街头，轻松地躲避外卖小哥并穿过复杂的十字路口。

然而，一年多时间过去了，视频里所展示的功能，仍处于Demo阶段。在今年5月极狐阿尔法S Hi版开始交车时，城市道路高阶智能驾驶功能的交付时间又被延期到了12月。届时能否如期交付，目前来看仍是未知数。因为这套系统依赖高精地图的数据，**而只有高精地图全面开通之后，该功能才能落地。**

所以，导致延期的罪归祸首，不是芯片、不是激光雷达，而是“看不见、摸不着”的——**高精地图。**

在业内看来，高精地图更像是一条“人民币玩家”的捷径。大疆车载公关总监谢阗地向虎嗅表示：“硬件、外部数据源、额外的配置就好比神兵利器，如果自身内功不高，靠神兵利器也能完成不少复杂的挑战，但很昂贵而且受限制很多。真正的武林高手，是落叶飞花皆可用。”

**然而，监管部门对高精地图的限制，来得比大家想象的要更快，而且更严格。**

前段时间，自然资源部下发《关于促进智能网联汽车发展维护测绘地理信息安全的通知》，明确规定，高精地图测绘制作，只能由具备导航电子地图制作甲级资质的单位进行。**而这一《通知》的公示，无异议对自动驾驶行业的一次严令重申。**尤其是在当下，国产车企们为了提高产品力，挤了破头想要获取城市高精地图，以快速实现城市内的功能落地。

**“高精地图放在城市道路上都会面临非常大的挑战。”**毫末智行CEO顾维灏告诉虎嗅，第一是城市道路很多、公里路很长、变化度又很高。高精地图如果能够完全地体现时效性，这对于图商来讲要求很高。第二是成本问题，如果大家真正能做到这样的新鲜度，本身地图的成本会非常高。

那么问题就来了：实现城市的自动驾驶，或者乘用车的高级别的智能驾驶，高精地图不可或缺吗？

高精地图，高明在哪？

众所周知，自动驾驶技术发展的三要素分为：感知、规划、执行。将其类比到人类的身上，就是眼睛看到的、脑子里想到的，以及脚上的动作。

但是，现阶段车辆的自动化能力，不足以让其像人类一样自由地在道路上行动。所以按照业内流行一种说法，激光雷达和高精地图是两根拐杖——靠激光雷达来增强感知能力，靠高精地图来提高规划能力。通过这两根拐杖，就可以帮助车企快速地实现高超前的智能驾驶功能。

在《割韭菜最快的刀，叫激光雷达》一文中，我们已经介绍过激光雷达的前世今生。所以，今天我们着重聊一聊，车企们的另一根拐杖——**高精地图**。

根据《智能网联汽车高精地图白皮书》（以下简称《白皮书》）的介绍：

> 高精地图，是指绝对精度和相对精度均在1米以内的高精度、高新鲜度、高丰富度的电子地图，英文称为HD Map（High Definition Map，从数据精度和要素丰富度的角度定义）或HAD Map（Highly Automated Driving Map，从自动驾驶功能的分级标准角度定义）。
>
> 高精地图所蕴含的信息丰富，含有道路类型、曲率、车道线位置等道路信息，以及路边基础设施、障碍物、交通标志等环境对象信息，同时包括交通流量、红绿灯状态信息等实时动态信息。

跟我们平时使用的导航地图相比，高精地图的精度更高，信息的丰富程度也更大。此外，普通导航地图都是给人看的，但高精地图主要是给车“看”的。

目前，高精地图应用得较多的地方，主要是封闭场景中，比如高速公路、封闭园区等。除特斯拉之外，绝大多数车企都利用高速公路上的高精地图，实现了与特斯拉NOA导航辅助驾驶类似的功能。比如，小鹏的NGP、蔚来的NOP、毫末智行的NOH，以及理想的NOA。

其中，高精地图对于智能驾驶功能的帮助主要有两种：首先，是为车辆的自动驾驶系统提供道路先验信息。为车辆纵向加减速、横向转向及变道等决策提供先验信息，提高驾驶舒适性和安全性；其次，可预知车道线、道路标识牌等交通要素的位置， 有助于提高传感器的检测精度和速度。

举个更具体的例子，比如高速自动切换匝道功能。当开启导航辅助驾驶功能的车辆，距离需要驶出的高速匝道还剩2公里左右时，车辆就会自动开始向右侧车道变道。而当需要在左右两条匝道中进行选择时，基于高精度车道数据，利用车道级定位，车辆可以提前判断出行驶的路线。

**总之，有了高精地图之后，车辆就像有了“顺风耳。**

在高速上尝到甜头之后，车企们试图把导航辅助驾驶功能从高速扩展到城市，最后拼接自动泊车场景，以而实现A点到B点的完全自动驾驶功能。这也是为什么，在实现高速导航辅助驾驶功能之后，越来越多的厂家就大肆开始宣传，城市导航辅助驾驶很快就能量产落地。

这背后，在一定程度上是对于城市高精地图的重度依赖。**但能谁料到，城市高精地图“解锁”的速度，并未赶上车企当初宣传时的预期。**

地图“进城”，卡在哪了？

**“高精度地图技术倒不是问题，现在最大的问题就是保持地图的鲜度。毕竟，道路一直在修。”**从时效性来看，目前图商提供的城市高精地图，只能按月或者按季度更新，很难保证智能驾驶系统所需的准确性和实时性。

作为对比，中国城际高速公路和城市快速路加起来也就**30万公里**，但全国的城市道路有**近1000万公里**。

毫末智行技术副总裁艾锐告诉虎嗅，**如果把高精地图看成一个传感器，那么这个传感器经常不准，而且不知道它什么时候不准。从使用传感器的角度，它存在一个不可信任的问题。**

若要彻底解决地图鲜度问题，反而会引发成本难题。武汉大学测绘遥感信息工程国家重点实验室李必军教授，在盖世汽车举办的自动驾驶地图与定位大会演讲时表示，**“按照现在一辆采集车，两百万左右的成本计算，我们可能把全国数据采一下要两百亿左右，没有哪一家能够解决。”**

据《白皮书》显示：采用传统测绘车方式，分米级地图的测绘效率约为每天每车500公里道路，成本为每公里10元左右，而厘米级地图的测绘效率约为每天每车100公里道路，**成本可能达每公里千元。**

即便是采集完数据之后，高精地图的更新又是另一个大难题。目前业内主流的方式，就是众包模式——**简单来说，就把每一辆搭载智能驾驶系统的车辆，成为移动的地图采集车。**

从技术角度而言，众包模式固然是好的。因为通过用户车辆上传，可以形成“用户使用-反馈- 地图更新-价值提升-吸引用户”的正反馈链条。

**看到这个，你一定发现了，众包模式背后所隐藏着数据安全的问题。**

这也是为什么，在中国自然资源部出台的《关于加强自动驾驶地图生产测试与应用管理的通知》中，明确要求，从事自动驾驶地图数据采集与制作的单位必须具备导航电子地图制作资质，**且外资企业不得从事导航电子地图制作。**

光是外资企业这一条，就将众多有外资背景的车企、科技公司、创业公司挡在了门外。然而，在今年开始对导航电子地图制作甲级资质进行复审后，目前已经公示的3批复审通过的单位，只有19家。其中2022年2月21日公示的这批名单，包括了高德地图、华为、腾讯等公司。而像以前滴滴旗下的滴图科技、东风汽车投资的立得空间、吉利参与投资的易图通，都没能完成复审。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/b2YlTLuGbKBQT9icNofict45nYyKWQiaa9Sup7UbKojYciccfibbAT4ayoI1C0Un3fooqNxU1mpB1p31Cfl9HYcsGCg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

截图来自：中国自然资源部

另外，高精地图的安全性验证还没有行业统一的共识。但美国、日本、德国等国家先后建立了一些高精度动态地图相关的平台， 形成了各自的高精度动态地图采集、更新和应用模式。国内的玩家们，要么就静静的等图来，要么只能另谋出路。

丢掉拐杖，迟早的事

“就像十多年前，我们没有智能手机。要找路，大部分人也是能找的。”大疆车载公关总监谢阗地告诉虎嗅，打造一套好的智能驾驶系统，应该把基本功打磨到极致，用基础的硬件能力来处理核心需求。比如，与五菱合作的2023款KiWi EV车型上，大疆只用一套“1前视双目+4环视鱼眼+1前向毫米波雷达+12超声波雷达”的硬件组合，就能城市复杂路况中进行智能驾驶。

大疆车载管这套系统叫“灵犀智驾系统”，其最大的特点就是：无需提前学习，可针对驾驶安全有威胁场景，包括动静态的任意随机障碍物进行识别避障。同时，**在没有配置高精地图及激光雷达的情况下，可实现智能泊车+城市道路场景的驾驶辅助。****从技术路线来看，大疆车载走的是与特斯拉类似的纯视觉方案。**依托大疆在无人机领域所积累得到的双目视觉技术，基于双目融合点云的算法，得到一个带有包括深度信息在内的几何信息，以此来判断前方障碍物是否会威胁行车安全。纯视觉方案的好处就在于成本低、规模化能力强。

出于安全冗余的考虑，目前业内更认可的作法是**“重感知、轻地图”**的路线。

“重感知、轻地图的路线，就是为了规避地图的问题。”毫末智行技术副总裁艾锐告诉虎嗅，在感知技术有了比较大的能力提升之后，毫末主推的路线就是尽量地相信实时感知，而主要利用地图的拓扑关系，那些地图里面不会改变的信息。**“就像人开车的时候，人主要还是相信自己的眼睛。”**

感知硬件、计算平台，就好比人的眼睛和大脑，帮助其做出正确的判断。举个城市场景里最常见的案例，看红绿灯。如果有高精地图的话，可以根据地图里红绿灯位置信息，在感知上做预瞄，然后再进行识别。并且，车辆可以很好的找到当前道路、车道所对应的红绿灯信息。有些高精地图服务商还能为车辆实时提供动态信息，比如红绿灯倒计时等。

但如果没有高精地图，车辆行驶到路口时，系统需要依靠感知和计算作出正确判断。目前，毫末是通过迁移学习领域中的混合迁移训练方法，将仿真数据和真实数据进行混合训练，从而提高红绿灯识别度。此外，还通过用Transformer做时间和空间上的前融合方式，解决“空间感知碎片化”和“时间感知不连续”的问题，有效识别城市道路车道线。

依靠单车智能，来解决自动驾驶行业的长尾问题还不够。目前车企更愿意接受的方式，就是构建云端计算的能力。

据虎嗅了解到，**小鹏汽车和智己汽车（合作方为Momenta）**，**目前都已经从研发端切换到“重感知”的路线上，并且试图摆脱对高精地图的依赖。**

9月7日，飞凡汽车在线上举办了飞凡R7智驾系统沟通会，进一步详细对外介绍了飞凡R7搭载的RISING PILOT全融合高阶智驾系统，包括感知硬件配置、全融合感知算法和芯片平台等方面。据悉，飞凡R7将于今年9月下旬正式上市，今年10月正式开启交付。

此外，飞凡汽车介绍，飞凡R7的智能座舱将采用RISING OS智舱交互系统，并配备高通骁龙SA8155芯片、RISINGMAX飞凡3+1巨幕、43英寸三联屏以及华为视觉增强AR-HUD平视系统。

三大感知硬件都上车，业界常说，「软件定义汽车」，但再强大的功能也要硬件跟得上。

据介绍，搭载RISING PILOT全融合高阶智驾系统的飞凡R7整车搭载了33个高阶感知硬件，包括国内首发量产的采埃孚Premium4D成像雷达、800万像素高清摄像头及全球首发量产的LUMINAR 1550nm高规激光雷达。

飞凡智驾首席科学家金杰盂谈到，他们在该4D成像雷达上实现了多任务的机器学习网络，能够提取出人、车的运动轮廓、类型等信息，并针对车道前方静止障碍物采用了专用机器学习网络。同时，他们还在该4D成像雷达上实现了一个时间序列的机器学习网络，可帮助整合4D成像雷达在连续帧不同时间的点云积累。

LUMINAR 1550nm高规激光雷达则能够在10%的反射率标准下实现250米的最远探测距离，并有效识别不规则禁止障碍物等。金杰盂表示，在这颗激光雷达上，他们进行了三维的点云神经网络检测，并与传统的常规非神经网络算法结合，来精准探测、判断车辆前方运动的人、车等交通参与者的位置、轮廓以及类型。

而12颗高清摄像头与点云输出的雷达矩阵形成了协同补强，可实现360度识别障碍物和交通要素。金杰盂介绍，他们将所有的摄像头进行了时间和空间上的对齐，并把综合后的统一图像放入多任务多特征的神经网络，实现了对人、车等交通参与者以及车道线、红绿灯、限速牌等静态交通要素的完整探测。

飞凡汽车方面称，「目前飞凡R7是唯一集齐视觉、毫米波、激光雷达这三大领域最顶级硬件的车型。」

**重感知、轻地图 or 轻感知、重地图**

**“沉没成本太高了。”**一位自动驾驶业内人士告诉虎嗅。

在技术路径上看，华为既然会坚定地走高精地图的路线。毕竟，华为在2019年7月就获得了导航电子地图制作甲级测绘资质，今年又完成了复审。可以说，华为是业内为数不多，自己有高精地图、有软硬件全栈解决方案的厂商。让华为现在转向重感知的路线，无异议调头重新起跑。

而从终局来看，高精地图依旧是不可缺少的基础设施。但从用户的角度而言，依赖高精地图的智能驾驶，多少有点“小白鼠”的意思。要么，你爱车上的智能驾驶功能只能在固定区域内使用；要么，你爱车上的各种传感器将作为采集工具，给车企或者供应商无私的“画图”。

# **2. 高精地图主流的制作方案**

近年来，高清晰度（HD）地图引起了广泛关注。由于高清地图在定位中的高精度和信息水平，它立即成为自动驾驶的关键组成部分。从百度阿波罗（Baidu Apollo）、英伟达（NVIDIA）等大型组织到个人研究人员，已经为自动驾驶的不同场景和目的创建了高清地图。

## 1**高精地图的数据采集**

数据源/收集是生成高清地图的第一步。使用移动地图系统（MMS）进行数据收集，MMS是一种配备地图传感器的移动车辆，包括GNSS（全球导航卫星系统）、IMU、激光雷达（光探测和测距）、相机和雷达，用于收集地理空间数据。

商业化高清地图提供商采用众包方式收集数据，以构建和维护其高清地图。TomTom通过多源方法收集数据，包括调查车辆、GPS跟踪、社区输入、政府来源和车辆传感器数据，这里利用了全球400多辆地图车辆、政府数据、卫星图像和社区输入，不断获得最新的道路信息。通过众包收集数据可以在很短的时间内收集大量最新的道路/交通数据。众包数据还包含不同的环境，包括城市、城镇和农村地区。然而，由于多个移动地图系统的高成本和数据收集的时间消耗，该方法不是单个研究人员的最佳解决方案。个别研究人员还利用MMS收集数据，他们不是收集世界各地不同类型环境的数据，而是关注规模更小的区域，例如城市，大学校园或住宅区。收集的数据出于研究目的，类型也更加具体。

## 2**点云高精地图生成**

**一旦收集到初始传感器数据，通常会对其进行融合和排序，以生成初始地图，主要用于精确定位。**初始mapping主要使用3D激光传感器生成；然而，它可以与其他传感器融合，如IMU、GPS、里程计和视觉里程计，以便在高清地图中进行更精确的状态估计。INS和GPS传感器提供方位和位置信息，以在厘米精度范围内更新地图位置。这些点云地图已经非常精确，可以帮助车辆在3D空间厘米级进行精确定位。随后，在mapping获得点云配准之后，从PCL映射创建矢量映射。点云配准被称为对齐多个重叠点云以生成详细和准确地图的多步骤过程（如下图所示）。

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzag23hHP6Hdk1aMRR8cRlVgqQ5paPGGoshlD5sg7Np3HSxG1iaf6ZW02qA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

矢量地图包含与车道、人行道、十字路口、道路、十字路口、交通标志和交通灯相关的信息。毫无疑问，地图生成是高清晰度地图生成的一个组成部分，它可以定义为HD地图的基本几何图形图层。

### **建图技术**

地图生成技术可分为在线地图和离线地图。离线映射数据全部收集在中心位置，数据使用卫星信息或激光雷达和摄像机存储的数据，然后地图在收集数据后离线构建。

另一方面，在线地图中地图生成使用轻量级模块进行，除了地图制作类型之外，还可以通过使用传感器或如何融合传感器对地图技术进行分类。

以下标测技术需要基于激光的传感器，因为它们在长距离下显示出良好的精度。大多测绘技术目前都使用激光作为主要传感器，用于测绘和完成高清晰度地图。另一方面，有一些方法仅使用视觉传感器来构建点云地图，存在为3D模型生成而开发的点云配准技术，下面是几种常用方法！

### **1） 基于分割的点云配准**

SegMap是一种基于点云中分割特征提取的映射解决方案，该方法通过重构要区分的局部特征来生成点云图。轨迹结果表明，与LOAM（激光测程和测绘）结合使用时，性能比仅使用LOAM框架更高。

### **2）仅基于激光雷达的点云建图**

通过改进现有的点选择方法和LOAM迭代姿态优化方法，小视场和不规则采样的激光雷达方法已经实现了卓越的精度和效率，整体建图结构如下图所示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzagG8rL2YicWCd2xwATbRZX2oPKtW3RHBCYqBpZMlB7lfGibhvjmfNV1ATw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

### **3）里程计融合点云配准**

当GPS不可用或断开连接时，融合里程计非常方便，主要是在室内。迭代最近点（ICP）方法使用6自由度信息来匹配给定点云中的最近几何体。

### **4）GPS融合点云配准**

GNSS中的绝对位置作为graph-based建图中的约束，以统一点云数据与坐标系。因此，点云中的体素使用绝对3D坐标信息进行标记。

### **5）INS融合点云配准**

在不使用任何传感器的情况下，根据每次NDT更新计算车辆状态和偏航。使用速度和加速度导出基于运动模型的初始猜测。IMU为二次模型提供平移更新和方向更新。Autoware的NDT mapping技术还提供了用于标测的IMU和里程融合。

### **6）视觉传感器融合点云配准**

R2-LIVE和R3-LIVE算法使用激光、惯性导航系统和视觉传感器的融合来进行精确映射和状态估计。R2-LIVE使用基于卡尔曼滤波器的迭代里程计和因子图优化来确认准确的状态估计。R3-LIVE是两个独立模块的组合：激光雷达IMU里程计和视觉IMU里程测量。Global地图实现了激光雷达和IMU的精确几何测量。与IMU融合的视觉器将地图纹理投影到全局地图中。

下图展示出了使用现有建图算法生成的地图。有多种技术可以融合多个传感器以创建完整地图。视觉里程计（IMU和摄像机）、GPS和激光雷达数据被组合到一个超级节点中，以获得优化地图[32]。

下图展示出了使用不同方法从在线映射获得的轨迹路径，（a）是地图传感器数据的完整路径（安大略科技园区），展示出了来自记录数据的完整里程计数据。（b）和（c）是全轨迹路径的放大版本。该地面真实路径通过RTK-GPS和IMU数据的融合获得。这些分数表明R3-LIVE遵循地面实况路径，即RTK-GPS里程计。

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzag5TiaHoCVSl28KxBpQ235QQiclyibEs9zVmKINNWhDFf4G301EK7yuehEQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

## 3**高清地图的特征提取方法**

为了使ego车辆定位并遵循运动和任务计划，需要进行特征提取，如道路/车道提取、道路标记提取和杆状物体提取。特征提取传统上由人工完成，成本高、耗时且精度低。近年来，机器学习辅助的高清地图生成技术已经开发并广泛用于提高特征提取精度和减少人工工作量。

### 1）道路网络提取

#### a）基于二维航空图像的道路提取

道路地图/网络对于自动驾驶系统定位自我车辆和规划路线至关重要。从航空图像中提取路线图也很有吸引力，因为航空照片覆盖了广泛的地图，通常是城市地图，并通过卫星不断更新。然而，从航空图像手动创建路线图既费时又费力。由于人为错误，它也不能保证精确的路线图，因此，需要能够自动化路线图提取过程的方法。为了缓解道路分割的不连续性问题，他们将不连续道路的端点连接到特定范围内的其他道路端点。连接被视为潜在道路，此处应用A*算法[39]选择最短连接作为不连续道路，如下图所示：

##### 迭代图增长法

迭代图生长方法通过首先选择道路网络的几个顶点从2D航空图像生成道路网络。然后，逐点生成道路，直到创建整个道路网络。B基于CNN的决策函数决定是否应将顶点或边添加到道路网络。这样，通过迭代图生长方法逐点生成道路图，迭代图增长方法如下图可视化所示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzagc8qsDU09UX1JSMicmqEjHXbut2dw7XichpECyJgGoRIRzfeWNicXvct2w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

在15张城市地图上对道路跟踪方法进行了评估，并将结果与DeepRoadmper和Bastani等人实施的另一种分割方法进行了比较。

##### 图生成方法

图生成方法直接从航空图像预测道路网络图，该方法将输入的航空图像编码为向量场，用于神经网络预测。然后通过解码算法将预测解码成图。

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzagKtribcKqAs8uVpyRNk0OfmHnxKoYHCffR4krDqBO96OdRh8lkth8icNw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

基于分割的方法可以使用CNN在很短的时间内从航空图像中自动提取大规模道路网络。

#### b）基于3D点云的道路提取

基于3D点云的道路或车道提取已广泛用于生成高清地图的过程中。激光雷达点云具有高精度，通常在毫米级精度，并包含扫描对象的几何信息。3D点云数据是通过在SUV顶部放置一个驱逐激光雷达并驾驶SUV通过CBD收集的。以闭环方式收集点云数据[64]，以避免累积配准误差引起的漂移问题，如下图所示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzag6rZxtxzFFb2KBvtyRibW6wyoib30mu8bISFLLOCrhwgia47XwhrNPEjOA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

环路检测算法用于提取形成环路的点云，其中仅提取属于特定环路的帧。然后对提取的环路点云进行预处理，包括下采样，分割地面点，并去除自我车辆和附近的无关点。使用3D正态分布变换（NDT）对预处理的回路点云进行配准和合并，对合并后的原始点云进行后处理，包括空间子采样、噪声去除、重复点去除和平滑，以生成最终提取的道路。

#### c）基于传感器融合方法的道路/边界提取

基于2D航空图像和3D点云的道路提取都有局限性。由于照明条件差、路边设施造成的遮挡以及各种地形因素，从卫星和航空图像中提取的道路网络通常不准确和不完整。3D点云上的特征提取也面临遮挡和点密度变化问题，这导致道路提取不准确和不完整。在提取道路或道路边界时，使用单一数据源的局限性是显而易见的。因此，研究人员一直在使用多源数据来提取和完成道路或道路边界。

### 2）道路标线提取

道路标记是高清地图上的基本特征，可为ego车辆提供有关交通方向、转弯车道、可行驶和不可行驶车道、人行横道等的信息。与道路提取方法类似，也可以使用2D图像或3D点云进行道路标记提取。

#### a）基于二维图像的道路标线提取

传统上，2D图像上的道路标记提取是通过图像处理和计算机视觉实现的。包含道路标记的图像首先被去噪和增强，以使道路标记清晰和明显，并突出目标和背景区域之间的对比度。随着CNN的引入和快速发展，涉及CNN的方法已被广泛开发并用于检测和识别道路标记。2D图像上的道路标记提取和识别通常采用两种不同的方法进行。一种是利用由车载摄像机捕获的前视图图像。另一种是从航空图像中提取道路标记。两者的示例如下图所示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzagCzl4vlibZBMOehcebn1sPGZynzbM0kmUicK2pIlQ9PCfnQUwaDa0Xg2g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

前视图图像由于其成本效益和便利性而被广泛用于道路标记提取，已经提出了几种方法来检测车道线标记。

#### b）航空图像中的道路标线提取

卫星和航空图像不仅可用于道路网络提取，还可用于道路标记提取。

#### c）基于三维点云的道路标线提取

3D点云上的道路标线提取通常采用两种不同的方法，自下而上方法和自上而下方法。自底向上方法通过区分道路标记点云和背景点云直接提取道路标记。相反，自上而下的方法使用CNN检测预定义的几何模型，并基于检测重建道路标记。

### 3）杆状物体提取

在高清地图中，杆状对象（如交通灯、交通标志、路灯、树木和电话线杆）对道路环境至关重要。它们可以帮助定位（不同于其他道路设施的形状）和运动规划（交通信号灯提供交通流条件）。杆状物体提取通常通过MLS 3D点云的分割和分类完成。前几年已经开发了各种用于杆状物体提取的方法。

## 4高清地图框架

随着高清地图越来越复杂，需要提取的环境特征越来越多，有必要使用框架形式的良好软件，以便在地图中充分存储相关信息，并确保地图的一致视图。本节介绍Apollo地图。阿波罗地图是由中国领先的自动驾驶平台百度阿波罗创建的高清地图。阿波罗高清地图也使用OpenDRIVE格式，但是专为阿波罗设计的修改版。阿波罗只是使用点，不像OpenDRIVE，使用线、螺旋线和圆弧等几何图元定义道路。与Lanelet2中的点类似，每个点存储纬度和经度值，这些点的列表定义道路边界。在阿波罗高清地图中，通常有五个不同的元素：

1. 道路元素包含道路边界、车道类型和车道行驶方向等特征；
2. 相交元素具有相交边界；
3. 交通信号元素包括交通信号灯和标志；
4. 逻辑关系元素包含交通规则；
5. 其他要素包括人行横道、路灯和建筑物[133]。

为了构建高清地图，百度阿波罗将生成过程分为五个步骤：数据源、数据处理、对象检测、手动验证和地图制作，如下图所示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/VnDXQzNf28jjNAcCAxbKAY2wgzhllzagPJQqsibK5S55SCyMGzowrfJhcCR9Wj7R3TblBaGxWZFLHaeSeCMtysA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

阿波罗地图是OpenDRIVE的更高级和更复杂的版本，阿波罗地图包含最初不在OpenDRIVE中的元素，如无停车区和人行横道。阿波罗地图也需要比OpenDRIVE更多的数据来定义车道。OpenDRIVE只需要指定车道宽度，而Apollo需要点来描述车道边界。