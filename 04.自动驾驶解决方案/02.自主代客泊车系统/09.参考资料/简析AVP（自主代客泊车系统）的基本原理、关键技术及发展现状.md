- [简析AVP（自主代客泊车系统）的基本原理、关键技术及发展现状-华夏EV网 (evinchina.com)](http://www.evinchina.com/articleshow-265.html)

## 一、AVP功能原理

典型的AVP功能完整流程是： (1)用户到达停车场入口或附近，通过手机端开启AVP 功能，用户可以离开车辆.去吃饭、逛街、开会等； (2)车辆接收到AVP功能启用指令，自行进入停车场，在停车场中找到可用的车位，并停在车位上； (3)用户需要用车的时候，通过手机端远程发出召唤，指定自己需要上车的位置； (4)车辆接收到召唤指令后，自行离开停车位，驶出停车场，到达指定位置，用户上车。 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311411302139.jpg)

图2：AVP功能的全流程图示

从功能流程中可以看出，AVP的完整功能可以拆解为四项关键子功能：一是手机与车辆的互联：二是车辆在停车场内寻找车位；三是车辆自动泊入车位四是远程召唤车辆。

### 1.1 机-车互联

手机与车辆的互联，是AVP功能的基础，只有用户能离开车辆，并通过手机远程给车发指令，AVP 才能真正地给用户带来便捷。

要做到这一点并不困难，目前很多汽车都具备了手机智能互联与控制的功能，并有自家品牌专有的APP作为入口：典型案例如手机钥匙、车内温度控制，特斯拉的哨兵模式、智能召唉、小鹏的遥控泊车等。

那么，机-车互联的原理是什么呢？

手机与汽车互联的系统包括4个部分：车载控制器与网关，T-BOX，后台，手机APP。

T-BOX是远程信息处理器的简称（Telematics BOX），主要用于车辆和后台系统及手机APP 通信，实现手机APP的车辆信息显示与控制。

当用户通过手机端APP 发送控制指令后，手机访问后台（一般是云端服务器），云端服务器将用户的指令传递到车载T-BOX，T-BOX再通过车辆总线（CAN／Ethemet）将指令传到对应的车载控制器。对于AVP功能，此处特指AVP功能的控制器。

从操作层面上，手机端通过APP访问云端服务器，通过网络模块建立与车辆OBD和控制器的联系，从而激活AVP功能，控制车辆开始自主代客泊车模式： 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311424508868.jpg)

图3：机-车互联系统的组成

### 1.2 寻找车位

进入停车场，并在停车场内自动寻找车位，是AVP功能的核心。在没有任何控制的情况下，车辆如何在停车场内自动、准确地寻找到可停的车位，是AVP的重点和难点。

目前寻找车位的方案有两种技术路线，一种是纯车端路线，即让车辆在停车场内边行驶边搜索车位，一旦搜索到可用的车位，就停下来准备泊入车位：另一种是车-场端结合的路线、即停车场内安装设备，将可用的车位信息和停车场内其他信息如障碍物等，发送给车辆，车辆将场端给定的车位作为终点，规划好行驶路径，直接开到终点。 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311431105280.jpg)

图4：AVP寻找车位车端方案       

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311433307708.jpg)

图5：AVP寻找车位场端方案

在寻找车位的过程中，涉及到路径规划、车位识别、避障、字符识别等功能。

对于纯车端方案，路径规划即车辆自行规划搜索车位的前进路线，与传统的人工寻找车位思路一样，需要结合周边场景，边前进边规划；对于车-场端结合的方案，路径规划指规划从当前位置到目标停车位的路径，然后车辆直接按该路径行驶即可。

车位识别功能需要车辆能够自主识别各种类型的车位。通常会从不同的维度来划分车位类型，维度包括车位方向、车位标线、车位字符等等。 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311445701378.jpg)

表1：停车位类型

避障，是指车辆在寻找车位过程中，识别出周边所有的障碍物，并能及时通过加减速、转向或停车等工作，避开障碍物，确保安全、高效行驶。障碍物主要包括静态障碍物和动态障碍物，在车-场端结合的方案中，障碍物还可以由场端的设备.实时传输给车辆，提升避障的准确率和效率。

表2：总结了常见的障碍物类型，车辆需要能够识别出这些常规障碍物。 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311455403835.jpg)

表2：常见障碍物类型

字符识别.是指车辆能够识别，在行驶过程中遇到的标识牌、地面、立柱等标注的字符，如直行与转向箭头、道路线、斑马线、车位号、特殊车位标识等，车辆需要通过这些字符标识，决策自己的行驶动作，并确认车位可用性。

### 1.3 泊入车位

寻找并确认车位后，开始自动泊入车位，这一过程与传统的自动泊车功能一样、通过规划泊入路径并控制车辆按路径倒车.完成泊入车位的工作。

### 1.4 召唤车辆

远程召唤车辆的全过程，是车辆自动泊车的相反过程。用户通过手机发出指令后，车辆自动从车位驶出，到达指定位置，完成AVP的全过程。 

## 二、AVP关键技术

从AVP的基本原理可以看出，AVP功能的实现，涉及车联网、感知识别、同步定位、规划控制等多个领域，其中涉及的关键技术有高精地图、SLAM、融合感知、融合定位、路径规划等。 

### 2.1 高精地图

高精地图又称高分辨率地图（HD Map.High Definition Map），是一种专门为无人驾驶服务的地图。对于AVP功能来说，高精地图主要指停车场的高精地图：通过格式化存储停车场内的各种交通要素，高精地图可以告知车辆完整的、高精度、精细化的停车场内部信息，包括高精度的坐标、准确的停车位、通道、立柱、标志牌、地面线等信息。

高精地图的绝对精度一般都会在亚米级，以高德地图为例，绝对精度可以达到10厘米以内，而且横向的相对精度往往还要更高。

可以说，高精地图存储了停车场的所有交通信息，是车辆规划行驶路径和定位的基础。目前国内可以提供高精地图的图商主要有高德、百度、四维图新等大厂。 

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311474905750.jpg)

图6：高精地图

### 2.2 SLAM SLAM

全称SimultaneousLocalization And Mapping，即同步定位与建图技术。

SLAM是除高精地图外的另一种构建地图方法：车辆在一个初次到达的停车场中，一边移动，一边根据位置和环境感知的结果进行自身定位，同时在自身定位的基础上建造增量式地图，实现车辆的自主定位和导航。

目前的主流SLAM 主要靠视觉语义实现，即通过摄像头识别周围环境，经过语义分析，确认当前环境，并完成定位与建图。但随着激光雷达量产上车，激光SLAM或将成为新的主流。

### 2.3 融合感知

毫无疑问，环境感知是自动驾驶的重中之重，当然也是AVP的重难点。

众所周知，摄像头、毫米波雷达、激光雷达等不同类别的感知传感器，都存在各自的优势与不足，因此将多个传感器的感知结果进行融合，优势互补，可以提升感知的精度和准确度。

目前多传感器融合已经成为自动驾驶的发展趋势。通过融合多种摄像头和雷达的感知结果，车辆可以更加精确地识别周边环境，并实现场景重构。

对于AVP来说、前视摄像头、侧视摄像头、环视摄像头、毫米波雷达、激光雷达、超声波雷达等传感器的感知结果，都可以进行融合处理。融合后的感知结果，将大大提升环境识别的效果。

### 2.4 融合定位

传统车辆的定位主要依赖于GNSS，即全球导航卫星系统，如GPS、北斗等。但GNSS的定位精度只有米级，无法满足自动驾驶的定位需求；同时对于AVP来说，地下车库中无法覆盖卫星信号、传统CNSS定位会失效。

因此、GNSS＋IMU＋SLAM的融合定位方式，是目前AVP 实现精准定位的不二之选。通过三者的信息融合，可以实现厘米级的定位精度，并且准确性也能得以保证。

另外，在车-场端结合的方案中，可以利用车-场互联，实现车辆在停车场内位置的实时同步，更进一步地提升了定位效果。

### 2.5 路径规划

此处的路径规划，特指车辆泊入车位时，规划泊车路线。泊车路径规划是一个相对复杂的规划问题，涉及障碍物和车辆的轨迹预测、可行驶区域选择、局部轨迹规划和车辆控制等内容。不同的规划算法，会得到完全不同的自动泊车效果，目前各路玩家仍在不断优化自己的泊车路径规划算法，以求达到更好的效果。 

## 三、AVP的发展现状

从上文我们可以看出，AVP的愿景是美好的，但受限于当前的技术水平，距离完全意义上的量产AVP仍有一定的距离。

与目前已经量产的自动泊车功能相比，AVP是更高级别的自动泊车，可以认为：当前的自动泊车是AVP的基础。

目前的量产车型中，大部分车型都可以做到最基础的APA，即自动泊入泊出；小鹏、威马等新势力，也实现了简单的HPA即记忆泊车功能，HPA可以理解为AVP功能的过渡版，适用于单一、指定的停车场和停车位。

![img](http://www.evinchina.com/uploadfile/image/20220313/2022031311504008188.jpg)

表3：各级自动泊车功能的现状

虽然 AVP 距离完全落地还有一段较长的路要走，但是作为点到点的自动出行中较为关键的起点和终点阶段，AVP是将各路玩家的必争之地。 从目前行业内的动态来看，大家都在为AVP的量产落地而努力着，相信随着关键技术的突破与成熟，AVP会在不久的将来，得到大规模普及和应用。