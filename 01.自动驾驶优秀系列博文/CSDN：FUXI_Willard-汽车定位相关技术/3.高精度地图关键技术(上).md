- [学习笔记3--高精度地图关键技术(上)_FUXI_Willard的博客-CSDN博客](https://fuxi-willard.blog.csdn.net/article/details/125529213)

## 2.高精度地图关键技术

### 2.1 道路元素[图像处理](https://so.csdn.net/so/search?q=图像处理&spm=1001.2101.3001.7020)

**高精度地图的制作需要运用图像处理技术将道路上的各种道路元素进行识别，并以此进行语义标注，如车道线检测、众包图像数据采集等；道路元素包括：交通标志牌、红绿灯、车道线和隔离带等；在进行识别前，由于光线、雨水、车速等环境影响，可能引入噪声或使图像失真，因此，首先需要对图像进行降噪和增强等提高图像质量的预处理，然后利用这些道路元素的颜色、位置和大小等先验知识提取其特征，再基于这些特征进行识别并进行分类，完成语义标注；**
![1](https://img-blog.csdnimg.cn/0b3e0ad72a2f4f9db4a6143737df4ec2.jpeg#pic_center)

- 图像采集：通过摄像机等工具采集真实道路环境下的图像，形成数据集；
- 图像预处理：对数据集中的图像进行扩充，同时对图像进行标注工作，便于后期进行深度学习训练模型使用；
- 图像分割：将图像分成若干个特定的、具有独特性质的区域并提出感兴趣目标的过程；
- 边缘检测：找出图像中亮度变化剧烈的像素点构成的集合；
- 图像细化：将图像的线条从多像素宽度减少到单位像素宽度的过程；通过减少图像像素数来达到压缩图像的目的；
- 特征提取：将数据集中的每一幅图像输入到深度学习模型中，在特定的卷积层中提取图像的深度学习特征，便于图像识别工作；
- 特征参数计算：参数计算对卷积神经网络(Convolutional Neural Network，CNN)至关重要，不同的步长、填充方式、卷积核大小、池化层策略等都决定最终输出模型与参数、计算复杂度等；
- 图像识别：将任意一幅待识别的图像输入到深度学习训练模型中，提取样本的深度学习特征并对图像进行识别，判断该图像中的物体属于哪个类别并显示识别物体的准确率；

**当前主流方式采用基于深度学习的图像识别算法进行车道线、地面标志线和交通标牌的识别工作，常见的算法如下：**
![2](https://img-blog.csdnimg.cn/ee7f0d059c4d455da29149884be8e592.jpeg#pic_center)

### 2.2 激光点云处理

**激光点云处理的通常做法：利用激光雷达扫描获取激光雷达点云数据，重建三维的道路环境，并利用重建好的三维环境进行道路要素特征的提取与识别，准确地反映道路环境并描述其道路环境特征，得到高精度点云地图；处理后的激光点云数据能够与图像数据进行映射或融合处理，得到信息更加丰富的彩色激光点云地图；**

1. 激光点云特征提取
   - 激光雷达获取的原始数据集以激光点云文件形式进行存储；
   - 激光点云文件中只包含物体表面的离散点集、法向量、颜色或标签等基本信息，但缺少物体的曲面、体积及各顶点间的几何拓扑等信息；
   - 采集得到的点集数据通常包含噪声，具有散乱、重复及量大等特点；为了更好描述道路环境的几何特征，需要对点集进行特征提取，提取得到的点特征所表示的特征向量应具有平移旋转不变性、抗密度干扰性、抗噪声稳定性等特点；
   - 抗密度干扰性表示一个局部表面小块的采样密度的变化不会影响特征向量值；抗噪声稳定性表示在数据中有轻微噪声的条件下，点特征表示的特征向量不会发生较大的变化；
   - 激光点云的特征按照空间尺度分为：局部特征、全局特征；
     - 局部特征：一般包括法线、点特征直方图(Point Feature Histogram，PFH)、快速点特征直方图(Fast Point Feature Histogram，FPFH)、方位直方图特征(Signature of Histogram of Orientation，SHOT)和3D形状描述子等几何形状特征描述；
     - 全局特征：一般为拓扑特征描述，这类特征描述一般难以捕捉细节的细微变化且对物体遮挡敏感；
2. 激光点云法向量
   - 法向量是激光点云数据重要的局部特征，能够对散乱激光点云的局部进行有效的描述并为其他激光点云处理技术提供支撑；SHOT以及旋转图(Spin Image)等许多特征描述子都需要利用激光点云法向量进行计算提取；
   - 激光点云法向量计算方法：
     - 第一种：使用曲面重建技术，从获取的激光点云数据集中得到采样点对应的曲面，然后从曲面模型中计算表面法向量；
     - 第二种：直接对激光点云数据集进行法向量估计；如：求某点在三维空间中的法向量，需要在该点周围搜索出近邻点集，利用此点集拟合一个曲面并计算此曲面的法向量；
3. 激光点云配准
   - 在激光点云数据的采集过程中，由于采集角度有限，可能需要从道路的多个方向进行多次采集，以保证采集数据的可靠性和完整性，在采集汽车运动过程中，采集到的激光点云数据会包含误差，进而不能准确地描述道路三维环境；需要利用激光点云配准技术将从各个视角下采集到的包含误差的激光点云通过旋转平移，消除误差并统一到同一坐标系下，还原道路的三维环境；
   - 激光点云配准主要分为：粗配准和精配准。
     - 粗配准
       - 适用于在两片激光点云初始位置误差较大的情况下快速取得两片激光点云的转换关系，输出精度不高；
       - 常见的粗配准算法：利用点特征直方图和快速点特征直方图的局部特征描述法、采样一致性初始配准算法(Sample Consensus-Initial Alignment，SAC-IA)及正态分布转换(Normal Distribution Transform，NDT)等；
     - 精配准
       - 适用于在初始位置误差较小的情况下对两片激光点云的坐标进行精准的计算，生成用于配准的旋转矩阵和平移向量，消除不同坐标下的激光点云误差；
       - 常见的精配准算法：迭代最近点(Iterative Closest Point，ICP)算法；
4. 激光点云分割
   - 为了能够将灯杆、标志牌和路沿等交通道路元素从大量杂乱无序的激光点云中识别出来，通常需要根据激光点云表现出的几何形状、特征等方面进行有效分割，提取物体的激光点云，然后利用算法进行分类和识别，并对道路元素添加语义信息；
   - 激光点云分割算法：随机采样一致(Random Sample Consensus，RANSAC)、最小分割、区域增长等常见分割算法，3DMV、PointNet及PointNet++等基于深度学习网络的语义分割与识别算法；