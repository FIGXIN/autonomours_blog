- [自动驾驶基础知识（二）-自动驾驶系统结构和各模块功能 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/497340758)

![img](https://pic1.zhimg.com/80/v2-b8a15aac7bcb743c871fc16022820cac_720w.jpg)

## **1.** **车载系统**

### **1.1传感器**

![img](https://pic2.zhimg.com/80/v2-e98728dbd8696abddf746aca676c9a71_720w.jpg)

**激光雷达**

定义：激光雷达又称光学雷达（LiDAR，Light Detection And Ranging），是一种先进的光学遥感技术。

原理：向物体发射激光，根据接收反射时间间隔确定目标物体实际距离。

作用：激光雷达可以用于测量物体距离和表面形状。其测量精度可达厘米级。主流的多线激光雷达有4线、8线、16线、32线和64线。

优点：具有较高的距离、角度、速度分辨率，抗干扰能力强，点云信息丰富，不易受光照条件影响，可用于全天工作。

缺点：激光雷达会受天气（雨天，雾天）影响，空气中的悬浮物对光速产生影响，从而影响测量结果精度。

![img](https://pic2.zhimg.com/80/v2-ac6b9a370eb1f49c05dcfd647c6db001_720w.png)

**毫米波雷达**

定义：毫米波就是电磁波，其频率通常介于10～300GHz频域之间。

原理：雷达通过发射无线电信号并接收反射信号来测定车辆与物体间的距离，毫米波雷达的测距和测速原理都是基于多普勒效应。

作用：被广泛应用于车载距离探测，如自适应巡航、碰撞预警、盲区探测、自动紧急制动等。

优点：与厘米波导引头相比，毫米波导引头体积小、质量轻、空间分辨率高；与红外、激光、电视等光学导引头相比，毫米波导引头穿透雾、烟、灰尘的能力强；另外，毫米波导引头的抗干扰性能也优于其他微波导引头。毫米波雷达具有全天候，全天时的工作特性，且探测距离远，探测精度高。

缺点：无法检测上过漆的塑料或者木头。对金属表面敏感，一个弯曲的金属表面会被认为是一个很大的金属面，因此路上的小易拉罐可能会被认为是很大的障碍，在大桥和隧道表现不佳。

![img](https://pic3.zhimg.com/80/v2-377605dd306d376205a4ff9dd2073306_720w.jpg)

**超声波雷达**

定义：超声波雷达，发射并接收40kHz的超声波。

原理：发射接收超声波，根据时间差算出障碍物距离。

作用：常见的超声波雷达有两种：第一种是安装在汽车前后保险杠上的倒车雷达，称为超声波驻车辅助传感器（UPA）；第二种是安装在汽车侧面，称为自动泊车辅助传感器（APA）。其测距精度大约是1-3厘米左右。

优点：超声波雷达抗环境干扰能力强,对天气变化不敏感。

缺点：超声波是一种机械波，使得超声波雷达有着根源性的局限性：对温度敏感。超声波散射角大，方向性较差，无法精确描述障碍物位置。

![img](https://pic4.zhimg.com/80/v2-c8145599aedbc100b4c7033df042b65b_720w.jpg)

**摄像头**

定义：一般具有视频摄像/传播和静态图像捕捉等基本功能，它是借由镜头采集图像后，由摄像头内的感光组件电路及控制组件对图像进行处理并转换成电脑所能识别的数字信号，然后借由并行端口或USB连接输入到电脑后由软件再进行图像还原。

原理：单目摄像头主要基于机器学习，对图像数据进行训练和学习。双目摄像头基于视差原理测量驾驶环境，测距精度较高。

作用：车载摄像头分为单目和双目，用于环境感知。

优点：摄像头的感知图像信息覆盖内容丰富，成本较低。

缺点：受光线，天气影响大。

![img](https://pic4.zhimg.com/80/v2-1c8790842ab0d26ecb842526e353db5f_720w.png)

**GNSS**

定义：卫星导航定位系统是星基无线电导航系统，以人造地球卫星作为导航台，为全球海陆空的各类军民载体提供全天候的、高精度的位置、速度和时间信息。目前世界上著名的卫星导航系统有美国的全球定位系统（GPS）、俄罗斯的全球导航卫星系统（GLONASS）、中国的北斗卫星导航系统（BDS）以及欧盟伽利略（Galileo）系统。

原理：GNSS的基本原理是测量出已知位置的卫星到用户接收机之间的距离,综合多颗卫星的数据就可知道接收机的具体位置。

作用：对目标物体进行定位，提供经纬度，速度，方向等信息。

优点：全天候定位，高精度的位置、速度和时间信息。

缺点：多路径效应，数据更新频率低，不能在隧道或者室内定位。

![img](https://pic4.zhimg.com/80/v2-9a7d153c02374b56b67f3e75efe5e56b_720w.jpg)

**IMU**

定义：检测和测量加速度与旋转运动的传感器，包括加速度计和角速度计。

原理：加速度计工作原理是惯性原理，也就是力的平衡，A（加速度）=F（惯性力）/M（质量）。角速度计工作原理是利用了角动量守恒原理。

作用：加速度计测量目标物体的加速度，根据牛二定律可以求出目标物体的俯仰角，加速度二次积分可以计算目标物体的速度，但是这个速度并不准确。角速度计测量目标物体的角速度，角速度积分后可以计算车辆方向。

优点：数据更新频率快，不受外部环境影响。

缺点：有累计误差。

![img](https://pic1.zhimg.com/80/v2-2cb1cde6af4899d15e9d1cf9abe1e994_720w.jpg)

**多传感器融合**

由于各个传感器都有局限性且实现的功能不同，难以互相替代，需要多个传感器之间取长补短，来提升定位的正确率和精确度，于是诞生了多传感器融合。多传感器融合方案将会在定位模块介绍。感知模块也有自己的融合方案。定位的多传感器融合主要是提升定位正确率和精度，感知模块的多传感器融合提升感知识别结果正确率。

![img](https://pic1.zhimg.com/80/v2-0a71a931fd1d428aac753c3c64b2e82c_720w.jpg)

### 1.2高精度地图

定义：高精度地图由含有语义信息的车道模型，道路部件，道路属性等矢量信息，以及用于多传感器定位的特征图层构成。 高精度地图可以看作是一种特殊的传感器。

![img](https://pic2.zhimg.com/80/v2-70b17ad97b4164158fdcc11ce6ac56f1_720w.jpg)

作用：在高精度地图辅助下更容易判定自车位置，可行使区域，目标类型，行驶方向等。

定位，感知及规划都依赖高精度地图。

### **1.3 定位**

计算车辆经纬度，速度，方向，俯仰角等信息，解决“我在哪的问题”。

定位通常使用GNSS，航位推算经过kalman融合的方式计算车辆绝对位置，但是这个位置的精度对于自动驾驶来说还远远不够。可以使用激光雷达点云和高精度地图匹配的算法进一步提升位置精确度，通常使用ICP迭代最近点方法。使用视觉定位算法有两类：基于地标拓扑算法和基于几何的视觉里程算法。

![img](https://pic4.zhimg.com/80/v2-12d75c941f6a7c206bb3090f73875a33_720w.jpg)

### 1.4感知

感知相当于自动驾驶的“眼睛”，解决“周边环境是什么”问题。感知主要包括三个方面，路面、静态物体和动态物体。对于动态物体，不仅要检测到物体的位置，而且要对其轨迹进行跟踪，并根据跟踪结果，预测物体下一步的位置。感知算法大部分采用深度学习卷积神经网络，图像识别技术等。

### 1.5决策

决策相当于自动驾驶的“大脑”，解决“我该做什么”问题。决策有两大类算法，一类是基于规则的学习，一类是基于学习算法。基于规则的决策：根据驾驶规则，经验，知识，交通法规等建立的规则库，根据不同环境信息划分车辆状态，按照规则逻辑确定车辆行为，代表方法是有限状态机法。基于学习的决策：通过环境样本进行自主学习，由数据驱动建立行为规则，利用不同的学习方法和网络结构，根据不同的环境信息直接进行行为匹配，输出决策行为，代表方法是深度学习及决策树等。

### 1.6规划

在一定约束条件下，完成某个区域或范围内时间、空间状态下的路径、速度优化，或称之为车辆在一定时间、空间内的行驶轨迹优化。其中，得到的轨迹包含了时间、车辆姿态、位置等各方面信息，具体而言，即为车辆到达每个位置时的时间、该位置上的行驶速度，以及加速度、曲率、曲率的高阶导数等以及其他与时间相关的运动变量信息。

### 1.7控制

这是一个直接和自动驾驶车辆底层控制接口CAN-BUS对接的模块，其核心任务是消化上层运动规划模块的输出轨迹点，通过一系列结合车身属性和外界物理因素的动力学计算，转换成对车辆控制的油门、刹车，以及方向盘信号，从而尽可能地控制车辆去实际执行这些轨迹点。

### 1.8 V2X

V2X相当于自动驾驶的“耳朵”。车用无线通信技术（Vehicle to Everything, V2X）是将车辆与一切事物相连接的新一代信息通信技术，其中V代表车辆，X代表任何与车交互信息的对象，当前X主要包含车、人、交通路侧基础设施和网络。借助于人、车、路、云平台之间的全方位连接和高效信息交互，V2X目前正从信息服务类应用向交通安全和效率类应用发展，并将逐步向支持实现自动驾驶的协同服务类应用演进。

### **1.9 高性能车载集成计算平台**

自动驾驶系统各模块实时运行过程中，会产生大量的数据。以感知传感器为代表，数据量大，实时性要求高。因此，需要选择强劲性能的计算平台完成实时大规模数据处理任务。计算平台的性能对自动驾驶的安全性、可靠性、实时性非常重要。目前主流的计算平台包括基于GPU、DSP、FPGA、ASIC等方案的计算平台。

### **1.10 智能车载操作系统**

运营服务，内容服务，人机交互，为乘客提供个性化服务。车载操作系统如下：

![img](https://pic2.zhimg.com/80/v2-7e63fa6c597f9b94c2563bd259bb1079_720w.jpg)

### **1.11 车载总线控制系统**

汽车总线是指汽车内部导线采用总线控制的一种技术，通常称为汽车总线或汽车总线技术。汽车总线包括LIN总线，CAN总线，CANFD总线，MOST总线。线控技术主要指车辆底盘的线控执行，包括线控制动、转向和油门。

![img](https://pic4.zhimg.com/80/v2-95752be0bfc08d1b8d17e9d0b8fcc143_720w.jpg)

## 2.云端系统

### 2.1高精度图生成

地图采用众包形式，把每辆车采集的激光点云或者视觉数据上传到云端，完成地图更新

### 2.2深度学习模型训练

自动驾驶使用的深度学习模型，对于没有出现过的情况无法处理，需要持续通过数据进行模型训练，来提升算法处理能力。因为训练数据量大，所以在云端完成。

### 2.3模拟仿真测试

开发的新算法会先在云端的模拟器上进行测试在部署到车上。

### 2.4数据存储

路测中采集的数据量很大，需要上传到云端存储。