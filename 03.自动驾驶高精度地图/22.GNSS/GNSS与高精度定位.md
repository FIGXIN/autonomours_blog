- [自动驾驶系统入门（1）GNSS与高精度定位 - 1 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/430596471)

## 1. 定位技术的划分

定位最早的需求来自航海，其实导航的英文navigation，词源来自拉丁文navis（船）+agare（引导），表示从A地到B地航行中对船只的操作。通过下图的航海示意，可以把定位技术分为三类。

- 与其他物体的相对定位：相对定位的核心是对目标的测量。
- 卫星定位（绝对定位）：由天体定位演化而来，核心是已知运动规律的星体+准确的时钟+对星体的有效观测。
- 惯性导航：核心准确的时间和对运动的有效测量。

![img](https://pic4.zhimg.com/80/v2-1cfef12870a02277fdb3e96547358b03_720w.jpg)

## 2. GNSS系统和信号说明

目前全球范围共有GPS、CAMPASS/BEIDOU、GLONASS、Galileo，四大全球GNSS系统，在局部范围有QZSS（日本）IRNSS（印度）等区域GNSS系统。国内主要是使用GPS，北斗以及伽利略系统。

任一GNSS系统可以划分由卫星、地面观测站、用户接收机三部分组成。卫星上有精密原子钟，可以让所有卫星时间同步精度在纳秒级。地面观测站是对卫星位置，运动状态进行长时间精密观测，用来修正卫星的运动轨道信息。这也是为什么GLONASS应用比较少的原因之一，因为国际ZZ因素，俄罗斯的观测站在其国外比较少，这就导致在俄罗斯之外的地方定位精度会差一些。而用户接收机我们在车端可以直接控制和操作的设备了。

### **GNSS信号是实现定位和授时的基础**

以GPS为例，系统发射三类信号

- 载波信号 （Carrier Phase）, 基频 0=10.23MHz

- - （）L1（0∗154=1575.42MHz±1.023MHz）
  - （）L2（0∗120=1227.60MHz±1.023MHz）
  - （）L5（0∗115=1176.45MHz±1.023MHz）

- 测距码 （Ranging Code）

- - C/A 码（Coarse/Acquisition Code）1.023MHz on L1
  - P码 （Precise Code）10.23Mhz on L1&L2

- 导航电文（Navigation Message）50Hz编码

![img](https://pic3.zhimg.com/80/v2-153e307c9dfad4b8b3aad5803c60b292_720w.jpg)

**载波信号的作用**

- 搭载调制信号
- 测距（用于载波定位技术，比如RTK）
- 测定多普勒频移

常说的L1，L2，L5波段，就是指载波信号的频位于哪个波段上。

**测距码是什么？**

- 伪随机噪声码（Pseudo Random Noise, PRN），周期性，良好的自相关性，正交性；

- 由多级反馈位移寄存器产生

- - C/A码：2个10级反馈位移寄存器生成
  - 码长：2^10-1=1023
  - 码元宽度： t=1/1.023MHz=0.97752
  - 距离： t×=293.05
  - 周期：1
  - 测距精度低：距离长，测距误差大。

- 测距原理

- - PRN伪距= ∗Δ ，对比接收到测距码的时间差，乘以光速得到接收机到卫星的距离。

![img](https://pic2.zhimg.com/80/v2-fb01ce5fa2e99ef1e4e9ca961b689771_720w.jpg)

**导航电文有什么？**

- 含有卫星钟改正参数，周数、电离层改正参数、卫星状态等
- 星历：当前卫星的轨道数据，1**参考时间，6**轨道参数，9*摄动力参数
- 历书：所有卫星的轨道数据（有效期更长、精度更低）
- 需要注意的是无A-GPS辅助时，冷启动需要接受完整1帧的导航电文才能够定位。**也就说冷启动的时间至少大于30s。**

![img](https://pic1.zhimg.com/80/v2-cd6ea9b15db05f1969597600f3a3a268_720w.jpg)

### 信号调制解调相关问题

**多卫星信号问题：**

- PRN码的正交性和自相关性，不同卫星的信号可以通过PRN码来区分，码分多址（Code Division Multiple Access, CDMA）
- GLONASS采用频分多址（Frequency Division Multiple Access, FDMA）
- 接收机有多个通道，每个通道对指定的PRN码和载波频率进行处理。

**信号解调处理：**

卫星信号解调的流程如下

![img](https://pic2.zhimg.com/80/v2-7ee44f645909b878f78895bd74a68659_720w.jpg)

写到这里发现篇幅有点长了，那GNSS定位就拆成三篇来讲吧。