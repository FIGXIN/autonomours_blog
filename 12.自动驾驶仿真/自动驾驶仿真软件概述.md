- [自动驾驶仿真软件概述 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/347730573)

## **1. 自动驾驶仿真背景**

随着自动驾驶技术的不断发展，自动驾驶仿真技术越来越受到各大传统主机厂与自动驾驶科技公司的关注与青睐，也慢慢变成自动驾驶研发与测试的基础关键技术。究其原因是因为仿真技术通过把大量自动驾驶开发和测试的成本转化为GPU的物料成本和工程师的知识经验成本，进而大大缩短自动驾驶技术落地的时间与成本。（注：根据美国兰德公司的研究，自动驾驶算法想要达到人类驾驶员水平至少需要累计177 亿公里的驾驶数据来完善算法。如果配置一支100 辆自动驾驶测试车的车队，每天24小时不停歇路测，平均时速25英里（40公里）每小时来计算，需要500 多年的时间才能完成目标里程，期间所耗费的时间和成本是难以承受的。）

正因如此自动驾驶仿真目前已经被行业广泛接受。例如，截止2020年5月美国自动驾驶领军企业Waymo积累模拟行驶里程已超过150 亿英里，旗下仿真平台Carcraft每天可在虚拟道路上行驶测试约2000万英里。相比之下Waymo的实路测试雷击里程仅为2000万英里。除Waymo外，传统主机厂如奥迪，宝马等以及自动驾驶解决方案商Cruise、小马智行等也在进行大量的仿真测试，以完善自己的自动驾驶系统，仿真测试已经成为自动驾驶商用最重要的测试。

![img](https://pic2.zhimg.com/80/v2-a9327dfb2992734e74188a2aaacc03d9_720w.jpg)Simulation tool from Waymo

如此关键的自动驾驶仿真体系有三个重要的成部分：仿真场景，仿真系统以及仿真评价标准。今天将要介绍的仿真软件是仿真系统的重要组成部分。

## **2. 自动驾驶仿真软件的发展**

自动驾驶仿真软件脱胎于车辆动力学仿真软件。早期汽车行业的仿真软件主要关注于车辆本身的动力学仿真，对车辆开发过程中整车的动力系统、底盘系统等进行仿真调优，如Carmaker和Carsim。

![img](https://pic4.zhimg.com/80/v2-ec8c8f6ff4c6bad372f4912e6cee8437_720w.jpg)Some parameters for Vehicle model

随着自动驾驶技术的日益发展，测试场景被人们逐步重视，早期专精于车辆动力学的仿真软件也开始支持简单的交通场景建模，同时市面上也出现了一批擅长于场景仿真的自动驾驶仿真软件，它们可编辑静态交通环境与动态交通参与者，自带并支持外接传感器模型，如VTD和Prescan。这一阶段利用场景仿真软件配合动力学仿真软件进行联合仿真可助力自动驾驶规控模块的开发与测试验证。

![img](https://pic1.zhimg.com/80/v2-bcd38d4b93057d07ffea9ef2ac89f044_720w.jpg)Simulated scenario with sensor model in VTD

如今面向高级别自动驾驶功能，仿真软件已具备相对复杂的系统架构，市场上出现了一批支持高精地图，虚实混合，以及使用游戏引擎进行高真实感虚拟环境重建的仿真平台。新一代仿真平台在回放真实测试场景之外，可以提供更接近真实动态交通的模拟环境，以及多样的驾驶事件或场景。同时，部分仿真平台可使用云服务来进行大规模高并发的仿真测试，能达到百万级车辆同时进行仿真测试的效果。伴随着仿真技术的不断进步，其在自动驾驶功能开发过程中的重要性和测试中与路测的互补优势更加凸显。

![img](https://pic3.zhimg.com/80/v2-ee3ceaa663eb7822f5f5199340609c86_720w.jpg)Scenario in TAD Sim

## **3. 自动驾驶仿真软件的组成**

一个基础的自动驾驶仿真软件主要包括以下几个部分：

- 静态场景构建：对道路及其周边基础设施等静态场景的编辑能力，以及根据真实路网或高精地图搭建或生成大规模虚拟场景的道路环境的能力。支持主流静态场景仿真文件的导入与应用。
- 动态场景仿真：有能力模拟各种交通参与者的动作以及生成与真实交通场景相似的交通流，亦或可以根据真实数据复现当时场景。支持主流动态场景仿真文件的导入与应用。
- 传感器模型：自带或支持导入摄像头，激光雷达，毫米波雷达，GPS，超声波雷达，IMU 等自动驾驶传感器模型，支持传感器模型的多种输出方式（row data, Ground truth）。
- 车辆动力学模型：自带或支持可编辑的车辆动力学模型。
- 对接ADAS 和自动驾驶系统的丰富的接口。

![img](https://pic2.zhimg.com/80/v2-e96705aa5d4485d868bce4225bc5239d_720w.jpg)Some parts for a Simulation tool

## **4. 几种自动驾驶仿真软件简介**

目前市面上各类自动驾驶仿真软件/平台都包含上述基本功能，但又各有特点。在集中精力学习应用某一仿真软件的同时，也应该开拓眼界横向比较。下面主要介绍一下不同自动驾驶软件的独特之处。

- VTD

VTD (Virtual Test Drive）是德国VIRES 公司开发的一套用于驾驶辅助系统，主动安全和自动驾驶的完整模块化仿真工具。其采用OpenDRIVE、OpenCRG和OpenSCENARIO标准，支持OpenDRIVE格式高精地图的导入，并基于此完成虚拟世界和环境的重建，以及动静场景的模拟。VTD具有针对中国特色场景的可拓展的场景元素库，包括中国标准的道路交通标识与设施、植物、城镇建筑、乡村建筑、地标建筑、导流线、高速路出入口、交通灯、立交桥、隧道、桥梁等。

- Prescan

Prescan是由Tass International 研发的一款ADAS 仿真软件。包含多种基于雷达、激光雷达、摄像头、GPS、V2V 和V2I通讯技术的智能驾驶应用。其支持第三方地图OSM / OpenDRIVE高精地图导入；支持多种类型传感器的模型建立与设置，包括摄像头、鱼眼（fisheye）、单目、双目摄像头、毫米波雷达、激光雷达、超声波雷达、V2X 通讯传感器、车道线传感器、目标物体识别传感器等。

- Carmaker

Carmaker是IPG公司开发的用于测试乘用车和轻型车辆的仿真软件，其可以在虚拟世界中建模动静测试场景，并集成了车辆动力学模型、道路模型、驾驶人模型和交通流模型；Carmaker将车辆比作多体-非线性系统，并根据车辆子系统进行了清晰的设置（例如转向系统的Pfeffer模型、制动系统模型、发动机模型）可构建高精度的车辆动力学模型；交通流模型可定义几乎无限数量的交通参与者，每个参与者都可添加动力学模型，并可根据事件对参与者进行精细控制。

- CarSim

CarSim是Mechanical Simulation 公司开发的强大的整车动力学仿真软件，主要从整车角度进行仿真，它内建了相当数量的车辆数学模型，并且这些模型都有丰富的经验参数，用户可以快速使用，免去了繁杂的建模和调参的过程。CarSim 也有ADAS相关功能的支持，可以构建动静叫交通场景。同时提供了一个Unreal引擎插件，可以和Unreal 引擎进行联合仿真。

- Carla

CARLA 是由西班牙巴塞罗那自治大学计算机视觉中心指导开发的开源模拟器，用于自动驾驶系统的开发、训练和验证。Carla依托虚幻引擎进行开发，使用服务器和多客户端的架构。CARLA 提供了简单的车辆和行人的自动行为模拟，也同时提供了一整套的Python 接口，可以对场景中的车辆，信号灯等进行控制，用来方便的和自动驾驶系统进行联合仿真，完成决策系统和端到端的强化学习训练。

- SUMO

SUMO 是由德国国家宇航中心开发的开源微观连续交通流仿真软件。它附带了一个交通仿真路网编辑器，也可以通过单独的转化程序转换来自Vissim，OpenStreetMap，OpenDrive 的路网。可以通过编辑路由文件的方式指定每辆车辆的路由，或者使用参数随机生成。SUMO 本身是做为交通领域流量，时序，预测等仿真来使用的，最近逐渐开始应用在无人驾驶的仿真上，为无人驾驶算法提供随机的复杂动态环境。

- 51Sim-one

51Sim-One是51WORLD自主研发的一款集多传感器仿真、交通流与智能体仿真、感知与决策仿真、自动驾驶行为训练等一体化的自动驾驶仿真与测试平台。其通过orldEditor快速地从无到有创建基于OpenDRIVE的路网，或者通过点云数据和地图影像等真实数据还原路网信息。

- TAD Sim

TAD Sim是腾讯研发的一款高真实度的自动驾驶仿真平台。其以内置厘米级高精度地图，凭借游戏引擎、虚拟现实、云游戏技术，集成工业级的车辆动力学模型和渲染引擎，辅以三维重建技术和虚实一体交通流，构建了包含动态和静态要素真值数字孪生系统，可实现自动驾驶感知、决策、控制等全部模块的闭环仿真验证。

- AADS

AADS (Augmented autonomous driving simulation using data-driven algorithms) 是百度研发的增强现实的自动驾驶仿真系统。AADS 系统包含一套全新开发的基于数据驱动的交通流仿真框架和一套全新的基于图像渲染的场景图片合成框架。在获得真实感的车流移动和场景图像之后，系统利用增强现实技术可直接、全自动地创建逼真的仿真图像，消除了现有仿真系统中游戏引擎渲染图片与真实图片之间的差距。

## **Reference:**

*Waymo Safety Report*

*自动驾驶仿真技术研究现状*

*2020中国自动驾驶仿真蓝皮书*

*2019中国自动驾驶仿真技术研究报告*

*自动驾驶功能仿真测试标准化需求研究报告*

*自动驾驶仿真超全综述：从仿真场景、系统到评价*