- [导航电子地图数据格式概论_地图数据模型师的博客-CSDN博客_导航地图格式](https://blog.csdn.net/keykeywu/article/details/10009013?spm=1001.2101.3001.6650.6&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-6-10009013-blog-123061883.pc_relevant_multi_platform_whitelistv1_exp2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-6-10009013-blog-123061883.pc_relevant_multi_platform_whitelistv1_exp2&utm_relevant_index=13)

# 导航电子地图数据格式简介

## 简述

​    电子地图数据格式，有交换格式与物理格式之分。

​    所谓交换格式，常常是ACLL码的，数据[冗余](https://so.csdn.net/so/search?q=冗余&spm=1001.2101.3001.7020)量大，其目的是为了充分的记录信息，传递给使用方。简言之，交换格式的文件，常常是给人看的，让人很容易能看明白它。例如，MapInfo的MIF格式，就是典型的交换格式。

​    而物理格式，常常是[二进制](https://so.csdn.net/so/search?q=二进制&spm=1001.2101.3001.7020)的，紧凑高效，彼此之间的关系常常通过地址来偏移，其目的是为了给计算机使用的，追求的目标是小、快。例如，MapInfo的MAP格式，就是典型的物理格式。

　   导航电子地图格式分为母库格式、交换格式和存储格式三个层次，格式对导航功能的实现非常重要。

　　母库格式：是导航数据编辑、存储直接进行的格式，主要是方便于编辑和保存，如TAB格式。

　　交换格式：是可以转换到各个应用导航数据的格式，一般都是公开格式，以方便进行转换应用，如GDF格式

　　存储格式：本意是指数据在计算机里存储的格式，但是存储格式在导航一般是指导航应用格式，如KIWI格式。

## MIF格式

MIF文件是MapInfo通用数据交换格式，这种格式是ASCⅡ码，可以编辑，容易生成，且可以工作在MapInfo支持的所有平台上。它将MapInfo数据保存在两个文件中：图形数据保存在.MIF文件中，而文本（属性）数据保存在.MID文件中。其中，.MIF文件有两个区域：文件头区域和数据节，文件头中保存了如何创建MapInfo表的信息，数据节中则是所有图形对象的定义。故MIF应是保存图形的一种文件格式

MIF是Mapinfo用来向外交换数据的一种中间交换文件。当用户在Mapinfo中将一张Mapinfo地图表以MIF格式转出来MIF文件中后，Mapinfo会同时在用户指定的保存目录下生成两个文件（*.mif，*.mid）。其中*.mif文件保存了该Mapinfo表的表结构及表中所有空间对象的空间信息（如：每个点对象的符号样式、点位坐标；每个线对象的线样式、节点数据、节点坐标；区域对象的填充模式、每个区域包含的子区域个数及每个区域的节点数、节点数等）。而*.mid文件则按记录顺序保存了每个空间对象的所有属性信息。这两个文件都为文本性质的文件，用户可以通过相应的文件读写方法实现对文件内容的读写。MapInfo数据在两个文件中——图形保存在.MIF文件中而文本数据包含在.MID文件中。文本数据是分界数据，每行一个记录以及行间的回车，或者回车加换行，或者换行。 MIF文件有两个区域—文件头区域和数据节。有关如何创建MapInfo表的信息保存在文件头中；图形对象定义保存在数据节中。

## SHP格式

Shapefiles是ESRI提供的一种矢量数据格式，它没有拓扑信息，一个Shape files由一组文件组成，其中必要的基本文件包括坐标文件（.shp）、索引文件（.shx）和属性文件（.dbf）三个文件。

坐标文件(.shp)用于记录空间坐标信息。它由头文件和实体信息两部分构成。

dBASE文件包括要素的属性或者让其他表可以连接的属性关键值。它的格式是标准的数据库文件格式。有3个要求：

文件名必须与主文件和索引文件的名字相同，文件名后缀必须是.dbf。

表中必须每一个要素都有一条记录。

记录的顺序必须和主文件中的要素记录的顺序相同。

dBASE头中的年份值必须是1900年之后的。

索引文件（.shx）主要包含坐标文件的索引信息，文件中每个记录包含对应的坐标文件记录距离坐标文件的文件头的偏移量。通过索引文件可以很方便地在坐标文件中定位到指定目标的坐标信息。

索引文件也是由头文件和实体信息两部分构成，其中文件头部分是一个长度固定(100 bytes)的记录段，其内容与坐标文件的文件头基本一致。它的实体信息以记录为基本单位，每一条记录包括偏移量（offset）和记录段长度（Content Length）两个记录项，它们的位序都是big，两个记录项都是int型。

## TAB格式

Tab是Mapinfo唯一的数据存储格式，所有基于该软件上的应用系统都要以这种格式为依托。Mapinfo按图层组织空间数据，一个图层可包括不同几何类型的图形对象，但只能对应一个属性表结构。Mapinfo不支持拓扑结构，目标对象相互之间是独立的，不存在拓扑关系。Mapinfo的Tab数据采用双数据库存储模式，属性数据存储在属性表结构文件(.tab)与属性数据文件(.dat)中，空间数据保存在空间数据文件(.map)中，两者通过交叉索引文件(.id)联系

1、属性数据的表结构文件，后缀为.TAB。该文件定义了地图属性数据的表结构，包括字段数、字段名称、字段类型、字段宽度、索引字段及相应图层的一些关键空间信息描述。.TAB文件实际上是一个文本文件，可以在写字板中打开观察其内容。 

2、属性数据文件，后缀为.DAT。该文件存放了地图的属性数据。.DAT文件是二进制文件，它的格式与dBase IV的文件格式一致。 

3、空间数据文件，后缀为.MAP。该文件是二进制文件，存放了图形对象的数据，包括空间对象的几何类型、坐标信息和颜色信息等。 

4、交叉索引文件，后缀为.ID。该文件是二进制文件，用于连接属性数据和图形数据，记录了地图中每一个空间对象在空间数据文件（.MAP）中的位置指针。文件中每四个字节构成一个指针。指针排列的顺序与属性数据文件（.DAT）中属性数据记录存放的顺序一致。交叉索引文件实际上是一个空间对象的定位表。 

5、索引文件，后缀为.IND。MapInfo表中有时也包括该文件，用于对某些字段建立索引。

.TAB文件和.DAT文件是MapInfo表中必须的两个文件，一个MapInfo表至少应该包括一个.TAB文件和一个.DAT文件。.MAP和.ID文件不是必须有的，但是如果有了.MAP文件，那么.ID文件也必须存在。

## GDF格式

地理数据文件（Geographical Data File, GDF） 是一种保存地理数据的文件格式，用于描述和传输道路网络和道路相关数据。与传统的GIS数据格式相比, GDF为获取数据及标准特征、属性和关系的扩展分类提供更多详细的规则。

GDF最初用于汽车导航系统中，但它对于其它运输和交通应用也十分有效，如车队管理、 调度管理、道路交通分析、 交通管理和车辆自动定位。GDF用ASCII编码，并以单一文件形式保存。每个GDF都被分为多个分区，分区包括信息单元与载体单元。信息单元包含载体单元中具体数据的信息，载体单元由Volume和Album组成，Volume是基本的数据组织单位，被合成在Album。

由于GDF格式是纯文本格式，所以很少直接被大型地理相关应用程序所直接应用，通常需要先转换成更有效的文件格式。

## 图商交换格式

​    鉴于图商的交换格式是自主知识产权的，这里不一一详细介绍，仅仅列出比较主流的几家厂商的数据产品：

四维图新：NIMIF格式

高德：AXF格式

瑞图：RTM格式

## RDF格式

关系数据格式RDF（Relational Data Format）。

Navteq公司提供各种格式的地图数据和地图的内容，以满足不同的开发人员的要求。关系数据格式（RDF）是对NAVTEQ的数据格式之一。最初由NAVTEQ的定义在2004年，RDF的目的是支持多种应用领域包括汽车导航系统，公路养护系统，公路运输信息，和高级公路运输的信息。

## KIWI格式

KIWI格式是由KIWI-W Consortium制定的标准，它是专门针对汽车导航的电子数据格式，旨在提供一种通用的电子地图数据的存储格式，以满足嵌入式应用快速精确和高效的要求。该格式是公开的，任何人都可使用。

KIWI-WConsortium成立于2001年7月，致力于制定汽车导航用电子地图物理存储格式（PSF）的行业标准。KIWI格式目前在ISO TC204 / WG3中是PSF标准的有力竞选者。

PSF的主要载体是CD、DVD和HDD，与KIWI类似的还有许多不同格式，如NRNE等，都是不同公司的自有格式。KIWI格式的最新版本是1.22，可从KIWI-W Consortium的官方网站上下载。

KIWI的特点是把用于显示的地图数据和用于导航的数据紧密结合起来，并将数据按照分块方式以四叉树的数据结构保存于物理介质中，不同用途的信息存在不同的块中，从而使数据适合于实时高效应用的要求，其中很多信息以Bit为单位存储，并以Offset量提取其索引。这也就是KIWI在技术上的目标，即加速数据的引用和压缩数据的量。

KIWI最重要的特点是其将数据物理存储和数据逻辑结构相结合的优越的机制。KIWI按分层结构来组织地图，并且这种层的逻辑结构与其物理存储也是相联系的。它可以做到在不同的Level层之间做快速的数据引用。因此，针对不同的应用目的或不同级别的用户，可以使用或提供不同抽象层次的数据，例如，对于导航应用提供精度相对较高的立交桥数据，而对于一般应用只需把立交桥表示为若干道路结点就行了。而这两份不同抽象等级的数据完全可以由同一份地图数据按要求提取生成。与此同时，在采用了分层次的数据参考后，会使查询、路径分析、连通性分析等各种算法更加快速。

## SDAL格式

NavTech公司致力于生产大比例尺的道路网商用数据，包括详细的道路、道路附属物、交通信息等，这些数据主要用于车辆导航应用。NavTech公司自有的商用地理数据库的数据格式是SDAL（Shared Data Access Library），通过SDAL编译器，可以把一般的电子地图数据转换为SDAL格式，进而可以由SDAL程序接口调用SDAL格式数据用于各种车辆导航应用。

SDAL格式本身提供了对地图快速查询和显示的优化，可提高路径分析和计算速度，并可存储高质量的语音数据为用户提供语音提示。SDAL格式的标准也是公开的。

NavTech还为导航应用提供了一套NAVTOOLS工具，可以较方便地进行基于SDAL格式数据的导航应用开发。NAVTOOLS提供了地图显示、车辆定位、路径计算等多种功能。当然，也可直接由SDAL开发导航应用。

汽车导航是集GIS、GPS、通信、嵌入式软硬件技术为一体的高度综合性的高技术产品。作为一种高技术含量的产品，日本及欧美国家经历了10多年的发展过程，才取得了今天的成就。在这一过程中，有很多成功的经验，也有不少失败的教训。正是在这些经验和教训的基础上，才有了今天的导航电子地图标准化研究成果。

## NDS格式

2005年，德国宝马、大众等车厂发起，联合导航电子地图数据提供商和导航系统软件提供商成立了NDS（PSF Standard Initiative）组织，提出了开发一种安全、可靠、易用、便于更新的导航电子地图存储标准。其目标是：

支持增量更新

适应多种发布方式和存储介质

能够作为一种世界通用标准

将地图和导航应用分开

高兼容性和互操作性

较数据压缩和高性能

易于扩展

可以有效防止非法数据拷贝

NDS组织工作的最终成果是NDS（NavigationData Standard），它是一种基于嵌入式数据库的导航电子地图数据存储标准。

NDS采用SQLite嵌入式数据库进行地图数据的存储。其中，地图显示和道路规划等信息记录在BLOB变长字段中，POI直接采用数据表存储。采用基于嵌入式数据库存储的方式，可以充分利用数据库的检索特性，提高效率。同时，对地图数据进行更新时，插入、删除等涉及的操作系统底层的字节级的操作由DBMS自行维护，这样，地图数据的更新将是以地图要素为单位，仅仅需要对逻辑层的关系进行维护，而非像传统的导航电子地图物理存储格式一样，需要对组成地图要素每一个字节、地址偏移等进行处理，花费更多的精力在物理层的操作上。

NDS在嵌入式数据库中采用了分层分块的组织方式，它根据地图数据的内容，分为地图显示、路径规划、名称、POI、交通信息、语音表达等六个内容层，分别存储在嵌入式数据库的不同数据表中。对于某一内容层的数据，划分为多个比例尺的数据表达层；对以某一内容层指定比例尺的数据，进行分块(Tile)表达和存储。对于某内容层指定比例尺的某块(Tile)的数据，在NDS中，变现为数据库表中的一条记录，即对应在数据表中的一行。数据间的关联，不再是通过传统的地址偏移来链接，而是通过数据库ID来互相引用的。NDS数据模型充分结合了数据库的特性，当需要对地图数据进行更新时，NDS数据进行逐块(Tile)的更新，即替换数据表中块(Tile)对应的一行。这种更新方式，充分利用了DBMS的特性，简化了关系的维护。