- [自动驾驶的高精度路网地图数据模型研究 (hfyili.cn)](https://www.hfyili.cn/a/176667)
- [自动驾驶的高精度路网地图数据模型研究_腾讯新闻 (qq.com)](https://new.qq.com/omn/20220510/20220510A032D800.html)

> **作者简介：**刘静华（1978—），女，浙江杭州人，硕士，主要研究方向为电子地图及地理信息应用。

**摘要：**针对目前的导航电子地图无法有效保障自动驾驶的安全行驶问题，提出构建高精度路网地图数据模型辅助自动驾驶车辆及早预先感知周围环境、规划行驶路线、控制指令生成等来更有效地保障自动驾驶的安全性。在车载激光雷达车采集数据的基础上，通过利用矢量化数据建立数据模型、组件集合、拓扑构建、交互式关联关系等实现数据之间的关联性和耦合，以满足自动驾驶的应用。试验表明，使用本模型制作的高精度路网地图，具有拓扑的合理性、数据模型可塑、关联关系交互性和组件集合拓展等优势，能够有效提升车辆超视距感知行驶环境的能力，提高控制指令的生成效率和正确性，确保自动驾驶的安全性和可靠性。

## **0 引言**

随着自动驾驶领域和智能化交通的进一步发展，导航电子地图从精度、要素、组织等均无法为自动驾驶提供一个智能的、安全的行驶环境及相应需求信息[1]。国外Mobileye与大众、宝马和日产签署协议实现数据共享，Here与奔驰、宝马等形成高精度地图联盟[2]；国内发布了《智能汽车创新发展战略》、《交通强国建设纲要》，提出“建设覆盖全国的车用基础地图系统和加强智能网联汽车研发”。国内外一系列的方案和政策从顶层战略、示范应用、优化架构等方面体现了自动驾驶的发展趋势，作为智能网联汽车基础设施的高精度路网地图[3]，其优质的数据结构、模型构建、拓扑构建等能有效地让自动驾驶无人车了解行车过程中的规则、交通状况和周边环境。现阶段国外的高精地图主要有Here、TomTom、Waymo（原Google地图）等老牌图商，在北美以及欧洲市场，Here地图80%为有导航功能的轿车提供地图数据[4]。考虑到高精度地图广阔的发展前景，除了原本地理信息行业之外，国内很多互联网行业的企业通过收购或者与图商合作的形式进入高精度地图研发领域，百度和TomTom联合、腾讯收购四维图新、阿里巴巴收购高德地图等，也有很多新创公司加入这个领域如宽凳科技、极奥科技等[5]。然而高精度路网地图数据模型未形成有效的规定，本文面向自动驾驶的预先感知周围环境、规划行驶路线、控制指令[6-7]等应用出发，对高精度路网地图数据模型进行研究。

结合《公路工程技术标准》、《道路交通标志和标线》、《城市道路交通设施设计规范》等国内道路规范，通过外业实采、内业矢量化、建立道路、道路设施、交通设施之间空间与属性之间的拓扑、交互式关系和模型组件，生成符合国内环境满足自动驾驶应用的高精度路网地图。高精度路网地图数据模型构建主要包含车辆行驶中所需的详细交通静态信息、道路拓扑信息和精细交通约束信息[8]。原理基于车辆行驶并不是在未知的环境，而是在具有一定规则构成的已知空间环境下，高精度路网地图主要是预先获取车辆行驶道路中所有相关交通要素的空间位置、要素形态、道路规则、行驶信息等，通过要素数字化、拓扑构建等信息从而建立数字道路模型[9-12]，在行驶过程中融入车辆的实时位置、车辆行驶参数、动态信息等[13]信息，生成车辆行驶管道和控制指令。

## **1 高精度路网地图架构设计**

辅助自动驾驶的高精度路网地图主要由道路基本设施、道路辅助设施、交通设施3类要素组成，道路基本设施主要包含道路中心线、边线、桥梁、隧道等供车辆通行的设施；道路附属设施包含人行线、红绿灯、线圈、绿化带等交通安全和管理的设施；交通标识设施包含车道标识、交通引导、警告标志等应用于车辆通行交通标识。将以上3类要素的形态通过点、线、面、体构建，形成真实的虚拟静态路况，包括起伏、转向等，采用属性挂接相应要素信息，通过属性表进行存储，建立数据仓库，并通过符号匹配形成视图显示库，在矢量数据的基础上利用智能算法、数据工具分析等形成车辆路径规划、环境预判、决策分析等指令信息。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521528243143015.png)

为了便于自动驾驶分析和应用，采用分层、分类等对高精度路网地图数据进行信息综合。信息综合需考虑自动驾驶在环境解读中对要素的需求，经过多次在试验场地中试验和自动驾驶路段的行驶测试后。根据自动驾驶应用将高精度路网地图要素按最小、最稳定为单元依据地理实体特性进行分类编码，通过编码建立现实世界和虚拟信息世界的链接，编码采用20位定长的十进制数字码，县级及以上行政区划码采用GB/T2260的编码，县级以下行政区划采用GB/T10114的编码规则，以空间位置关系、应用的密切度、要素归属性将要素分为大、中、小3类，并建立分类表和分类码，交通设施特征代码采用GB/T 21381-2008，图形码以两位的十进制数字码表示：点01、线02、面03、体04。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521566106653786.png)

## **2 数据模型构建**

### **2.1 模型构成**

车辆行驶空间由多重空间组成，如车道区域、路口区域和其他特色区域组成，车辆行驶过程中车道线、人行线、停止线等对车辆行驶具有约束性，因此探索以最小单元的交通要素为模型颗粒，对路网要素进行空间化表现，利用空间数据库的特征，以点、线、面、体的几何形态建立所有要素之间关联、耦合、拓扑，入库的数据包括几何信息及属性信息。为了减少计算量，提高定位效率，将车辆行驶过程中的整个路行驶空间分割为一些子区域，如车道区、路口区、特定区等，以区域为单元，建立车辆可行驶通道。将行驶通道用形式化表示为式（1）。

V=（Li，Wi，Pi）     （1）

式中：V={V1,V2,…,Vi,…}是行驶通道的集合，L={L1,L2,…,Li,…}是行驶车道的集合，W={W1,W2,…,Wi,…}为行驶经过路口的集合，P={P1,P2,…,Pi,…}为行驶过程中遇到的特定区域的集合，如收费站、检查站、服务区等。

车道区包含车道中心线、道路中心线、道路边线、车道标线、交通标志牌、交通辅助驾驶设备。形式化表达为式（2）。

L =（LCi，Ri，Si，TLi，TPi，Ai）   （2）

式中：LC={LC1,LC2,…,LCi,…}为车道中心线的集合，R={R1,R2,…,Ri,…}为道路中心线集合，S={S1,S2,…,Si,…}为道路边线的集合，TL={TL1,TL2,…,TLi,…}为车道标线的集合，TP={TP1,TP2,…,TPi,…}为交通标志牌的集合，A={A1,A2,…,Ai,…}为交通辅助驾驶设备的集合。

车道中心线包含标识符、属性、坐标等信息，形式化表示为式（3）。

LC=（LBi，LSi，Ci）     （3）

式中：LB={LB1,LB2,…,LBi,…}为车道中心线标识符，LS={LS1,LS2,…,LSi,…}为车道属性集，Ci分别为车道每个节点的几何属性集合。

在行驶过程中，将通道根据行驶区域的不同划分为可行使通道和不可行使通道，行驶形式化表示为式（4）。

T=（Vi，Wi）          （4）

Vi={V1,V2,…,Vi,…}为可行驶通道的集合，Wi ={W1,W2,…,Wi,…}为不可行使通道的集合，在可行使通道区域内，根据车道区内各要素及属性信息，建立车辆通行的拓扑关系，形成道路驾驶的路径规划。

### **2.2 拓扑构建**

拓扑构建是模型构建的核心工作，因为车辆在行驶过程中核心的问题是如何选择下一个区间，基于车道级别的拓扑实质就是含有权重的有向图[14-17]，利用车道的空间位置集合和空间关系中邻接、相交、相离等为关联建立车道拓扑，针对各车道的交通标记确定车辆行驶的方向和通行状态，如左转、右转、直行、转弯等，判断相邻车道的车道隔离线的类型，如单黄线、白虚线、白实线、双黄线等，确定车辆是否可变道，车道拓扑的建立需考虑链接数据、通行规则、通行编码等信息。

根据交通规则和车道的空间位置，遇到属性、车道数等发生变化时，对车道区进行划分，依据每一段的交通属性和空间位置，划分13个车道区域（图3）。根据交通规则，对车道进行可行驶车道区和不可行使车道区的划分，可行使车道区通过分段连接相邻区域，自动建立车道区域标识码，实现车辆从起始点开始一个区域到另一个区域的过渡，建立车辆行驶的空间管道，确定汽车行驶路线。所有通过区域均通过标识码和空间位置自动连接，构建多条从起点到终点的通行管道，增加了拓扑构建的自由度。

拓扑构建以车道区为单位，保持可通行车道的横向通行，如图3（b）所示，虽然有两个车道，但是由交通规则和空间位置等信息可以判断，此处可通行状态参数一致，可自由变道，因此归为一个车道区间。图3（a）的车道场景图可以提取为图3（b）的拓扑图，拓扑的距离因子根据实际道路的长度进行路径规划，结合车辆传感器传回的数据，实现自动行驶。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521566299224505.png)

### **2.3 关联构建**

对象之间的关联关系是空间信息联动的纽带，也是数据分析、统计的基础，通过对象之间广义关系的抽象表达[18-19]，进而模拟客观现实世界的联动，对象属性关联关系的构建直接影响数据存储、管理、可视化显示及分析等应用，因此高效、互联、精细的交互式属性关联关系的构建至关重要。交互式关联关系主要以独立空间要素为单元，在此基础上通过属性和属性值完成交互式关联关系的构建。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521511622835286.png)

#### **2.3.1交互式构建的基本流程**

建立每个要素的动态性属性，以单个属性集合来存储不同变化形式的属性特征，通过外界感知的物理存在状态[20-22]，对对象属性进行组织和有效的管理。用以表达不同时间点中对象的状态和性质。以内在属性体现对象时空语义特征，同时形成语义异构，建立多语义尺度表达。每个唯一编码ID和属性值Value建立一一对应关系，用ID和Value组成二元组队映射关系。属性信息表达关系如图5所示，以车道中心线为时空对象，用户需对路边形状、路口面积、道路类型、实时交通信息等进行采集和管理，在对应的关联属性中进行存储。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521550905816026.png)

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521546072046955.png)

#### **2.3.2关联对象属性对应**

在关联对象获取的基础上，关联对象属性对应关心根据关联对象不同也分为一对一、一对多、多对一、多对多4种类型，关联关系的基本信息、约束规则等都是批量构建的，如下图路口中红绿灯、停止线、人行横道线和车道中心线的关联属性对应情况。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521515062098103.png)

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521495225308857.png)

## **3 试验情况**

### **3.1数据采集方法**

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_16521523628109589.png)

### **3.2 数据表达方式及特点**

高精度数据以高精度路网导航地图所呈现。本次试验的高精度路网地图以三维实体数据真实还原现实中车辆所经过的道路环境，并将辅助车辆行驶的交通信息对应（或关联）到相应交通设备的属性中[23-25]，通过交通规则，建立行驶车辆周边车道关系，满足自动驾驶。本次实验使用的高精度路网地图分为10大类328小类，通过将交通规则关联在车道上，构建车道之间的拓扑关系，建立有序、连续的车辆可行驶通道，根据定位匹配结果获得起始点的车道编号，通过规则建立所有能通行车辆通道的序列，完成自动驾驶行驶指令。主要特点是通过唯一码实现了所有要素的关联，完成要素之间的集合管理；通过空间位置集合和空间关系中邻接、相交、相离等为关联建立车道拓扑；以独立空间要素为单元，通过属性和属性值完成交互式关联关系的构建。

![img](https://weixin.aisoutu.com/cunchu3/36/2022-05-10/36_1652157188107033.png)

### **3.3测试过程及结果**

通过本模型构建的高精度地图路网数据经过在用户可能面临驾驶场景的测试，验证了模型包含的要素满足了自动驾驶所需要的行车辅助语义信息，精确地表达了路网厘米级三维表征，为车辆的预判和安全行驶提供了有效保障。通过与自动驾驶车辆传感器的有效结合，将感知结果与智能高精地图相匹配，实现了行驶车辆在行车车道上的协同高精度定位，协作车辆快速判断车辆所属的外部环境，有效保证机动车辆对道路环境感知的准确性，能有效在车辆行驶形成指令，及时调整行驶状态。

## **4结束语**

本文提出了从自动驾驶应用角度去构建道路、道路设施、交通设施等行车辅助要素的数据模型，详细介绍通过组件集合、拓扑构建、交互式关联关系等操作建立高精度地图路网数据模型的过程。经过试生产形成的数据与多家车商合作，展开联合应用验证，本模型构建的数据能有效与传感器结合，实现了自动驾驶中在传感器的辅助下能快速定位车辆当前位置，感知周边环境形成虚拟驾驶环境，随着驾驶环境变化及时调整规划、决策、下达等。但是在生产、测试过程中存在一些难点，如道路通行状况变化频繁，变化发现和更新机制有待完善；点云数据矢量化提取自动化水平有待进一步加强，特别针对交通设施的提取和录入；数据在公开使用方面受限较多，会成为大规模推广及使用的瓶颈。在下一步的生产研究中，急需提升点云数据自动提取的能力，特别是针对交通设施及属性自动提取、识别能力；与国内外相关企业探讨建立统一的数据模式，加快数据管理评审、评估、测试标准建立，实现数据共享。