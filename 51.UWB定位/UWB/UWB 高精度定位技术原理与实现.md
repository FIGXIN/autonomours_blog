- [新闻动态_UWB室内定位_UWB高精度人员定位_厘米级二维定位_铱微云UWB定位系统 (uwbcloud.cn)](http://www.uwbcloud.cn/xinwendongtai/)
- [搞定物联网定位：UWB高精度定位技术原理与实现_移动_云加社区_InfoQ精选文章](https://www.infoq.cn/article/UdrFfDotYwRU23KBIl3o)

**导语** | 高德地图、百度地图、腾讯地图等手机地图上提供的定位导航、路况查询、位置搜索等实用功能，极大方便了人们的生活，这背后有赖于智能手机提供的定位能力（GPS、蜂窝、WIFI 等），目标用户主要是人。与此同时，近些年物联网产业高速发展，越来越多的物联网终端连上了网络，实现了人与物，甚至物与物之间的互连互通。随着智能化要求的进一步提高和物联网应用的进一步拓展，除了互联互通，解决“物在 where”问题也越来越迫切，即 IoT 定位。本文将介绍一种厘米级的高精度 IoT 定位技术 – UWB 高精度定位，希望与大家一同交流。

## 一、什么是 UWB

UWB（Ultra Wide Band，超宽带）技术是一种新型的无线通信技术，其与传统通信技术有很大的差异。

在传统通信体制中，数据传输一般都需要使用载波来承载，UWB 则不需要，取而代之的是通过发送和接收具有纳秒甚至亚纳秒级的极窄脉冲来传输数据，一个信息比特可映射为数百个这样的脉冲。

根据傅里叶时频变换规则可知，单周期 UWB 脉冲时域宽度越短，对应的频域带宽就越宽，这种纳秒级时域脉冲信号，往往能产生具有 GHz 量级的频域带宽，如图 1 所示。因此这种技术也称 UWB 超宽带技术（简单来说就是带宽非常大）。

正是这些纳秒级的时域脉冲，使得 UWB 信号具有极高的时间分辨率，非常适合高精度定位。

![img](https://static001.infoq.cn/resource/image/6b/77/6b09b9602f9ed82b56e68d44e20fa277.png)

图 1 UWB 时域极短脉冲信号及频谱

## 二、UWB 定位的技术特点

**1. 高精度**

具有厘米级的高精度定位能力。UWB 信号时域宽度极窄，接收端在测量时，能获得极高的时间分辨率，简单讲就是时间测量准，这是实现高精度定位的基础。

同时它还具有很强的抗多径能力，不同方向到达的信号很难出现叠加干扰，这对高精度定位也非常有好处。

**2. 低功耗**

UWB 系统使用周期性的脉冲来发送数据，脉冲持续时间很短，一般在 0.20ns～1.5ns 之间，占空比非常低，省去了发送连续载波的大量功耗，因此功耗可以做到很低。

**3. 高安全**

UWB 通信系统的物理层技术具有天然的安全性能，其带宽大，发射功率谱密度比噪声还要低，承载的信息淹没在噪声中，被截获和干扰的概率非常低。反之，影响其他无线通信（如 WIFI）的概率也非常低。总结起来，就是自己既不干扰别人，别人也很难干扰自己。

**4. 低成本**

部署 UWB 定位系统，有一定的硬件采购成本，但 UWB 基站覆盖范围大，典型半径达 50-150 米，同样面积下，需部署的设备更少。同时，UWB 系统一旦部署调试完毕，几乎不用再改动，一次投入，可用 10 年，运营成本极低。

## 三、UWB 定位网络架构

整个 UWB 定位系统主要包含四个部分：UWB 定位标签、UWB 定位基站、IoT 定位平台，以及应用平台，如下图所示：



![img](https://static001.infoq.cn/resource/image/58/33/58222ff7f504bdc5e0d1eb02942e4f33.png)



图 2 UWB 定位系统组成

**1. UWB 定位标签**

UWB 定位标签携带在目标人员和物资中，其周期性发送上行 UWB 定位脉冲信号，有工牌、安全帽、腕表等多种形态，适用于不同的应用场景，具有低功耗、便携、防水防尘等特点。



![img](https://static001.infoq.cn/resource/image/86/63/868234c07e30420676b1836f60e46863.png)



图 3 典型 UWB 基站和标签

**2. UWB 定位基站**

UWB 定位基站固定安装在环境四周，其接收测量 UWB 定位标签的脉冲信号以得到高精度的定位数据，具有室内型、工业型、防爆型等多种形态，支持多种供电方式和数据接口。

**3. IoT 定位平台**

接收 UWB 定位基站的测量数据，完成高精度位置计算。围绕高精度位置，还研发有热力图、电子围栏、轨迹呈现，以及设备管理等实用功能，同时也提供用户 API，便于应用侧进行二次开发。

**4. 应用平台**

B 端客户借助 IoT 定位平台提供的基础定位能力拓展业务，助力企业智能运营、安全生产、降本增效。

在实际部署中，与智能手机在公共区域定位不同，UWB 定位常常面向的是工厂、园区等生产制造场景，由于涉及到生产制造等核心企业环节，这类场景对定位精度的要求比手机定位要求高得多，通常需要在作业现场部署专门的定位网络（含定位基站和定位标签）。

典型的定位网络部署方案如下图：



![img](https://static001.infoq.cn/resource/image/e2/95/e2f8bd872901a4003a2071ba1c347295.png)



图 4 UWB 定位网络部署架构

UWB 基站一般安装在定位区域四周，位置是固定的，一般要安装至少 4 个基站，基站位置和定位精度强相关，需要进行精确测量校正。

PoE 交换机与各个基站连接，实现基站和 IoT 定位平台之间的数据通信，也可以通过 PoE 方式给基站供电。

UWB 标签一般是携带在人员或物资上，如工牌、手环、安全帽等，标签之间是相互独立的。总体而言，安装和部署都比较简单方便。

## 四、UWB 定位原理

前文提到，UWB 信号脉冲时域宽度极窄，具有非常高的时间分辨率，天然适合高精度定位。在 UWB 位置计算中应用最广泛的是到达时间差法（TDOA），即根据信号达到基站的时间差来进行定位，其原理如下图所示：

![img](https://static001.infoq.cn/resource/image/2a/82/2a73c3d7626cf6f910ab496192101e82.png)



图 5 UWB 定位原理图

UWB 定位标签是可移动的被定位目标，其向周围发送纳秒级的脉冲信号，固定安装在周围的 UWB 基站接收并测量上述脉冲信号，经过滤波、滑动相关等运算，各自计算得到脉冲信号的到达时刻等定位测量信息。

上述定位测量和基站坐标等信息作为 TDOA 等定位算法的输入，IoT 定位平台完成对 UWB 标签的高精度位置计算，并以此为基础，封装设备管理、热力图、轨迹等多种实用功能，为应用侧提供服务。

TDOA 要求基站之间保持时钟同步，UWB 基站同步精度非常精准，可以达到 0.1ns 以内。因此下面假设 UWB 基站之间时钟是同步的，标签发送脉冲信号后，到达各个基站所需的时间是不一样的，如图 6 所示，分别是 t1-t4，以基站 1 作为基准，可以求得其他基站 i 与基站 1 的距离差分别为：

![img](https://static001.infoq.cn/resource/image/3f/fc/3fbbb979eaab0769589bcaefee8109fc.png)



其中，c 为光速。根据几何规律，平面内到两定点的距离差的绝对值为定长的点的轨迹形成双曲线。在这里，两定点就是基站 i 与基站 1，ri,1 为定长的距离差，因此多条双曲线的交点就是定位位置。



![img](https://static001.infoq.cn/resource/image/36/e6/36619d42858506756dc0ab90820857e6.png)



图 6 UWB 信号时序图

下面以 2D 定位为例进行数学推导，设基站 i 的坐标为(xi, yi)，1≤i≤M，目标标签的坐标为（x, y），标签到基站之间的距离：

![img](https://static001.infoq.cn/resource/image/cc/6f/cc9d4349b7a10b0375d5d50b0480c36f.png)



则标签到基站 i 与基站 1 的 TDOA（距离差）值为：

![img](https://static001.infoq.cn/resource/image/dd/55/ddaf111dbf8ce1e00479048e67478b55.png)



则，

![img](https://static001.infoq.cn/resource/image/3f/05/3f457222b37bd6e2389c13fb591ef205.png)



带入到（1）式，取平方可得：

![img](https://static001.infoq.cn/resource/image/5b/23/5bd913c2e4bf5d674d17101d0dc4c423.png)



做差并化简，有

![img](https://static001.infoq.cn/resource/image/90/be/9019e07f4e2ba065e375d0fc698f2fbe.png)



其中，令

![img](https://static001.infoq.cn/resource/image/51/72/51a6fc2cc4d2bbac8e390ea69b665c72.png)



作为待估计参数向量，将上式转换为矩阵形式的方程组，

![img](https://static001.infoq.cn/resource/image/81/9e/8151b43b128a3f369863d32c9f5d6b9e.png)



其中，

![img](https://static001.infoq.cn/resource/image/72/5e/72e2fea0054d67d85a105839568ea15e.png)



![img](https://static001.infoq.cn/resource/image/61/23/61323d839197546a4ed53d7452babe23.png)



利用最小二乘法，得到的估计量为：

![img](https://static001.infoq.cn/resource/image/fc/b2/fcb04c1aabee6d017736cd1def4c00b2.png)



上面公式利用 M-1 个 TDOA 测量值，构成了 M-1 个双曲线方程，求解此方程组即可得到标签坐标。实际最终的结果，还要经过滤波、匹配等复杂算法操作，这里就不一一展开了。

## 五、应用场景

UWB 定位主要面向 2B 领域，可广泛应用于智慧工厂、物流仓储、智慧楼宇、智慧园区、建筑施工、数字机房、港口机场、电力能源、公检法等场景，能深度参与到生产、运输、监管、安全等核心环节中，助力 B 端客户高效运营和安全生产，实现降本增效，期待未来更广泛多样化的应用。