- [Apollo课程学习1——无人驾驶与Apollo平台概述_Albert的博客-CSDN博客](https://blog.csdn.net/weixin_43476492/article/details/107958729)

# 全球出行的大趋势

- **共享出行**(Car Sharing)。因为汽车的利用率不高，且停车位占据了很多城市空间。

![img](https://img-blog.csdnimg.cn/20200811123055502.jpg#pic_center)

- **新能源汽车**(Clean Energy)。近年来，新能源产业迅速蓬勃发展，新能源汽车也是中国重要的发展趋势和方向。

![img](https://img-blog.csdnimg.cn/20200811123718118.jpg#pic_center)

- **自动驾驶**(Autonomous Driving)。在无人驾驶技术发展**成熟**的时候，无人驾驶会比人类驾驶更加安全，还可减少道路的拥堵。但目前无人驾驶技术的发展还有很长一段路要走。

![img](https://img-blog.csdnimg.cn/20200811125329279.jpg#pic_center)

# 无人驾驶发展简史

![img](https://img-blog.csdnimg.cn/20200811132713304.jpg#pic_center)
无人驾驶不仅是金融投资的**热点**领域，也是一个很有**价值**的行业，并且急需人才。无人驾驶行业正由无序走向有序，由幼稚走向成熟。在开发者们的职业生涯中，无人驾驶技术的普及极有可能成为现实。

![img](https://img-blog.csdnimg.cn/20200811133642576.jpg#pic_center)
![自动驾驶产业图谱](https://img-blog.csdnimg.cn/20200811202944544.jpg#pic_center)

# 无人驾驶的级别

根据美国汽车工程师学会（Society of Automotive Engineers，简称**SAE**）**对自动驾驶行业的分级标准**，包括五个等级。

| 级别    | 名称                    | 特点                                                       | 产品代表 |
| ------- | ----------------------- | ---------------------------------------------------------- | -------- |
| Level 1 | Adaptive Cruise Control | 巡航装置可以**纵向**控制车辆，可以加速减速                 |          |
| Level 2 | Lane Keeping            | 系统可以纵向控制、横向控制汽车，但车是辅助，**人才是主导** | Tesla    |
| Level 3 | Lane Change             | 在**某一时段**内**车**是责任主体                           | 奥迪A8   |
| level 4 | Driveless               | **大部分时间**由**车**来做主导                             | Waymo    |
| level 5 | Driveless               | 驾驶几乎与人类没有关系，**没有方向盘和脚踏板**。           |          |

# 无人驾驶的安全

## 一、ISO-26262

### 1、ISO-26262概述

ISO-26262是一个非常复杂、非常结构化的标准。如果一个硬件达到了**ASIL D级别**的要求，那么它的故障率是**10 fit** ，即10亿个小时里面出一次故障，这个故障率比windows蓝屏的概率低很多。

![img](https://img-blog.csdnimg.cn/20200811165816947.jpg#pic_center)

- Safety
  - **Systematic Faults** 系统性故障：设计汽车的时候就存在的缺陷。
  - **Random Faults**随机故障：由不可控的因素造成的故障，不一定会出现。
- **Security**：涉及的不是车自身的问题，而是系统被黑客攻占了。

ISO-26262是一个**行业规范**而不是一个例法，代表了汽车行业在安全方面可以做到的**极限**，在汽车行业有很高的威望。

![img](https://img-blog.csdnimg.cn/20200811171934223.jpg#pic_center)

### 2、ISO-26262的认证

对于判断一个**问题的严重性**，ISO-26262给了三个判断标准：

- **Separately**：判断车和人分离，出事故后有多少概率会造成人员伤亡。
- **Exposure**：判断这件事情是否常见。
- **Controllable**：判断车出现了问题，驾驶员是否有机会接管。

ISO-26262的认证过程是一个“V型”，通过ISO-26262的认证是一个特别慎重的流程。

- **High Level**层级：首先看开发环境。
- **Function**层级：分析问题的等级，判断这个问题出现的概率。
- **Technique**层级：考虑这个问题具体解决方案。软件硬件确保了安全性后，再返回往上去做验证。

### 3、ISO-26262的优缺点

- **优点**：ISO-26262是对技术的一个引导，会使车更加**安全**；有很高的**商业**附加值；涉及法律中权责的问题，适合**打官司**；
- **缺点**：认证过程很**繁杂**，不符合敏捷开发的需求；ISO-26262只覆盖Safety，**不覆盖Security**，而无人驾驶必须考虑security。

![img](https://img-blog.csdnimg.cn/20200811172810497.jpg#pic_center)

## 二、自动驾驶的研发流程

- **软件在环**：在软件系统里仿真模拟出真实的道路环境，代码开发完毕后首先测试是否可以实现目标。
- **硬件在环**：将所有的仿真结果与传感器、计算单元集合在一起，在硬件环境里测试。
- **车辆在环**：在一个封闭环境中（没有交通流的干扰）测试开发者所开发功能。
- **司机在环**：基于实际道路，研究人—车—路—交通四者之间的相互作用。

按照以上的流程研发能够保证自动驾驶足够的安全性。

# 自动驾驶汽车的硬件系统

## 一、硬件系统概述

自动驾驶分为三大系统：**感知、决策和控制**，每个系统里有对应的硬件系统，如下图所示。

![img](https://img-blog.csdnimg.cn/20200811182616730.jpg#pic_center)

## 二、传感器的安装位置

| 传感器种类 | 考虑的因素                     | 安装位置             |
| ---------- | ------------------------------ | -------------------- |
| 激光雷达   | 360°旋转                       | 车顶                 |
| 毫米波雷达 | 指向性很强                     | 前后保险杠上         |
| 组合导航   | 车身在道路上的俯仰和姿态的干扰 | 两个后车轮的中轴线上 |
| 摄像头     |                                | 车身的360°           |

## 三、自动驾驶的计算单元

- **设计要求**：需要考量整体的车规、电磁干扰和振动方面的设计以及ISO-26262标准的要求。所有的CPU、GPU、FPGA、MCU和总线都要做**冗余设计**，以防止单点故障。

- 目前架构

  ：都是

  集中式

  的架构，即将所有的工作都放到一个工控机当中。

  - **优点**：方便代码的快速迭代，工控机卡槽的设计方便硬件更新和扩展。
  - **缺点**：体积大、功耗高，不适应未来的量产 。

![img](https://img-blog.csdnimg.cn/20200811192723461.jpg#pic_center)

- 未来发展方案①

  ：未来将会考虑

  嵌入式

  的方案，将各传感器的原始数据先融合到一个

  Sensor Box

  中，完成时间戳的同步，然后将融合后的数据给到后端计算平台处理。

  - **优点**：将原来集中式计算的功能拆解出来，可以降低整体系统的功耗。
  - **缺点**：不足以面向更多的量产化。

![img](https://img-blog.csdnimg.cn/20200811194558982.jpg#pic_center)

## 四、自动驾驶的线控系统

自动驾驶线控系统（**control by wire**）指的是汽车的控制是由一些简单**命令**完成的，而不是由物理操作完成的。线控系统主要分为三大部分：**减速控制、转向控制和加速控制**，传统汽车的这些控制由液压系统和真空助力泵协助完成，自动驾驶汽车的线控需要用电控化的零部件来完成。

- **大陆制动（MK C1+MK100）**：从原理图上来看，大陆制动的所有的供电、执行、线路和管路图都是**双备份**的，极大地提高安全性。但是该系统**只适用于乘用车**，像卡车、客车等商用车都是通过气刹系统制动的。

![img](https://img-blog.csdnimg.cn/20200811195703380.jpg#pic_center)

- **EPS（电子助力转向系统）**：直接使用转向管柱与下面的齿条相结合，没有采用电控制。如英菲尼迪Q50的转向系统中，由离合器进行转向管柱的截断，当车辆启动时离合器松开，所有的自动驾驶指令都通过ECU（电子控制元件）发送控制指令到下端两个转向电机上，进行转向控制。

![img](https://img-blog.csdnimg.cn/20200811200402504.jpg#pic_center)

- **线控油门（燃油车）**：控制自动驾驶车辆的加速度。减速刹车踏板上有位置传感器可检测到刹车深浅度，该传感器传送指令到EMS（发动机制动系统）后，气门进气量越多，加速度即越大。

![img](https://img-blog.csdnimg.cn/20200811200950170.jpg#pic_center)

- **新能源车**：通过驱动**电机**的扭力控制来完成对加速度的控制，从整个线控化来看，分为三个阶段：

![img](https://img-blog.csdnimg.cn/20200811202013629.jpg#pic_center)

# Apollo

## 一、Apollo平台

Apollo是一个开放的无人驾驶平台（生态系统）。

- **Open Capability**（开放能力）
- **Shared Resources**（共享资源）
- **Accelerated Innovation**（加速创新）
- **Sustained Mutaul Benefit**（持续共赢）

## 二、Apollo平台技术[框架](https://so.csdn.net/so/search?q=框架&spm=1001.2101.3001.7020)

- **线控车辆平台**（Reference Vehicle Platform）
- **参考硬件平台**（Reference Hardware Platform）
- **软件开放平台**（Open Software Platform）
- **云端服务平台**（Cloud Service Platform）

![img](https://img-blog.csdnimg.cn/20200811175559460.jpg#pic_center)
![img](https://img-blog.csdnimg.cn/20200811175911866.jpg#pic_center)

![img](https://img-blog.csdnimg.cn/20200811180435577.jpeg#pic_center)