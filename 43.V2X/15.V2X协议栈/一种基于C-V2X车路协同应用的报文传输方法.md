# 1 摘要

本发明公开了一种基于C‑V2X车路协同应用的报文传输方法，包括下列步骤：

S1、车载单元发送报文至有效通信范围内的车载单元；

S2、车载单元接收并解读报文信息；

S3、车载单元对报文信息的状态进行判别，若报文信息的状态为特殊加急状态，则优选发送该报文信息，若报文信息的状态为一般状态，则正常发送该报文信息，若报文信息的状态为非发送状态，则丢弃该报文。

车载单元对接收到的报文信息进行解读，将特殊车辆（警车、消防车、救护车等）的请求信息为告警信息的报文信息的状态记做特殊加急状态，优选转发此类报文，提高此类报文的传送效率和成功率。

1.一种基于C-V2X车路协同应用的报文传输方法，其特征在于，包括下列步骤：S1、车载单元发送报文至有效通信范围内的车载单元；S2、车载单元接收并解读报文信息；S3、车载单元对报文信息的状态进行判别，若报文信息的状态为特殊加急状态，则优选发送该报文信息，若报文信息的状态为一般状态，则正常发送该报文信息，若报文信息的状态为非发送状态，则丢弃该报文。

2.根据权利要求1所述的一种基于C-V2X车路协同应用的报文传输方法，其特征在于，所述报文信息包括发送该报文的车载单元的ID信息、GPS位置信息和请求信息，所述请求信息包括服务请求和告警请求。

3.根据权利要求1或2所述的一种基于C-V2X车路协同应用的报文传输方法，其特征在于，所述步骤3具体包括下列步骤：S31、车载单元判断报文信息中的自定义字段中是否包含本设备的ID信息，若包含，则丢弃该报文，反之，则进行步骤S32；

S32、车载单元判断报文信息中的请求信息的类别，若请求信息为告警信息，则将车载单元的ID信息附加到报文信息中的自定义字段中，并立即转发该报文，若请求信息为服务请求，则正常发送该报文信息。

4.根据权利要求3所述的一种基于C-V2X车路协同应用的报文传输方法，其特征在于，所述步骤S32中，若请求信息为服务信息，则进行步骤S33；

步骤S33、计算车载单元单位时间内接受到的报文数量，并与设定阈值进行比对，若单位时间内接受到的报文数量超过设定阈值，则暂停该报文的发送直至单位时间内接收的报文数量低于设定阈值，反之，则正常发送该报文信息。

5.根据权利要求1所述的一种基于C-V2X车路协同应用的报文传输方法，其特征在于，所述报文的内容含量小于设定的阈值。

6.根据权利要求3所述的一种基于C-V2X车路协同应用的报文传输方法，其特征在于，所述步骤S32中，车载单元选择有效通信范围内通信状态最佳的车载单元进行请求信息为告警信息的报文的转发。

# 2 一种基于C-V2X车路协同应用的报文传输方法

## 2.1 技术领域

[0001]本发明涉及通信技术领域，尤其涉及一种基于C-V2X车路协同应用的报文传输方法。背景技术

[0002]为了提升交通系统的安全性和智能化，基于车路协同的智能交通系统的概念正逐渐兴起。智能交通可以利用这一新一代的通信网络和数据处理能力，提高现有交通系统的整体效率，降低能量损耗，增加运输的安全和便捷程度。

[0003]C-V2X是未来智能交通运输系统的车路协同关键通信技术。利用这个技术，交通路口智能设备可以共享实时交通路况、道路事件及行人动态等信息，从而可以大幅度提高驾驶安全性、减少拥堵、降低交通事故率等。此外C-V2X技术也可以为自动驾驶、智能交通和车联网创新提供低成本、易实施的技术路线和基础平台。C-V2X是基于3G/4G/5G等蜂窝网通信技术演进形成的车用无线通信技术，包含了两种通信接口：一种是车、人、路之间的短距离直接通信接口，称为直连通信接口或PC5；另一种是终端和基站之间的通信接口，称为蜂窝通信接口或Uu，可实现长距离和更大范围的可靠通信。

[0004]由于C-V2X通信端口PC5本身是个空中广播通道，区域内车载单元和路侧单元的MAC层都能收到空中的DSM报文，共享PC5端口上通信带宽。如果区域内车载单元不加限制高频度的发送报文，PC5端口则会被大量的报文堵塞，影响通信效率，这对特殊车辆的告警请求报文的发送势必会产生严重影响。

[0005]例如，中国专利文献CN111615078A公开了“一种C-V2X协议栈的通信方法及装置”，包括：通过C-V2X协议栈接收应用层的数据，并对所述应用层的数据进行处理以通过硬件芯片发送出去；通过所述C-V2X协议栈接收所述应用层发起要接收数据的请求以接收所述硬件芯片的数据，通过所述C-V2X协议栈对接收到的硬件芯片的数据处理以回传给所述应用层。上述专利文献的不足之处在于，缺乏对车载单元报文发送频率的限制，进而导致报文广播风暴引起信道堵塞，使得特殊车辆的告警请求的报文有可能在规定时间内不能成功送到特定车载单元。发明内容

[0006]本发明主要解决原有的车路协同应用的报文传输方法对特殊车辆的请求信息为告警信息的报文的传输效率低的技术问题；提供一种基于C-V2X车路协同应用的报文传输方法，车载单元对接收到的报文信息进行解读，将特殊车辆的请求信息为告警信息的报文信息的状态记做特殊加急状态，优选转发此类报文，提高此类报文的传送效率和成功率。

[0007]本发明的上述技术问题主要是通过下述技术方案得以解决的：本发明包括下列步骤：S1、车载单元发送报文至有效通信范围内的车载单元；S2、车载单元接收并解读报文信息；

S3、车载单元对报文信息的状态进行判别，若报文信息的状态为特殊加急状态，则优选发送该报文信息，若报文信息的状态为一般状态，则正常发送该报文信息，若报文信息的状态为非发送状态，则丢弃该报文。

[0008]车载单元对接收到的报文信息进行解读，将特殊车辆（警车、消防车、救护车等）的请求信息为告警信息的报文信息的状态记做特殊加急状态，优选转发此类报文，提高此类报文的传送效率和成功率。

[0009]作为优选，所述的报文信息包括发送该报文的车载单元的ID信息、GPS位置信息和请求信息，所述请求信息包括服务请求和告警请求。

[0010]作为优选，所述的步骤3具体包括下列步骤：S31、车载单元判断报文信息中的自定义字段中是否包含本设备的ID信息，若包含，则丢弃该报文，反之，则进行步骤S32；S32、车载单元判断报文信息中的请求信息的类别，若请求信息为告警信息，则将车载单元的ID信息附加到报文信息中的自定义字段中，并立即转发该报文，若请求信息为服务请求，则正常发送该报文信息。

[0011]当车载单元接收到的报文信息中自定义字段中包括本设备的ID信息，说明该设备对该报文已经转送过，则丢弃该报文，减少对传输通道的占用，当报文的请求信息为告警信息时，优先发送该报文，提高请求信息为告警信息的报文的传送效率和成功率。

[0012]作为优选，所述的步骤S32中，若请求信息为服务信息，则进行步骤S33；步骤S33、计算车载单元单位时间内接受到的报文数量，并与设定阈值进行比对，若单位时间内接受到的报文数量超过设定阈值，则暂停该报文的发送直至单位时间内接收的报文数量低于设定阈值，反之，则正常发送该报文信息。

[0013]当报文的请求信息为服务信息时，车载单元单位时间内接受到的报文数量超过设定阈值时，暂停请求信息为服务信息的报文的发送直至单位时间内接收的报文数量低于设定阈值，抑制请求信息为服务信息的报文的发送频率可以提高特殊车辆的请求信息为告警信息的报文的传输频率。

[0014]作为优选，所述的报文的内容含量小于设定的阈值。

[0015]报文的内容含量小于设定的阈值，可以确保信息快速发送，并减小时延。

[0016]作为优选，所述的步骤S32中，车载单元选择有效通信范围内通信状态最佳的车载单元进行请求信息为告警信息的报文的转发。

[0017]车载单元选择有效通信范围内通信状态最佳的车载单元进行请求信息为告警信息的报文的转发，提高请求信息为告警信息的报文的传送效率和成功率。

[0018]本发明的有益效果是：

1）当报文的请求信息为告警信息时，优先发送该报文，提高请求信息为告警信息的报文的传送效率和成功率；

2）当报文的请求信息为服务信息时，车载单元单位时间内接受到的报文数量超过设定阈值时，暂停请求信息为服务信息的报文的发送直至单位时间内接收的报文数量低于设定阈值，抑制请求信息为服务信息的报文的发送频率可以提高特殊车辆的请求信息为告警信息的报文的传输频率；

3）报文的内容含量小于设定的阈值，可以确保信息快速发送，并减小时延。



![image-20220905112205849](https://img-blog.csdnimg.cn/img_convert/d548cfe365fe5a3e19e5cfca3e08d869.png)

![image-20220905112218634](https://img-blog.csdnimg.cn/img_convert/32d299be96b68fd34aaf619e18464ef1.png)



附图说明[0019]图1是本发明的一种方法流程图。具体实施方式

[0020]下面通过实施例，并结合附图，对本发明的技术方案作进一步具体的说明。

[0021]实施例：本实施例的一种基于C-V2X车路协同应用的报文传输方法，如图1所示，包括下列步骤：S1、各车载单元实时将各自的位置信息上报至云服务器，云服务器计算各车载单元的有效通信范围；S2、每个车载单元从云服务器中获取位于自身当前位置的有效通信范围内的所有车载单元的列表及列表中各车载单元对应的位置信息和通信状态；S3、车载单元发送报文至有效通信范围内的车载单元；S4、车载单元接收并解读报文信息，报文信息包括发送该报文的车载单元的ID信息、GPS位置信息和请求信息，请求信息包括服务请求和告警请求；S5、车载单元对报文信息的状态进行判别，若报文信息的状态为特殊加急状态，则优选发送该报文信息，若报文信息的状态为一般状态，则正常发送该报文信息，若报文信息的状态为非发送状态，则丢弃该报文：S51、车载单元判断报文信息中的自定义字段中是否包含本设备的ID信息，若包含，则丢弃该报文，反之，则进行步骤S52；S52、车载单元判断报文信息中的请求信息的类别，若请求信息为告警信息，则将车载单元的ID信息附加到报文信息中的自定义字段中，并选择有效通信范围内通信状态最佳的车载单元立即转发该报文，若请求信息为服务请求，则进行步骤S53；步骤S53、计算车载单元单位时间内接受到的报文数量，并与设定阈值进行比对，若单位时间内接受到的报文数量超过设定阈值，则暂停该报文的发送直至单位时间内接收的报文数量低于设定阈值，反之，则正常发送该报文信息。

[0022]车载单元对接收到的报文信息进行解读，车载单元接收到的报文信息中自定义字段中包括本设备的ID信息，说明该设备对该报文已经转送过，则丢弃该报文，减少对传输通道的占用。当报文的请求信息为告警信息时，选择有效通信范围内通信状态最佳的车载单元优先发送该报文，提高请求信息为告警信息的报文的传送效率和成功率。当报文的请求信息为服务信息时，车载单元单位时间内接受到的报文数量超过设定阈值时，暂停请求信息为服务信息的报文的发送直至单位时间内接收的报文数量低于设定阈值，抑制请求信息为服务信息的报文的发送频率可以提高特殊车辆的请求信息为告警信息的报文的传输频率。

[0023]报文的内容含量小于设定的阈值，可以确保信息快速发送，并减小时延。