- [V2X协议栈介绍及说明（含框图）_不懂汽车的胖子的博客-CSDN博客_v2x协议栈](https://blog.csdn.net/ChrisKKC/article/details/123852283)

## 1 定义

### 1.1 V2X应用协议栈的定义与功能

定义：V2X应用协议栈，简称V2X协议栈，是指软件侧实现V2X技术功能的总称；

功能：V2X应用协议栈的主要功能包括但不限于以下几项：

V2X协议栈共分四个层级，分别为接入层，网络层，消息层与应用层。

从V2X分层结构来说：

- 在接入层与网络层实现V2X消息的收发；

- 在消息层实现V2X消息的编解码、数据融合与处理；

- 在应用层实现V2X场景的逻辑运算、自动驾驶联合控制、预警播报以及人机交互等；

从V2X实际应用分类来说：

- 车车互联实现V2V类应用的安全预警

- 车路协同实现V2I类应用的智慧调度与安全高效出行

- 弱势交通参与者协同实现V2P/V2M类应用的安全保护

- 人车路云一体实现V2N类应用的智慧交通体系构建等

![img](https://img-blog.csdnimg.cn/054fee0d2d39426ab0f7ed2241139610.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_13,color_FFFFFF,t_70,g_se,x_16)



![img](https://img-blog.csdnimg.cn/e35a2f600a394d6bb119e9446e9380f3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_8,color_FFFFFF,t_70,g_se,x_16)

## 2 市场分析

### 2.1 V2X技术市场背景

车路协同系统是以路侧系统和车载系统为基础进行构建，通过无线通讯设备实现车、路信息交互和共享的系统，是推动自动驾驶步入L3及以上更高等级的必要系统，可加速自动驾驶进程和推动智慧交通行业的发展，也是目前国家利好政策和5G商用的主战场，市场潜力巨大。

### 2.2 V2X技术市场前景

**发展节奏：**中国在C-V2X的行业标准、核心技术、全产业链布局方面具备优势，在多项利好政策的推动下，中国车路协同行业将迎来爆发增长。2019-2021年是车路协同行业的导入期，也是行业发展的分割点，车路协同行业发展从示范应用阶段逐步向规模应用阶段跨越，而未来3-5年中国车路协同行业将迎来爆发期，进而推动中国自动驾驶和智慧交通迈入新阶段。

![img](https://img-blog.csdnimg.cn/6ab74ebc4fb44d89890504d985e14717.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_20,color_FFFFFF,t_70,g_se,x_16)



**OBU市场规模：**在保守、中性及乐观三种情况下，2024年中国车路协同OBU市场规模将分别达到60.3亿、96.6及132.8亿美金。

基于中国自动驾驶前装渗透率预测，车路协同OBU的增量将对应高等级自动驾驶智能网联汽车，此外，随着中国L2.5级自动驾驶的普及，自动驾驶前装市场成为主流（渗透率低、毛利率高），因而将L3及以上自动驾驶前装市场的规模数据简单等同于车路协同OBU的市场规模。结合《智能汽车创新发展战略（征求意见稿）》、《汽车产业中长期发展规划》等国家政策与专家意见，车路协同行业基础设施的完善将加速中国自动驾驶的落地速度，预计中国自动驾驶前装的渗透率将在2024年达到52%。

**应用场景落地：**高速公路/封闭园区道路将是当前车路协同行业最先实现商业化落地的应用场景，是否布局

该类场景以及相应的V2X协议栈的研发将成为判断企业是否具备市场竞争力重要参考指标。

未来3-5年，各类V2X车路协同应用将陆续商业化落地，届时V2X协议栈将成为市场竞争的核心业务，企业是否拥有自研的V2X协议栈也将成为评判企业在V2X技术领域能力的核心指标。

车路协同应用场景丰富，涵盖交叉路口应用、智慧公交应用、货运车队应用、封闭场景应用等多个应用，并覆盖智慧交通、自动驾驶和运营服务等三个领域

车路协同应用的道路类型总体可归纳为城市道路、乡村道路、高速公路及封闭园区道路四大类。在评估车路协同技术的落地可能性时，市场需求、可预期的安全风险及政策风险是关键的考量指标。

![img](https://img-blog.csdnimg.cn/cd90e47cefdc4dacbe88daf013dbc234.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_20,color_FFFFFF,t_70,g_se,x_16)

![img](https://img-blog.csdnimg.cn/89aac0e61e0b442fa180af750a3b5f4f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_20,color_FFFFFF,t_70,g_se,x_16)

**协议栈的重要性与必要性**

从技术角度分析：V2X应用协议栈是V2X领域的核心技术、核心竞争力

- V2X协议栈在V2X技术中的技术占比

**所有V2X场景应用都需要依靠V2X协议栈进行实现**，**所有V2X相关硬件的性能优势都需要依靠V2X协议栈来体现**。

对于用户来说，**V2X协议栈的实际应用是能够看得见摸得着的技术，是V2X技术普及市场，走向大众，面向用户交互的重要手段**。V2X协议栈是V2X技术的主体部分，重要性毋庸置疑。

- V2X协议栈带来的技术支撑

为了适应市场竞争以及体现市场优势，越来越多的车企、客户要求在原有的V2X标准协议栈上进行定制开发或者二次开发。**没有自主研发的协议栈支撑，将无法满足客户需求，导致市场流失，最终导致被行业淘汰。**

以我司目前情况为例，由于采用外购东软V2X协议栈的方式对客户进行技术支持，导致华为、陕汽、南斗等客户的很多定制化需求我方无法满足，甚至对我司在V2X领域的研发实力提出质疑，这是一个非常危险的信号。而东软作为我司竞争对手，不可能在V2X协议栈上对我司进行核心部分的支持，导致我司在客户技术支持以及核心技术上非常被动。自研V2X协议栈迫在眉睫。

- V2X协议栈的技术储备与迭代

V2X协议栈研发是一项需要长期进行技术储备与迭代的工作。保持V2X协议栈的先进性是企业在V2X领域具备核心技术竞争力的重要途径。V2X协议栈研发需要逐步深入，尚不存在弯道超车的可能性。目前行业内一期协议栈的场景明确，技术路线清晰，而二期协议栈争端较大，尚不明确，导致许多企业在二期协议栈开发上停滞不前，而这也为我司提供了V2X协议栈研发的黄金追赶时间。

2021年是V2X协议栈自研与赶超行业竞争对手的最佳时机。若现在不把握机会进行自研工作，一但进入到第四季度或是明年，对于二期协议栈场景要求逐步明确，我司与竞争对手对协议栈的开发差距将进一步拉大，再进行技术追赶将会非常困难，导致公司逐步丧失竞争力，甚至错过市场商业化落地。

## 3.协议框架

### 3.1 协议框图

参考协议框图1：

![img](https://img-blog.csdnimg.cn/1463a44eb496452db2469b6acc890af0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_20,color_FFFFFF,t_70,g_se,x_16)

参考协议框图2：

 ![img](https://img-blog.csdnimg.cn/07b712f13544406ab4dfac4ef95f2b4a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5oeC5rG96L2m55qE6IOW5a2Q,size_20,color_FFFFFF,t_70,g_se,x_16)

### 3.2 模块说明

Message Set Encode/Decode：V2X 消息集编解码模块层级。网络层解封装后的消息集数据帧进入本模块后可进行数据解码并将数据进行字段划分填充至国标中ASN.1语法规定的数据结构体中，此时可进行消息集的区分。同时本车BSM消息完成填充时，也需进入此模块，将BSM消息集进行编码并准备向底层发送。

V2X Message Analysis Library：依据消息层标准，对V2X数据进行进一步的解析处理，以提供应用层用户可直接使用的计算数据。

PH Algorithm & BSM Sender：完成对本车BSM数据的收集、计算、过滤、填充、发送功能。PH计算逻辑单元可对本车GPS数据进行有效筛选，以最少的历史路径点描绘出满足本车要求的近似历史路径。

V2X Infrastructure ：包含了许多V2X基础模块，包含测试日志打印，程序管理者单元，程序配置模块，面向底层接口的GNSS数据接收以及处理模块，面向底层接口的CAN数据接收以及处理模块，V2X消息安全验证模块等。

 V2X Application Distribution：V2X应用分发模块。为V2X应用的前置计算模块，主要利用下层V2X数据以及各类本车数据，进行应用场景前置逻辑的输出。

TC模块：面向V2V应用的关键模块，可输出任一远车相对于本车的位置，区域，方向，以及其他所需信息。从而提供应用选择路径，触发不同的V2V应用计算。

MP模块：面向V2I应用的关键模块，可输出本车实时在MAP消息地图中的Link级定位或者Lane级定位。从而提供应用选择路径，结合其他V2I消息触发不同的V2I应用计算。

 V2X Application ：V2X具体应用场景模块。为V2X应用场景的逻辑计算模块，依据TC，MP模块输出的应用选择路径，触发本模块中具体的应用场景计算逻辑，并输出应用场景的计算结果。

 Threat Arbitration ：威胁仲裁模块。为V2X应用计算结果的仲裁输出模块。当触发多个V2X应用时，应依据本模块的仲裁策略，进行应用场景仲裁并将最终的仲裁结果向HMI输出。

HMI：面向V2X的人机交互。

## 4 附：相关标准：

标准

- GB/T 31024.1-2014 合作式智能运输系统 专用短程通信 第1部分：总体技术要求

- GB/T 31024.2-2014 合作式智能运输系统 专用短程通信 第2部分：媒体访问控制层和物理层规范

- GB/T 31024.3-2019合作式智能运输系统 专用短程通信 第3部分：网络层和应用层规范

- GB/T 31024.4-2019合作式智能运输系统 专用短程通信 第4部分:设备应用规范