- [导航路径规划之一 路网模型_罗家山的蚊子的博客-CSDN博客_路网路径规划](https://blog.csdn.net/autonavi2012/article/details/80901337)

考虑到路网作为网络的特殊性以及路线优化问题的要求，符合导航需要的路网表达方法和[存储结构](https://so.csdn.net/so/search?q=存储结构&spm=1001.2101.3001.7020)应满足如下要求：

1. 存储量小

2. 便于路线优化算法对其进行操作

3. 充分考虑路网作为网络的特殊性-大型稀稀疏网络

4. 能充分表达路网的要素和拓扑结构

5. 能表达单项交通、交叉口转向限制等交通管制措施

6. 能表达路网的各种特殊结构

7. 要考虑节点权重如何存储

描述路网的基本要素有**节点、路段与形状点**，如图1-1所示。从路网的直观结构考虑，很自然地会想到用图来表示路网。

交叉口对应节点，两交叉口之间的路段对应边或弧，路段的某种量化属性作为权，这样用一个赋权图可以初步描述路网。又由于同一个路段的不同方向其属性一般而言不一定相同，故可以采用有向图描述路网。

**节点、路段和形状点构成了路网的基本要素**。三者可以用图1-1来表示。

![img](https://img-blog.csdn.net/20180703171128647?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

​             图1-1

## 1 节点与属性

**节点并不是实际的点，它是一个抽象的概念。在路网中我们通常理解的节点就是交叉口、高速路出入口、起点和终点等。为了导航中路线优化的需要，节点包括下列类型：道路特性发生变化了的点，以及可能进行转向操作的点。**很明显，在节点处道路的权值会发生变化，这会影响到[路径规划](https://so.csdn.net/so/search?q=路径规划&spm=1001.2101.3001.7020)的结果。

在路径规划中，节点应具备如下属性：

1. 节点标识：全国路网中，每个节点都有唯一的一个标识。

2. 节点坐标（经纬度）：节点所处位置的经纬度。

3. 节点类型：是主节点还是子节点，具体信息参考下面的复合路口。

4. 红绿灯信息：该节点所处的交叉口是否有红路灯。

5. 路牌信息。

## 2 路段与属性

**路段是两结点之间连接的弧,是道路包含的最小单元，是指两个节点间的道路属性完全相同的一段道路。**在一条道路中，可以有很多个路段，也就是说，路段必须是具有同一属性、在路网中独立的一段道路。一般来说，路段的特征属性信息应包括如下内容：

1. 路段标识：在全国路网中，每个路段都应有唯一的标识。

2.    起始点号码：起始点和终止点的节点号码。

3.    路段长度：该路段的实际长度，单位为米。

4. 路段的幅宽：该路段的实际宽度，单位为米。

5. 道路等级：高速公路、国道、省道、县道、乡道、城市快速路等。

6. 道路属性：上下行、交叉点内部路、环岛、内部路等。

7. 形状点数据：描述该道路形状的坐标点数据。

8. 路段名称：该道路的名称。

9. 收费设置：该路段是否收费。

10. 通行关系：双向通行、逆方向、顺方向通行。

## 3  路网的拓扑关系

拓扑结构是指如何描述节点、弧段等要素之间案的邻接、关联、包含等关系。

对于路网来说，主要是连通性和方向性。**连通性是指如何表达路段以及节点之间的链接关系。方向性主要考虑是否用有向图来表示路网的问题，**有向图增加了路网的存储量，但由于同一路段两个方向的属性一般而言不尽相同，所以一般采用有向图来表示路网，另外，有向图便于处理单行线，交叉口转向限制等附加属性。路网连通性有两个层次的含义：实体意义上的相邻性和实际交通行为中的可达性。

1. 实体意义上的相邻性。

直观上，一个路段与哪些路段是相连的，一个节点和哪些路段邻接，这是较低层次的连通性，利用一般的网络表示方法就可以直观表达。

2. 交通行为中的可达性。

在实际路网中交通管理部门会经常采用一些交通管制措施，比如单项交通、转向限制、分时段限行等，由此造成直观上连通的路线，在实际交通行为中是不可达的，因而是不连通的。

### 3.1 简单路口

节点和路段是组成路口的两个基本要素。节点在形态上可以分简单路口和复杂路口。由一个节点、一个或多个路段组成的路口是简单路口，由两个或两个以上节点、两个或多个路段组成的路口构成复杂路口。简单路口的示意图如图1-2所示。

![img](https://img-blog.csdn.net/20180704171101369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-2 单一路口

### 3.2 复杂路口

由简单要素组成的复杂路口采用复合路口表示，引入复合路口的目的是将形状复杂的路口或立交桥，用一个简单路口替代，通过引入“复合路口”和“复合路段”，简化道路网络，加快路径规划的计算速度。复杂路的形状示意图如图1-3所示，其中红色的代表主节点和主路段。

![img](https://img-blog.csdn.net/20180704170209295?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

 图1-3 复杂路口

### 3.3 禁行关系

在路网中，有的路段是禁止通行的（人行道），有的路段是允许单向通行，还有的路段是分时段限制通行的，在考虑路网的存储结构时，必须考虑此类禁行关系。在路径规划中，由于采用的是有向图表示路网，弧可以表示两个节点的连通关系，因此如果两个节点之间没有弧，则表示此两个节点不可达，而禁止左转则涉及到三个节点（或一个节点、两条弧），则需要特别考虑，而分时段限制通行被视为禁止通行。

![img](https://img-blog.csdn.net/2018070417060516?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-5 单向行驶与禁止左转

![img](https://img-blog.csdn.net/20180704170619914?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-6 分时段限制通行

## 4 路网区域划分

路网区域划分（Mesh）进行存储在路径规划中也称为分治法。其基本思想是把全国的道路网分割成相同大小的区域（块），路径规划时可以分批次加载路网数据，避免一次性加载所有道路网络。这样划分的每一块称为一个图符。

将大范围数据分Mesh存储，把全国范围的数据按照一定的经纬度范围做Mesh划分，在此所划分的是源数据，无论源数据是什么形式，数据库也好，文件系统也好，首先按Mesh划分后存储。这样在计算道路进行路径规划时不必将全部道路网映射到内存中，而是先导入一部分图符的数据进内存，计算到Mesh边界点时候，将该邻接的Mesh映射到内存中进行局部道路继续运算，把长时间没有参加运算的Mesh从内存中清除掉，通过相邻两Mesh的边界点之间的拓扑关系，可以将各个Mesh连接起来组成一个大的拓扑网络。

![img](https://img-blog.csdn.net/20180704170643489?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-7 路网mesh

如果一个路段跨越了两个Mesh单元，则需要在每个Mesh单元的边界添加两个虚拟的节点，称为图框点，如下图1-8所示。图框点必须有相关信息，指示下一个节点在那个Mesh单元以及下一个节点的节点号。

![img](https://img-blog.csdn.net/20180704170700288?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-8 框点

## 5 路网的分层

在远距离的路径规划中，例如规划一条从深圳某地到北京某地的一条路径，计算的时候需要加载大量的图幅的数据文件，由于图幅数比较多，因此计算的速度会很慢。

其实在远距离的路径计算中，一般都会选择走高速路。因此如果把全国的路网分成几个层次，然后根据不同的层次划分不同的区域。在最底层划分的区域最小，但区域内包含全部的路网数据，最上面的层次划分的的区域最大，但只包含等级比较高的路网，比如高速公路和城市主干道。划分区域的时候，上层的区域必须全部包含对应的下层区域，例如图1-9的上层区域2必须包含下层区域的2、3、4、5。

![img](https://img-blog.csdn.net/20180704170715387?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

 

![img](https://img-blog.csdn.net/20180704170717410?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-9 路径规划数据的区域层次

路网分层后，必须建立层与层之间的节点关系。因此在设计节点的数据结构的时候，要考虑到节点所在的图幅号和对应的上层或下层的节点号，如图1-10所示。



![img](https://img-blog.csdn.net/20180704171247771?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2F1dG9uYXZpMjAxMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

图1-10

建立高层路网的节点的原则是：

1) 划分两个层次：高层路网和低层路网。
2) 一个高层路网的区域包含16（暂定）个低层区域。
3) 高层路网的节点数据包含低层路网的高速公里、城市主干道的节点数据。
4) 与高速公路、城市主干道相邻接的导航路段也必须包含在高层路网中。
5) 建立高层路网中的节点与低层路网中的节点