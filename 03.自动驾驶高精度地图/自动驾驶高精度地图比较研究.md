> 整理自文献：《自动驾驶地图的数据标准比较研究》
> 作者：詹骄 ,郭迟 ,雷婷婷 ,屈宜琪 ,吴杭彬 ,刘经南

## 1 国内外相关标准概况 

### 1.1 国外相关标准概况 

目前国际上流行的自动驾驶地图数据标准主要有 NDS、OpenDrive、Kiwi 和 OpenStreetMap 等。 

#### 1.1.1 NDS

NDS 是一种用于导航系统的标准化物理存储格式,其突出特点是在兼顾性能和功能的基础上,采用了数据库技术存储数据,能够较好地解决地图增量更新、地图数据扩展和数据安全问题。 

NDS 格式以构建块( building block)来组织数据,如名称(name)构建块和兴趣点(point of interest,POI) 构建块,每个构建块提供 NDS 的特定功能。 同时NDS 格式以层次型瓦片方案(hierarchical tiling sche-ma)对构建块进行分层分区,覆盖整个地球表面。 

对于 HAD,NDS 地图数据格式主要提供了 4 个特定的构建块,用于分层数据并相互引用数据:

(1)车道构建块,包含用于 HAD 和增强导航功能的高级车道信息,如车道几何、车道属性等;

(2) 障碍物构建块,对路缘障碍物进行建模;

(3) 定位地标构建块,对可用于定位的地标进行建模;

(4) 路由构建块,为其他构建块提供底层拓扑网络。 

未来新版NDS 称为 NDS. Live,新一代规范的重点是支持嵌入式(不经常变化的地图数据采用嵌入式) 与可流数据(变化频繁的地图数据经云端传输到车辆上) 的组合以更好地支持高级自动驾(Navigation DataStandard,2016)。 

#### 1.1.2 OpenDrive。

 OpenDrive 是自动化及测量系统标准协会(Association for Standardisation of Auto-mation and Measuring Systems,ASAM)的 OpenX 系列标准之一,是一种用于对仿真测试场景的静态部分进行描述的开放文件格式,是目前主流的地图数据格式。

 其文件格式为可扩展标记语言( extensiblemarkup language,XML),允许使用与真实道路相同的元素(直线、曲线、高程剖面、车道和标志等)来精确描述道路,并兼容左右驾驶规则。 

标准定义的具体内容主要分为道路( road)与路口( junction) 两大类。 其本身设计面向的应用是仿真器,因而自动驾驶所需要的更多信息 OpenDrive 并未完全提供(Du-puis 等,2010)。 

#### 1.1.3 Kiwi

Kiwi 是由日本 Kiwi 协会 ( KIWI-WConsortium)制定的日本导航地图格式标准,采用数据物理存储和数据逻辑结构相结合的机制。 

KIWI主要目的是提供一种通用地图数据存储格式以满足嵌入式应用快速精确与高效的需求。 Kiwi 按照分层、分块的结构来组织地图,各层逻辑结构与其物理存储相关联,进而实现数据在纵向上不同层之间的快速引用、在横向上相邻地块间的快速取用(马威,2010)。 

#### 1.1.4 OpenStreetMap

OpenStreetMap 简称 OSM, 是一个由网络大众构建的开源、可个人编辑、非营利性的网上地图协作项目,其文件格式为 XML(Hak- 

lay 和 Weber,2008)。 OSM 信息由 4 种类型的数据(节点、路径、关联和标签)表示:

(1)node(节点),用以表示地球表面的一个位置,具有经纬度坐标;

(2) way(路径),构成折线的一组节点,可用于表示线状对象(如道路网)或面状对象(如建筑物);

(3) rela-tion(关联),描述对象之间的关联关系;

(4) tag(标签),记录对象属性信息的键—值对。 

OSM 不包含车道级的几何拓扑与相关属性信息,但众多专家学者对其进行了修改与扩展以支持自动驾驶汽车的应用, 如 Lanelets (Bender 等,2014) 与 GeoScenario(Queiroz 等,2019)。 

### 1.2 国内相关标准概况 

国内自动驾驶地图数据标准的制定工作相比国外起步较晚,相关标准大多处于制定或立项状态,尚未进行大规模商业化应用。 当前国内主流的自动驾驶地图数据标准主要有智能运输系统智能驾驶电子地图数据模型与交换格式、道路高精度电子导航地图数据规范和 Apollo OpenDrive 等。 

#### 1.2.1 智能运输系统智能驾驶电子地图数据模型与交换格式

标准分为高速公路与城市道路两部分。 标准规定了智能汽车电子地图中高速道路及城市道路数据模型与交换格式的产品要求,包括术语和定义、精度、坐标系统、数据内容、基本属性及数据模型等。 标准具体内容主要分为道路模型与对象模型两大类,道路模型主要重构表达真实世界的道路, 对象模型主要用于与车辆感知数据匹配以进行智能驾驶车辆准确定位。 

#### 1.2.2 道路高精度电子导航地图数据规范

标准规定了道路高精度电子导航地图产品的地图数据组织与地图渲染要求,包括:术语与定义、一般要求、地图数据组织要求、地图渲染要求、几何网络与元数据。 标准适用于地图厂商生产道路高精度电子导航地图以及管理机构审查地图,以支持高级驾驶辅助系统、L3 级及以上自动驾驶汽车、机器人导航和互联网交通精细化执法管理等应用。 

#### 1.2.3 Apollo OpenDrive

Apollo OpenDrive 是百度公司结合 OpenDrive 的规范基础与百度在自动驾驶方面的技术经验扩展修改而成的一种自动驾驶地图 

数据格式,相对于标准 OpenDrive 规范,在数据表达与功能实现上更加简单,对自动驾驶开发者也更为友好(Apollo,2018)。

## 2 自动驾驶地图数据标准的分析比较 

自动驾驶地图数据标准编制的目的在于规范自动驾驶地图数据的组织、交换和共享等,便于地图数据的标准化及其推广应用。 不同数据标准编制时会遵循各自的编制原则来规范地图数据,这些编制原则会直接影响数据标准的制定,进而影响自动驾驶地图的生产与应用。 为切实推动自动驾驶地图数据标准的确立,加快自动驾驶地图数据标准化的进程,自动驾驶地图的数据标准编制时应遵循有效的编制原则。 

综上,本文着重对 NDS、OpenDrive、智能运输系统智能驾驶电子地图数据模型与交换格式和道路高精度电子导航地图数据规范这 4 种国内外主流的自动驾驶地图数据标准进行分析比较研究。 研究主要从数据结构、数据模型、地图渲染和协同应用 4 个维度展开,并在各个维度上给出数据标准编制时建议遵循的原则。 这些建议遵循的编制原则对我国相应规格标准的制定具有借鉴意义。

### 2.1 数据结构 

自动驾驶地图的数据结构分为逻辑结构(反映数据元素之间逻辑关系的数据结构,是对数据在逻辑层面上的组织)和物理结构(数据逻辑结构在物理存储空间的存放形式,是对数据在实现层面上的组织),二者密切关联,往往作为各个数据标准的基础内容,决定数据标准对地图数据文件存储格式、数据逻辑组织模型等的定义,进而直接影响数据标准的编制。 通过对 4 种自动驾驶地图数据标准所定义的数据结构(见表1及图1—图4)进行比较分析,给出自动驾驶地图的数据标准编制时建议采用的数据结构。

![image-20220811152709264](https://img-blog.csdnimg.cn/img_convert/b2b70ce6c6c11910a0ee042e0dc89e58.png) 

![image-20220811152721759](https://img-blog.csdnimg.cn/img_convert/42ef1f4a9f7bd09741032df12ed61c08.png)

![image-20220811152735311](https://img-blog.csdnimg.cn/img_convert/40b0a0f225036867679a81423e652c9b.png)

![image-20220811152744807](https://img-blog.csdnimg.cn/img_convert/a188e3edfd5b075bae779109659bbd1b.png)

![image-20220811152753559](https://img-blog.csdnimg.cn/img_convert/57bb4ba4573fa0bd94b36a7dc9a407ad.png)

基于表 1 所述,对数据结构的分析主要从文件存储格式、逻辑组织模型和分区方案 3 方面展开,具体如下: 

#### 2.1.1. 文件存储格式

OpenDrive 采用 XML 文件格式,其他 3 种均采用数据库表文件的形式。 XML作为非专有的格式, 具有天然的平台无关与语言无关性,这使得 XML 具有跨平台跨系统的特性,而不用限定和依靠于对特定软件的理解。 XML 也是一种可扩展的语言,只要符合 XML 的基本语法与嵌套规则,就可以根据需要自定义标记名,这种特性有助于地图数据的扩展(吴明光 等,2011;陈久军 等, 2007)。 然而自动驾驶地图往往需要大范围内足量且实时的有效道路数据来支撑周期性的地图数据更新,使用 XML 来存储这些海量道路数据会导致XML 文件庞大且复杂,XML 文件节点与深度的显著增加导致云端与终端层需花费较多的资源与时间来解析 XML 文件,不利于地图数据的高效存储与交互。 而采用数据库技术,以表的形式存储数据,能够较好地存储与管理大量数据,有效支持自动驾驶地图的增量更新、数据扩展和数据安全等。 

#### 2.1.2 逻辑组织模型

4 种数据标准均采用了层次结构,各层数据均有相应的功能与权限。 层次结构支持灵活的版本迭代更新,当地图数据版本需要更新时,替换发生变化的层即可。 同时,层次化的逻辑组织模型可以明确地反映出数据的逻辑组织与物理存储之间的关联关系,有助于自动驾驶地图的设计、实现和标准化。 

#### 2.1.3 分区方案

NDS 与道路高精度电子导航地图数据规范采用了分区方案,沿地球表面的水平方向对区域进行划分。 分区方案可以支持高效的数据 

管理,如数据库的增量更新(每个分区可以作为一个更新单元,以支持灵活和持续的版本更新迭代)与快速数据访问(程序可以根据应用需求高效加载某一地理区域内的所有数据,加快地图显示与路径计算速度)(李连营 等,2009)。 

综上,建议在数据标准编制时采用数据库技术以表的形式存储数据,并采用分层(层次化的逻辑组织模型)分区的数据组织方法,以支持灵活高效的数据存储、交互与更新。 

### 2.2 数据模型 

数据模型用于规定自动驾驶地图数据所包含的要素(对象)、属性和关系等,并说明了如何进行数据分 类、 编 码、 几 何 和 拓 扑 表达 等 ( 任 玉 环 等,2015),因而往往作为各个数据标准的核心内容。 

各标准对数据模型的定义大多受地理数据文件(geographical data file, GDF) 规范的影响,包括要素、要素之间的关系、属性等方面内容。 同时各标准又会根据自身编制特点对数据模型进行修改与扩展,因而在数据模型的最终定义上存在差异。 通过对 4 种自动驾驶地图数据标准所定义的数据模型(见表 2)进行比较分析,给出自动驾驶地图数据标准编制时建议采用的数据模型。

![image-20220811152812728](https://img-blog.csdnimg.cn/img_convert/e7364230c355bfa60cfe88dd6ea75d71.png) 

![image-20220811152821254](https://img-blog.csdnimg.cn/img_convert/658f4aa81762d56cb1f2f4418dce55c5.png)

基于表 2 所述,对数据模型的分析主要从数据分类、要素表达和拓扑网络 3 方面展开,具体如下: 

#### 2.2.1 数据分类。 

NDS 与道路高精度电子导航地图数据规范采用了类似于地图图层分层的方法(道路高精度电子导航地图图层组分层结构示意图见图 5),将地图数据模块化组织,每个模块(即每个构建块或图层组) 完成一个特定的子功能,通过过滤与聚合来自不同模块的数据,进而有效应对不同应用需求(如高级驾驶辅助系统)与功能需求(如路径计算、地图匹配)(徐琳和梁发宏,2011)。 采用这种图层分层结构,一方面能够赋予自动驾驶地图更强的灵活性与适用性,进而有效应对不同需求;另一方面更加有利于维护管理,以支持灵活高效的数据更新, NDS 为例,当道路名称发生变化时,仅需对名称( name) 构建块进行维护,而不影响其他构建块。

![image-20220811152616721](https://img-blog.csdnimg.cn/img_convert/db237325edc3ce4d00788f4e43a37f41.png)

#### 2.2.2 要素表达

从方法上看,4 种数据标准对于真实世界对象的抽象描述并无实质性的差异,均从属性、几何和关联关系等方面入手进行规定,并记录有元数据。 但从内容详细程度上看,存在较大差异。 

NDS 作为目前领先的地图数据标准,包含有更多的要素、属性与关联关系,不仅能提供标准导航地图所需的 POI 信息、道路网信息等,而且能提供自动驾驶汽车或高级辅助驾驶系统所需的详细车道信息、定位地标信息等,并通过交通信息( traffic infor-mation)构建块和易失性数据( volatile data)构建块进行动态信息的接入。 此外,自动驾驶地图的适用领域扩展与周期性数据更新需要融入大量多源异构数据,数据标准所规定的数据范围往往难以覆盖所有的数据类型。 基于此 NDS 也定义了地图数据扩展规则,允许用户在遵循NDS相关扩展规则的前提下进行数据的自定义,进一步增强了标准的适用性。 

#### 2.2.3 拓扑网络

NDS 与道路高精度电子导航地图数据规范直接记录有道路几何拓扑网络与车道几何拓扑网络,并以构建块或图层组的形式对道路与 

车道的几何信息与拓扑信息进行组织与存储,有利于路径计算的速度与算法的实现,并能有效支持地图匹配、空间分析等功能(朱大奇和颜明重,2010; 陈龙 等,2018;周鹏 等,2018)。 

综上,建议在进一步扩展自动驾驶地图数据内容以包含更多相关要素与属性的基础上,采用类似于地图图层分层的方法,将数据模块化组织(应包含几何拓扑网络数据),以提高自动驾驶地图的灵活性与适用性 

### 2.3 地图渲染

地图渲染用于将地图内容进行可视化呈现。 对于标准导航电子地图而言,地图渲染是必要环节,但对于自动驾驶地图而言,各数据标准对地图渲染存在不同定义。 自动驾驶地图数据体量大,因而往往通过深度学习技术在终端层进行感知特征提取与地图要素矢量化,将非结构化的原始数据转化为结构化数据,包括目标对象的位姿、种类和语义等,以便于数据存储与交互( Zhao 等,2019;Chen 等,2019; Chen 等,2020)。 矢量化处理的结果往往记录为各对象的几何表达位置与相关属性,而不包括对象的2 维或 3 维可视化数据。 

针对数据标准是否需要添加对象可视化数据以支持地图渲染这一问题,存在两种观点:1) 部分从业者认为地图渲染在自动驾驶地图中不是必需的,对于自动驾驶汽车等高层次应用而言,地图使用的主体是机器,机器完全可以在无需地图渲染参与的情况下按照现有数据(对象的几何表达位置与相关属性数据等)与机器逻辑行驶;2)另一部分从业者认为地图渲染是自动驾驶地图的重要部分,可以通过地图渲染进一步扩展地图的适用范围。 基于这种认知差异,各数据标准对地图渲染的定义也会相应地存在差异。 

#### 2.3.1 NDS

NDS 提供了一系列构建块以支持地图内容的可视化呈现。 在基本地图显示方面,NDS提供了基本地图显示( basic map display) 构建块用于绘制 2D 以及 2. 5D 地图。 在高级地图显示方面,NDS 提供了数字地面模型 ( digital terrain model,DTM)构建块以数字形式呈现地面、地形或地势;3D对象(3D objects)构建块用于对现实世界对象进行3 维建模、正射影像( orthoimages) 构建块呈现地面 的卫星与航空影像。 同时, NDS 采用了层级划分策略,将部分构建模块的导航数据划分为多个层级,层级越高,空间尺寸越大,所包含的数据内容越小。 通过这种层级划分策略,有效提高了地图显示与长距离路径计算的效率。 

#### 2.3.2 OpenDrive

OpenDrive 可 以 基 于 参 考 线(reference line)进行地图绘制。 参考线是 OpenDrive中一条重要的几何线,沿着参考线可以定义道路的内容与属性,例如道路几何(road geometry)、高程剖面(elevation profile)、横向剖面(lateral profile)、车道组(lane section)、道路对象(road object)和道路标记(road signal)等,进而构造路网。 通过渲染以 2 维或3 维的形式展示给用户。 

#### 2.3.3 智能运输系统智能驾驶电子地图数据模型与交换格式

标准仅记录了对象的几何表达位置, 未涉及地图渲染相关内容。 

#### 2.3.4 道路高精度电子导航地图数据规范

标准支持基础地图渲染与高阶地图渲染。 在基础地图渲染方面,标准定义了地图符号的绘制要求、扩充原则以及地图符号库的构建要求,结合对象相关属性(如地理位置信息、道路长度和车道宽度)进行 2 维地图绘制。 在高阶地图渲染方面,标准提供了高级地图信息以支持应用程序进行 2. 5D 或 3D 的可视化呈现,高级地图信息包括空间序列(对象几何表达位置的形状点的经纬度与高程)、抽样点序列(记录部分高级车道信息,包括点的横坡、纵坡、曲率、航向信息)、高程等级和相对高度等。 

除智能运输系统智能驾驶电子地图数据模型与交换格式外,其余三者均定义了地图渲染相关要求, 以支持地图内容的可视化呈现。 

NDS 还采用了层级划分策略将部分地图数据划分为多个层级。

未来自动驾驶地图将是面向人机共用环境的, 既需满足人类识图的需要,又能满足机器理解的要求,适用于高级驾驶辅助系统、高级自动驾驶汽车、机器人导航和国土资源规划等多种应用。 因而,建议地图数据标准应当包含地图渲染方面的内容,并支持层次化地图显示,以提高地图显示与路径计算效率

### 2.4 协同应用 

面向人类驾驶员、用于道路级导航的标准导航地图经过多年发展具备相当丰富的道路交通信息(如道路交通规制、道路属性)、地图显示信息(如江河、湖泊和绿地)、POI 信息(如学校、加油站和车站)等,侧重于描述宏观意义上的真实世界。 而主要面向机器、用于车道级导航的自动驾驶地图则侧重于描述道路及周边一定范围内的环境状况,以及车道间的拓扑连接关系,尽管拥有更加精确的道路 与车道几何数据,但没有标准导航地图丰富的数据内容,尤其是 POI 信息的缺失导致导航功能难以实现(陶璐,2017) 。 针对此问题,建立自动驾驶地图与标准导航地图之间的协同应用关系,是较优的解决策略。 

4 种自动驾驶地图数据标准中,OpenDrive 未涉及标准导航地图方面的内容。 智能运输系统智能驾驶电子地图数据模型与交换格式明确道路对象需与导航地图建立关联关系。 NDS 明确集成自动驾驶和导航产品(integrated automated driving and naviga- tion product),除用于高级自动驾驶的构建块之外, 需结合标准导航相关的构建块,如基础地图显示(basic map display)构建块、兴趣点(POI)构建块、名称(name)构建块,实现完整的自动驾驶导航功能。 

道路高精度电子导航地图数据规范明确道路高精度电子导航地图应与标准导航地图建立协同应用关系,标准导航地图应向道路高精度电子导航地图提供全局路径计算信息,道路高精度电子导航地图应将全局路径计算信息转换为局部路径计算信息,并向标准导航地图提供相应反馈信息(参考流程见图 6)。

![image-20220811152339319](https://img-blog.csdnimg.cn/img_convert/bea771c4f1332f7d1d7fbd0093e70688.png)

自动驾驶地图除与标准导航地图间存在协同应用关系之外,与自动驾驶应用层开发间也存在一定协同应用关系,可应用于自动驾驶系统的开发、应用和测试等环节,支持自动驾驶系统场景理解、视觉定位等功能的实现。 通过两者间的协同与交互,有助于加强数据标准与现实应用之间的一致性,保证数据标准的可用性。 目前由于国内相关数据标准起步较晚,相关的研究大多集中于openDrive(Xiao 等,2020)、 OpenStreetMap ( Sun 等,2020 ) 等国外相关标准。

综上,建议在数据标准中明确建立自动驾驶地图与标准导航地图之间的协同应用关系,使自动驾驶地图与标准导航地图实现信息互补,增加两种地图数据的耦合性、交互性,进而有效应对不同需求。 

同时,研究我国的自动驾驶地图与自动驾驶应用层开发间的协同应用关系,实现两者相互赋能增效。 

## 3 结 语 

自动驾驶地图数据标准作为自动驾驶地图生产应用的指导性规范之一,是自动驾驶地图数据标准化的基准。 目前国际上以欧洲为主导,国内进度相对滞后。 针对此问题,我国相继出台了一系列政策措施,以加快我国自动驾驶地图相关产业的开发与商业化进程,如国家发展和改革委员会等 11 部委联合发布的《智能汽车创新发展战略》明确要构建智能汽车中国标准体系,重点制定车载关键系统、智能汽车基础地图等技术标准和规范,以及“人—车—路—云”系统协同的车用无线通信技术标准和设备接口规范;中共中央、国务院发布《关于构建更加完善的要素市场化配置体制机制的意见》,要求推动车联网领域数据采集标准化;中央政治局常务委员会提出“加快推进国家规划已明确的重大工程和基础设施建设”,“新基建”的实施需围绕车路协同等一系列融合创新应用场景展开,并推动形成具有我国特色的自动驾驶标准体系。 

为解决自动驾驶地图数据标准化问题,切实推动我国自动驾驶地图数据标准的制定与完善,同时确保与国外相关进展保持一致,保证我国自动驾驶地图数据标准与国外相关标准的兼容,对自动驾驶地图的数据标准进行比较研究。 介绍国内外主流的自动驾驶地图数据标准,针对其中 4 种:NDS、Open-Drive、智能运输系统智能驾驶电子地图数据模型与交换格式和道路高精度电子导航地图数据规范进行分析比较研究,总结出自动驾驶地图数据标准编制时建议遵循的原则,包括: 

1) 采用数据库技术以表的形式存储数据; 

2) 采用分层(层次化的逻辑组织模型)分区的数据组织方法; 

3) 记录更多的要素与属性以反映真实环境状况,并预留动态数据接口与数据扩展接口; 

4) 支持地图数据模块化组织,记录道路与车道的拓扑几何网络数据; 

5) 支持地图渲染与层次化地图显示; 

6) 规定自动驾驶地图与标准导航地图间的协同应用关系; 

7) 研究自动驾驶地图与自动驾驶应用层开发间的协同应用关系。 

这些建议遵循的编制原则对我国相应规格标准的制定具有借鉴意义。 

研究主要基于标准文件,较少涉及自动驾驶地图标准与自动驾驶应用层开发间的关联关系。 后续将深入研究该方面内容,为自动驾驶地图标准与自动驾驶应用层开发间的相互赋能增效助力。 