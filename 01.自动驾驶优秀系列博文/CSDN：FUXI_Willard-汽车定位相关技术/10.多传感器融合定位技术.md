- [学习笔记10--多传感器融合定位技术_FUXI_Willard的博客-CSDN博客](https://fuxi-willard.blog.csdn.net/article/details/125664362)

## 4.多传感器融合定位技术

### 4.1 多传感器融合定位简介

- **多传感器融合：将不同传感器对某一目标或环境特征描述的信息融合成统一的特征表达信息及其处理的过程；**
- 多传感器数据融合实际上是模拟人脑综合处理复杂问题的过程，通过对各种传感器及其观测信息的合理支配与使用，将各种传感器在空间和时间上的互补与冗余信息，依据某种优化准则加以组合，产生对观测环境或对象的一致性解释和描述，实现多个传感器共同或联合操作，提高整个传感器系统的有效性；
- **数据融合的目标：利用各种传感器的独立观测信息，对数据进行多级别、多方位和多层次的处理，产生新的有意义的信息；**
- 自动驾驶汽车定位主要模式：DR、GNSS、GNSS/DR组合定位；引入地图匹配后，组合出新的模式：DR/MM、GNSS/MM、GNSS/DR/MM；多传感器融合定位系统可在6中模式中自动切换以提高整个系统的定位精度和可靠性；

#### 4.1.1 多传感器融合定位系统[体系结构](https://so.csdn.net/so/search?q=体系结构&spm=1001.2101.3001.7020)

**多传感器融合定位系统体系结构主要包括：松耦合(Loose Coupling)、紧耦合(Tight Coupling)、深耦合(Deep Coupling)；**

1. 松耦合
   松耦合系统中，GNSS给INS提供位置信息，二者硬件上相互独立且可随时断开连接，分别输出定位信息与速度信息到融合滤波器，融合滤波器进行优化处理后将结果反馈给惯性导航系统对其修正后进行输出；
   ![1](https://img-blog.csdnimg.cn/1fa3c6528f8543a484a81e2fbaf56aac.jpeg#pic_center)
2. 紧耦合
   紧耦合将由GNSS码环与载波跟踪环解算得到的伪距、伪距率与由惯性导航系统结合自身信息和卫星星历进行计算得到的伪距、伪距率做差，得到伪距与伪距率的测量残差，将其作为融合滤波器的输入观测量，得到惯性导航系统计算误差以完成对惯性导航系统的校正并获得位置与速度的最有估计值；
   ![2](https://img-blog.csdnimg.cn/716f79f08a4d4c25b7dc49d3e0ef56c2.jpeg#pic_center)
3. 深耦合
   深耦合系统相对于紧耦合系统，增加了INS单元对GNSS接收机的辅助；利用INS单元结合星历可以对伪距与载波的多普勒频移进行估计，利用估计结果辅助接收机的捕获与跟踪环路，可以有效地提高GNSS接收机跟踪环路的动态性与灵敏度；

#### 4.1.2 多传感器融合定位系统分层

![3](https://img-blog.csdnimg.cn/9030d9d660cc462c92842dc22f57e3db.jpeg#pic_center)
**多传感器融合定位系统划分为：数据层融合、特征层融合、决策层融合；**

1. 数据层融合(像素级融合)

   - 数据层融合，首先将传感器的观测数据融合，然后从融合的数据中提取特征向量，并进行判断识别；
   - 数据层融合需要传感器是同质的(传感器观测的是同一物理量)，如果多个传感器是异质的(传感器观测的不是同一个物理量)，则数据只能在特征层或决策层融合；

2. 特征层融合

   特征层融合先从每种传感器提供的观测数据中提取有代表性的特征，这些特征融合成单一的特征向量，然后运用模式识别的方法进行处理；

3. 决策层融合

   决策层融合指在每个传感器对目标做出识别后，再将多个传感器的识别结果进行融合，属于高层次融合；

### 4.2 多传感器融合定位系统原理

![4](https://img-blog.csdnimg.cn/df8ab95f1b6f4f7cb414a949fe9afa5f.png#pic_center)

- 多传感器融合定位系统输入主要来自GNSS-RTK、惯性导航系统和地图匹配定位系统；
- 融合定位系统对其数据进行预处理、数据配准和数据融合等处理后，输出汽车自身的速度、位置和姿态等信息；
- 数据预处理可以考虑为传感器初始化及校准，传感器初始化相对于系统坐标系独立地校准每一个传感器；一旦完成传感器初始化，就可以利用各传感器对共同目标采集得到的数据进行数据配准；
- 数据配准：把来自一个或多个传感器的观测或点迹数据与已知或已经确认的事件归并到一起，保证每个事件集合所包含的观测与点迹数据来自同一个实体的概率较大；
- 传感器的配准主要包括：时间配准和空间配准；

#### 4.2.1 时间配准

- 时间配准：将关于同一个目标的各传感器不同步的量测信息同步到同一时刻；
- 时间配准的一般做法：将各传感器数据统一到扫描周期较长的一个传感器数据上；常用的方法：最小二乘法(Least Squares，LS)和内插外推法；

#### 4.2.2 空间配准

- 空间配准：借助于多传感器对空间共同目标的量测结果对传感器的偏差进行估计和补偿；
- 对于同一系统内采用不同坐标系的各传感器的量测值，定位时必须将它们转换成同一坐标系中的数据，对于多个不同子系统，各子系统采用的坐标系是不同的，所以在融合处理各子系统间信息前，需要将它们转换到同一量测坐标系中，处理后需将结果转换成各子系统坐标系的数据，再传送给各子系统；

### 4.3 多传感器融合误差分析

**多传感器配准误差主要来源：**

- 传感器的误差，即传感器本身因制造误差带来的偏差；
- 各传感器参考坐标系中量测的方位角、高低角和斜距偏差；通常是因量测系统解算传感器数据时造成的误差；
- 相对于公共坐标系的传感器的位置误差和计时误差；位置误差通常由传感器导航系统偏差引起，计时误差通常由传感器时钟偏差所致；
- 各传感器采用的定位算法不同，从而引起单系统内局部定位误差；
- 各传感器本身的位置不确定，为融合处理而进行坐标转换时产生偏差；
- 坐标转换的精度不够，为了减少系统的计算负担而在投影变换时采用了一些近似方法所导致的误差；

### 4.4 多传感器融合算法

#### 4.4.1 数据融合算法概述

- 融合算法分为：随机类和人工智能类；
  - 随机类多传感器融合：综合估计法、贝叶斯估计法、D-S证据推理、最大似然估计法、卡尔曼滤波算法、鲁棒估计等；
  - 人工智能类多传感器融合：模糊逻辑法、神经网络算法、专家系统；
- 动态空间模型，如：卡尔曼滤波器采用高斯-马尔可夫线性模型，用状态方程描述状态随时间演变的过程，用观测方程描述与状态有关的噪声变量，数学映射为：

**常用算法简单说明：**

1. 综合平均法

   该算法把来自多个传感器的众多数据进行综合平均；适用于用同样传感器检测同一个目标的情况；如果对一个检测目标进行了k kk次检测，其平均值S ‾ = ∑ i = 1 k W i S i / ∑ i = 1 k W i \overline{S}=\sum_{i=1}^kW_iS_i/\sum_{i=1}^kW_iS=∑i=1kWiSi/∑i=1kWi，其中，W i W_iWi为分配给第i ii次检测的权值；

2. 贝叶斯估计法

   贝叶斯推理技术主要用来进行决策层融合；贝叶斯估计法通过先验信息和样本信息合成为后验分布，对检测目标做出判断；贝叶斯估计是一个不断预测和更新的过程；

3. D-S证据推理

   D-S证据推理是目前数据融合技术中常用的算法，该算法通常用来对检测目标的大小、位置及存在与否进行推断，采用概率区间和不确定区间决定多证据下假设的似然函数来进行推理；

   提取的特征参数构成该理论中的证据，利用这些证据构成相应的基本概率分布函数，对于所有的命题赋予一个信任度；基本概率分布函数及其相应的分辨框合称为一个证据体；

   每个传感器相当于一个证据体，多个传感器数据融合，实质上是在同一个分辨框下，利用Dempster合并规则将各个证据体合并成一个新的证据体，产生新证据体的过程就是D-S证据推理数据融合；

4. 卡尔曼滤波算法

   **联合卡尔曼滤波器设计思想：先分散处理、再全局融合，即在诸多非相似子系统中选择一个信息全面、输出率高、可靠性绝对保证的子系统作为公共参考系统，与其他子系统两两结合，形成若干子滤波器；各子滤波器并行运行，获得建立在子滤波器局部观测基础上的局部最优估计，这些局部最优估计在于主滤波器内按融合算法合成，从而获得建立在所有观测基础上的全局估计；**

5. 模糊逻辑法

   针对数据融合中所检测的目标特征具有某种模糊性的现象，利用模糊逻辑算法来对检测目标进行识别和分类；

6. 神经网络算法

   要使神经网络算法在实际融合系统中得到应用，无论在网络结构设计或是算法规则方面，还有很多基础工作要做，如：网络模型、网络层次、每层的节点、网络学习策略、神经网络算法与传统分类算法的关系和综合应用等；

7. 专家系统

   专家系统是一组计算机程序，获取专家们在某个特定领域内的知识，然后根据专家的知识或经验导出一组规则，由计算机做出本应由专家做出的结论；

**各种融合算法比较：**

| 融合算法     | 运行环境 | 信息类型 | 信息表示   | 不确定性 | 融合技术     | 使用范围    |
| ------------ | -------- | -------- | ---------- | -------- | ------------ | ----------- |
| 综合平均法   | 动态     | 冗余     | 原始读数值 | —        | 加权平均     | 低层融合    |
| 贝叶斯估计法 | 静态     | 冗余     | 概率分布   | 高斯噪声 | 贝叶斯估计   | 高层融合    |
| D-S证据推理  | 静态     | 冗余互补 | 命题       | —        | 逻辑推理     | 高层融合    |
| 卡尔曼滤波   | 动态     | 冗余     | 概率分布   | 高斯噪声 | 系统模型滤波 | 低层融合    |
| 模糊逻辑法   | 静态     | 冗余互补 | 命题       | 隶属度   | 逻辑推理     | 高层融合    |
| 神经网络算法 | 动、静态 | 冗余互补 | 神经元输入 | 学习误差 | 神经元网络   | 低/高层融合 |
| 专家系统     | 静态     | 冗余互补 | 命题       | 置信因子 | 逻辑推理     | 高层融合    |

#### 4.4.2 卡尔曼滤波算法

**卡尔曼滤波分为：线性卡尔曼滤波、扩展卡尔曼滤波、级联式和联邦式卡尔曼滤波、无迹卡尔曼滤波等；**

1. **扩展卡尔曼滤波算法：将非线性方程线性化的滤波算法，是解决非线性滤波问题常用的一种方法；**
2. **联邦卡尔曼滤波**
   ![8](https://img-blog.csdnimg.cn/f7749373986e49c7b8f66b28f938cc32.jpeg#pic_center)
   联邦卡尔曼滤波一般分为：先基于局部传感器进行滤波，然后再进行主滤波；
