- [自动驾驶的三大核心要素：传感器、计算平台、数据与算法 (qq.com)](https://mp.weixin.qq.com/s/HUscQU3pLwbPDtecNzmW4w)

## **一、传感器：不同定位与功能，优势互补**

自动驾驶汽车往往配备了多种传感器，包括摄像头、毫米波雷达、激光雷达。这些传感器各有不同的功能与定位，优势互补；作为一个整体，成为了自动驾驶汽车的眼睛。2021 年以后的新车都配备了大量的传感器，目的是预留冗余硬件，以便后续通过 OTA 的方式实现更多自动驾驶功能。

**2021年 1-5月国内新发布车型传感器配置及核心功能**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsjq7H3NoGT1sOsovlUSGDyyLbOnjuXwAFbIARGkcD1fIKtR4aHOXmmw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)



**摄像头的作用：**主要用于车道线、交通标示牌、红绿灯以及车辆、行人检测，有检测信息全面、价格便宜的特征，但会受到雨雪天气和光照的影响。现代摄像头由镜头、镜头模组、滤光片、CMOS／CCD、ISP、数据传输部分组成。光线经过光学镜头和滤光片后聚焦到传感器上，通过CMOS或 CCD集成电路将光信号转换成电信号，再经过图像处理器（ISP）转换成标准的 RAW，RGB或 YUV等格式的数字图像信号，通过数据传输接口传到计算机端。摄像头可以提供丰富的信息。但是摄像头依赖自然光源，目前视觉传感器的动态做得不是特别宽，在光照不足或者光照剧烈变化的时候视觉画面可能会出现短暂的丢失，并且在雨污状况下功能会受到严重的限制，行业内通常通过计算机视觉的方式克服摄像头的各种缺点。

车载摄像头是高增量市场。车载摄像头的使用量随着自动驾驶功能的不断升级而增加，比如前视普遍需要 1-3 个摄像头、环视需要4-8 个摄像头。预计到2025年全球车载摄像头市场将达 1762.6 亿元，其中中国市场 237.2 亿元。

**2015-2025年全球和中国车载摄像头市场规模（亿元）**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsCch4OTiaE4T9hzT4vRue2lqFWc7IS8rxoYribxdSrVumYNiamzqEzCvJA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

车载摄像头行业产业链包括上游的镜头组供应商、胶合材料供应商、图像传感器供应商、ISP芯片供应商，以及中游的模组供应商、系统集成商，下游的消费电子企业、自动驾驶 Tier1等。从价值量来看图像传感器（CMOS Image Sensor）占了总成本的 50%，其次为占比 25%的模组封装和占比14%的光学镜头。

**摄像头产业链**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsPeibVtV1m91G9JQRQaUHFyLB7z9PichEpAWpJVsqQJ33FyibTVO2VYbXQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**激光雷达（Lidar）的作用：**主要用于探测周边物体的距离和速度。在激光雷达的发射端，由激光半导体产生一种高能量的激光束，激光与周围的目标发生碰撞后，再被反射回来，由激光雷达接收端捕获并进行运算，得到目标的距离和速度。激光雷达具有比毫米波和摄像头更高的探测精度，可探测的探测距离远，往往可以达到 200米以上。激光雷达按其扫描原理分为机械式、转镜式、MEMS和固态激光雷达。根据测距原理可以分为飞行时间测距（ToF）和调频连续波（FMCW）。当前行业处于激光雷达应用的摸索阶段，还没有一个清晰的方向，无法明确哪条技术路线会成为未来主流。

激光雷达市场广阔，中国企业将领先美国。激光雷达市场前景广阔，我们预测到2025 年，中国激光雷达市场将接近 150 亿元，全球市场接近 300 亿元；至 2030 年中国激光雷达市场将接近 350 亿元，全球市场接近 650 亿元，全球市场年化增长率达到 48.3%。美国最大自动驾驶公司特斯拉采用纯视觉方案，其他车企暂无激光雷达上车的具体计划，因此中国成为车载激光雷达的最大潜在市场。2022 年有大量国内整车厂推出搭载激光雷达的产品，预计 2022 年车载激光雷达产品出货量

将达到 20 万台。中国企业更具胜出概率是因为中国企业更加贴近市场，与中国整车厂配合度高，更容易获得市场订单，因此降本速度也会更快，形成良性循环。中国广阔的市场将会协助中国激光雷达企业弥补与国外企业的技术差距。

**2022至 2030年中国激光雷达市场展望**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsF7NCldNmXhOMBNuAb5UmxFjSogwFib19XAow6mskCjxW3RUzeVHvUdg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**激光雷达车型一览表**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsEpMYZlpGWQYauy2RonuPic7rviaefNUB416S8ywXFslHrDVInP9QTW7w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

当前阶段各个技术路线各有优缺点，我们的判断是未来 FMCW 技术将与 TOF 技术并存、1550nm 的激光发射器会优于 905nm，同时市场可能会跳过半固态直接跨越到全固态阶段。

FMCW 技术与 TOF 技术并存：TOF 技术较为成熟，具有响应速度快、探测精度高的优点，但无法直接测量速度；FMCW 可以直接通过多普勒原理测量速度并且灵敏度高（高出 ToF 10 倍以上），抗干扰能力强，可长距离探测，功耗低。未来可能高端产品用 FMCW，低端产品用TOF。

1550nm 优于 905 nm：905nm 属于近红外激光，容易被人体视网膜吸收并造成视网膜损伤，因此 905nm 方案只能维持在低功率下。1550nm的激光，原理可见光谱，同等功率条件下的激光对人眼的损伤更小，探测距离更远，但缺点是需要InGaAs 做发生器，且不能使用硅基探测器。

跳过半固态直接跨越到全固态：现有的半固态方案转镜式、棱角式、MEMS，都存在少量机械部件，车载环境下使用寿命短，难以通过车规认证。固态激光雷达的 VCSEL+SPAD 方案采用芯片级工艺，结构简单，易过车规，成为目前纯固态激光雷达最主流的技术方案。iPhone12 pro 背后的激光雷达用的就是VCSEL +SPAD方案。

**激光雷达的技术路线及代表性企业**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsaBY0KbobVz0xia3ibXzAAPkOa6OibQ2Ticfb6h3xUYSey1EAE9PzD2eALQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

高精地图存在被颠覆的可能。路线之争在高级地图领域持续，特斯拉提出了不需要提前测绘的高精地图的方案，用摄像头采集到数据为基础，利用人工智能技术构建环境的三维空间，采用众包的思维，由每一辆车提供道路信息，并在云端统一汇总。因此我们需要警惕技术革新对高精地图的颠覆。

部分从业者认为高精度地图对于智能驾驶不可或缺，从视野范围看，高精度地图不受遮挡，不存在距离和视觉的缺陷，在特殊天气条件下，高精度地图依旧可以发挥作用；从误差看，高精度地图可以有效消除部分传感器误差，在部分路况条件下，可以有效对现有传感器系统进行补充修正。此外，高精度地图还可以构建驾驶经验数据库，通过多维时空数据的挖掘，分析危险区域，为驾驶者提供新的驾驶经验数据集。

**激光雷达+视觉技术，采集车+众包模式是未来高精地图的主流方案。**

高精地图需要平衡精度和速度两个衡量指标。过低的采集精度和过低的更新频率无法满足自动驾驶对高精地图的需求。为解决这一问题高精地图企业采用了一些新方法来应对，比如众包的模式，每一台自动驾驶汽车都作为高精地图的采集设备提供高精动态信息，汇总后分发给其他汽车使用。在这一模式下，领先的头部高精地图企业由于可参与众包的车型数量多，因此可以采集更加精确、快速的高精地图，维持强者恒强的局面。

**高德地图融合方案**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsulfAdAXo1VYNVzYlxAqg1M8q1J6jH4rsK1MlHXWZuDw4PJDNd6DA5w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

## **二、计算平台：对芯片的要求不断提高，半导体技术是护城河**

计算平台也叫做自动驾驶域控制器。随着 L3以上自动驾驶渗透率的提升，对算力的要求也提升，虽然当前 L3的法规和算法都暂未出台，但整车企业均采用算力冗余方案，为后续的软件迭代预留空间。

**计算平台未来有两个发展特点：异构和分布弹性。**

**异构：**面向高阶自动驾驶车辆，计算平台需兼容多种类型，多数据传感器并具备高安全性和高性能。现有单一芯片无法满足诸多接口和算力要求，需采用异构芯片的硬件方案。异构可以体现在单板卡集成多种架构芯片，如奥迪zFAS集成 MCU（微控制器）、FPGA（可编程门阵列）、CPU（中央处理器）等；也可以体现在功能强大的单芯片（SoC，系统级芯片）同时集成多个架构单元，如英伟达 Xavier集成 GPU（图形处理器）和CPU 两个异构单元。

**分布弹性：**当前汽车电子架构由众多单功能芯片逐渐集成于域控制器。高阶自动驾驶要求车载智能计算平台具备系统冗余、平滑拓展等特点。一方面考虑到异构架构和系统冗余利用多板卡实现系统的解耦和备份；另一方面采用多板卡分布扩展的方式满足高阶自动驾驶对于算力和接口的要求。整体系统在同一自动驾驶操作系统的统一管理适配下，协同实现自动驾驶功能，通过变更硬件驱动、通讯服务等进行不同芯片的适配。随着自动驾驶等级提升，系统对于算力、接口等需求都会与日俱增。除了增加单个芯片的运算能力，还可以将硬件部件进行重复堆叠，实现对硬件部件的灵活调整和平滑的扩充，从而实现对整个系统的计算能力的提升，增加接口、完善功能。

异构分布硬件架构主要由三部分组成：AI 单元、计算单元和控制单元。

**AI 单元：**采用并行计算架构 AI 芯片，并使用多核 CPU 配置 AI 芯片和必要处理器。目前AI 芯片主要用于多传感器数据高效融合与处理，输出用于执行层执行的关键信息。AI 单元是异构架构中算力需求最大的一部分，需要突破成本功耗和性能的瓶颈以达到产业化要求。AI 芯片可选用 GPU、FPGA、ASIC（专用集成电路）等。

**不同类型芯片对比**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLshSAnfiaUExzvEQw6MEgmNPFGr1X20cLibrCU9IR2JpLXYh0LkHtbbDag/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**计算单元：**计算单元由多个 CPU组成。具有单核主频高，计算能力强等特点，满足相应功能安全要求。装载 Hypervisor, Linux的内核管理系统，管理软件资源，完成任务调度，用于执行自动驾驶相关大部分核心算法，并将多元数据整合起来，实现路径规划与决策的控制。

**控制单元：**主要基于传统车辆控制器（MCU）。控制单元加载 ClassicAUTOSAR平台基础软件，MCU通过通信接口与 ECU相连，实现车辆动力学横纵向控制，并满足功能安全ASIL-D 等级要求。

特斯拉 FSD 芯片为例，FSD 芯片采用 CPU+GPU+ASIC 架构。包含 3 个四核 Cortex-A72 集群，总共 12 个 CPU，运行频率为 2.2 GHz；一个 Mali G71 MP12 GPU 运行频率为 1 GHz、2 个神经处理单元（NPU）以及各种其他硬件加速器。三类传感器之间分工明确，Cortex-A72 内核 CPU 用于通用计算处理、Mali 内核 GPU 用于轻量级后处理，NPU 用于神经网络计算。GPU 算力达到 600GFLOPS， NPU 算力达到 73.73Tops。

**特斯拉FSD 芯片架构**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsoIYamYiaKibQNiasTw5PhYFvdZPR0W1Gclib2cD6E5doJloKicf7nIPDY2w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**自动驾驶域控制器的技术核心是芯片，其次是软件和操作系统，短期护城河是客户与交付能力。**

芯片决定了自动驾驶计算平台的算力，设计制造难度大，容易成为卡脖子环节。高端市场均由国际半导体巨头英伟达、Mobileye、德州仪器、恩智浦等把持；在 L2及以下的市场以地平线为代表的国内企业也逐渐获得客户的认可。中国的域控制器厂商一般都会与一家芯片厂家深度合作，采购芯片，配合自身硬件制造、软件集成能力交付给整车厂。与芯片企业的合作一般具有排他性质。从芯片合作角度来看，德赛西威绑定英伟达、中科创达绑定高通，优势最明显。国内其他自动驾驶域控制器企业华阳集团绑定华为海思、东软睿驰与恩智浦和地平线建立合作关系。

**国内域控制器企业与芯片企业的合作关系**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsMUAmVU1BRvsxibF6ZAfVMibKFC1MxcCIwz3kzybQricDU5ERMkQw2E4pg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

域控制器的竞争力由上游合作的芯片企业决定，下游整车厂采购的往往是芯片企业提供的一整套解决方案。比如蔚来、理想、小鹏的高端车型采购的就是英伟达 Orin 芯片以及英伟达自动驾驶软件；极氪和宝马采购的是芯片企业Mobileye 的解决方案；长安、长城采购的是地平线的L2 解决方案。我们应当持续关注芯片和域控制器企业的合作情况。

**芯片企业产品与车企合作情况**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsTxCUYPgsNdIr2zO8afZtP4RQxWjctg6KQavC3Oicp8z6QpNhOcyiaMQg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

## **三、 数据与算法：数据有助于迭代算法，算法质量是自动驾驶企业的核心竞争力**

用户数据对于改造自动驾驶系统极其重要。自动驾驶的过程中有一类发生概率不高的罕见场景，这类场景被叫做 corner case。若感知系统遇到了 corner case 则会带来严重的安全隐患。例如前几年发生的特斯拉的 Autopilot 没有识别出正在横穿的白色大卡车，直接从侧面撞上去，导致车主死亡；2022 年 4 月小鹏在开启自动驾驶的过程中撞上了侧翻在路中间的车辆。

此类问题的解决办法只有一个，便是由车企牵头收集真实数据，同时在自动驾驶计算平台上模拟出更多相似的环境，让系统学习以便下次更好地处理。一个典型的例子便是特斯拉的影子模式：通过与人类驾驶员行为进行比对，找出潜在的cornercases。而后对这些场景进行标注，并加入至训练集中。

相应的，车企需要建立数据处理流程，以便搜集上来的真实数据可以用于模型迭代，同时迭代后的模型可以实装到真实量产车上。同时为了大规模地让机器学习cornercase，在获取一个cornercase 后还会针对这一cornercase 遇到的问题进行大规模模拟，推导出更多的cornercases 系统学习。英伟达应用元宇宙技术开发的模拟平台—NvidiaDriveSim 就是模拟系统之一。数据领先的企业会构建数据护城河。

常见的数据处理流程为：

1） 判断自动驾驶车辆是否遇到corner case，并上传

2） 针对上传的数据进行标注

3） 使用模拟软件模拟并创建额外的训练数据

4） 用数据迭代更新神经网络模型

5） 通过OTA 的方式将模型部署至真实车辆

**数据处理流程**

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/DKNEl8KjAvicB6U2kSl3PaUWcHutrYHLsorCdfMebicskvPLKMgCYIrGKicsN4xnGr02z47U16XcqsTicyEIXgC42g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

数据闭环的背后依赖超大算力的数据中心，根据英伟达在 2022CES 上的发言，投资 L2 辅助驾驶系统的公司只需 1-2000 个 GPU，而开发完整的 L4 自动驾驶系统公司需要 25000 个GPU 来搭建数据中心。

1、目前特斯拉拥有 3 大计算中心总计 11544 个 GPU：自动标记计算中心有 1752 个 A100GPU，其他两个用来训练的计算中心分别有 4032 个、5760个 A100 GPU；在 2021 AI DAY 发布的自研DOJO 超级计算机系统有 3000个 D1芯片，算力高达 1.1EFLOPS。

2、商汤科技在建的上海超算中心项目规划了20000+A100 GPU，全部建成后算力峰值将达到 3.65EFLPOS (BF16/CFP8)。